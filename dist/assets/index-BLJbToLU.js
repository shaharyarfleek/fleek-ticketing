(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _f(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var Nu={exports:{}},ji={},ku={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kn=Symbol.for("react.element"),Sf=Symbol.for("react.portal"),Cf=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),Pf=Symbol.for("react.provider"),Af=Symbol.for("react.context"),Rf=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),Df=Symbol.for("react.memo"),$f=Symbol.for("react.lazy"),Kc=Symbol.iterator;function Lf(t){return t===null||typeof t!="object"?null:(t=Kc&&t[Kc]||t["@@iterator"],typeof t=="function"?t:null)}var _u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Su=Object.assign,Cu={};function Is(t,e,r){this.props=t,this.context=e,this.refs=Cu,this.updater=r||_u}Is.prototype.isReactComponent={};Is.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Is.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Eu(){}Eu.prototype=Is.prototype;function Pl(t,e,r){this.props=t,this.context=e,this.refs=Cu,this.updater=r||_u}var Al=Pl.prototype=new Eu;Al.constructor=Pl;Su(Al,Is.prototype);Al.isPureReactComponent=!0;var Qc=Array.isArray,Tu=Object.prototype.hasOwnProperty,Rl={current:null},Pu={key:!0,ref:!0,__self:!0,__source:!0};function Au(t,e,r){var s,a={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Tu.call(e,s)&&!Pu.hasOwnProperty(s)&&(a[s]=e[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Kn,type:t,key:i,ref:o,props:a,_owner:Rl.current}}function Uf(t,e){return{$$typeof:Kn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ol(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kn}function If(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Gc=/\/+/g;function Hi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?If(""+t.key):e.toString(36)}function Aa(t,e,r,s,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kn:case Sf:o=!0}}if(o)return o=t,a=a(o),t=s===""?"."+Hi(o,0):s,Qc(a)?(r="",t!=null&&(r=t.replace(Gc,"$&/")+"/"),Aa(a,e,r,"",function(d){return d})):a!=null&&(Ol(a)&&(a=Uf(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Gc,"$&/")+"/")+t)),e.push(a)),1;if(o=0,s=s===""?".":s+":",Qc(t))for(var l=0;l<t.length;l++){i=t[l];var c=s+Hi(i,l);o+=Aa(i,e,r,c,a)}else if(c=Lf(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=s+Hi(i,l++),o+=Aa(i,e,r,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ca(t,e,r){if(t==null)return t;var s=[],a=0;return Aa(t,s,"","",function(i){return e.call(r,i,a++)}),s}function Mf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ve={current:null},Ra={transition:null},Ff={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Ra,ReactCurrentOwner:Rl};function Ru(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:ca,forEach:function(t,e,r){ca(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ca(t,function(){e++}),e},toArray:function(t){return ca(t,function(e){return e})||[]},only:function(t){if(!Ol(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=Is;K.Fragment=Cf;K.Profiler=Tf;K.PureComponent=Pl;K.StrictMode=Ef;K.Suspense=Of;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ff;K.act=Ru;K.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Su({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Rl.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Tu.call(e,c)&&!Pu.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Kn,type:t.type,key:a,ref:i,props:s,_owner:o}};K.createContext=function(t){return t={$$typeof:Af,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pf,_context:t},t.Consumer=t};K.createElement=Au;K.createFactory=function(t){var e=Au.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:Rf,render:t}};K.isValidElement=Ol;K.lazy=function(t){return{$$typeof:$f,_payload:{_status:-1,_result:t},_init:Mf}};K.memo=function(t,e){return{$$typeof:Df,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Ra.transition;Ra.transition={};try{t()}finally{Ra.transition=e}};K.unstable_act=Ru;K.useCallback=function(t,e){return Ve.current.useCallback(t,e)};K.useContext=function(t){return Ve.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Ve.current.useDeferredValue(t)};K.useEffect=function(t,e){return Ve.current.useEffect(t,e)};K.useId=function(){return Ve.current.useId()};K.useImperativeHandle=function(t,e,r){return Ve.current.useImperativeHandle(t,e,r)};K.useInsertionEffect=function(t,e){return Ve.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Ve.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Ve.current.useMemo(t,e)};K.useReducer=function(t,e,r){return Ve.current.useReducer(t,e,r)};K.useRef=function(t){return Ve.current.useRef(t)};K.useState=function(t){return Ve.current.useState(t)};K.useSyncExternalStore=function(t,e,r){return Ve.current.useSyncExternalStore(t,e,r)};K.useTransition=function(){return Ve.current.useTransition()};K.version="18.3.1";ku.exports=K;var S=ku.exports;const zf=kf(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf=S,Hf=Symbol.for("react.element"),Vf=Symbol.for("react.fragment"),Wf=Object.prototype.hasOwnProperty,qf=Bf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kf={key:!0,ref:!0,__self:!0,__source:!0};function Ou(t,e,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Wf.call(e,s)&&!Kf.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:Hf,type:t,key:i,ref:o,props:a,_owner:qf.current}}ji.Fragment=Vf;ji.jsx=Ou;ji.jsxs=Ou;Nu.exports=ji;var n=Nu.exports,Du={exports:{}},rt={},$u={exports:{}},Lu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,T){var L=k.length;k.push(T);e:for(;0<L;){var I=L-1>>>1,P=k[I];if(0<a(P,T))k[I]=T,k[L]=P,L=I;else break e}}function r(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var T=k[0],L=k.pop();if(L!==T){k[0]=L;e:for(var I=0,P=k.length,O=P>>>1;I<O;){var H=2*(I+1)-1,re=k[H],Y=H+1,Fe=k[Y];if(0>a(re,L))Y<P&&0>a(Fe,re)?(k[I]=Fe,k[Y]=L,I=Y):(k[I]=re,k[H]=L,I=H);else if(Y<P&&0>a(Fe,L))k[I]=Fe,k[Y]=L,I=Y;else break e}}return T}function a(k,T){var L=k.sortIndex-T.sortIndex;return L!==0?L:k.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,g=3,p=!1,y=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(k){for(var T=r(d);T!==null;){if(T.callback===null)s(d);else if(T.startTime<=k)s(d),T.sortIndex=T.expirationTime,e(c,T);else break;T=r(d)}}function v(k){if(j=!1,h(k),!y)if(r(c)!==null)y=!0,W(b);else{var T=r(d);T!==null&&J(v,T.startTime-k)}}function b(k,T){y=!1,j&&(j=!1,x(R),R=-1),p=!0;var L=g;try{for(h(T),m=r(c);m!==null&&(!(m.expirationTime>T)||k&&!U());){var I=m.callback;if(typeof I=="function"){m.callback=null,g=m.priorityLevel;var P=I(m.expirationTime<=T);T=t.unstable_now(),typeof P=="function"?m.callback=P:m===r(c)&&s(c),h(T)}else s(c);m=r(c)}if(m!==null)var O=!0;else{var H=r(d);H!==null&&J(v,H.startTime-T),O=!1}return O}finally{m=null,g=L,p=!1}}var w=!1,_=null,R=-1,A=5,C=-1;function U(){return!(t.unstable_now()-C<A)}function B(){if(_!==null){var k=t.unstable_now();C=k;var T=!0;try{T=_(!0,k)}finally{T?F():(w=!1,_=null)}}else w=!1}var F;if(typeof f=="function")F=function(){f(B)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ee=te.port2;te.port1.onmessage=B,F=function(){ee.postMessage(null)}}else F=function(){N(B,0)};function W(k){_=k,w||(w=!0,F())}function J(k,T){R=N(function(){k(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,W(b))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(k){switch(g){case 1:case 2:case 3:var T=3;break;default:T=g}var L=g;g=T;try{return k()}finally{g=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,T){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var L=g;g=k;try{return T()}finally{g=L}},t.unstable_scheduleCallback=function(k,T,L){var I=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?I+L:I):L=I,k){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=L+P,k={id:u++,callback:T,priorityLevel:k,startTime:L,expirationTime:P,sortIndex:-1},L>I?(k.sortIndex=L,e(d,k),r(c)===null&&k===r(d)&&(j?(x(R),R=-1):j=!0,J(v,L-I))):(k.sortIndex=P,e(c,k),y||p||(y=!0,W(b))),k},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(k){var T=g;return function(){var L=g;g=T;try{return k.apply(this,arguments)}finally{g=L}}}})(Lu);$u.exports=Lu;var Qf=$u.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gf=S,tt=Qf;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uu=new Set,Nn={};function qr(t,e){Ts(t,e),Ts(t+"Capture",e)}function Ts(t,e){for(Nn[t]=e,t=0;t<e.length;t++)Uu.add(e[t])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_o=Object.prototype.hasOwnProperty,Jf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jc={},Yc={};function Yf(t){return _o.call(Yc,t)?!0:_o.call(Jc,t)?!1:Jf.test(t)?Yc[t]=!0:(Jc[t]=!0,!1)}function Xf(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Zf(t,e,r,s){if(e===null||typeof e>"u"||Xf(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function We(t,e,r,s,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Oe[t]=new We(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Oe[e]=new We(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Oe[t]=new We(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Oe[t]=new We(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Oe[t]=new We(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Oe[t]=new We(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Oe[t]=new We(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Oe[t]=new We(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Oe[t]=new We(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dl=/[\-:]([a-z])/g;function $l(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dl,$l);Oe[e]=new We(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dl,$l);Oe[e]=new We(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dl,$l);Oe[e]=new We(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Oe[t]=new We(t,1,!1,t.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Oe[t]=new We(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ll(t,e,r,s){var a=Oe.hasOwnProperty(e)?Oe[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Zf(e,r,a,s)&&(r=null),s||a===null?Yf(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,s=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Yt=Gf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,da=Symbol.for("react.element"),ls=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),Ul=Symbol.for("react.strict_mode"),So=Symbol.for("react.profiler"),Iu=Symbol.for("react.provider"),Mu=Symbol.for("react.context"),Il=Symbol.for("react.forward_ref"),Co=Symbol.for("react.suspense"),Eo=Symbol.for("react.suspense_list"),Ml=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),Fu=Symbol.for("react.offscreen"),Xc=Symbol.iterator;function Qs(t){return t===null||typeof t!="object"?null:(t=Xc&&t[Xc]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,Vi;function sn(t){if(Vi===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Vi=e&&e[1]||""}return`
`+Vi+t}var Wi=!1;function qi(t,e){if(!t||Wi)return"";Wi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Wi=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?sn(t):""}function e0(t){switch(t.tag){case 5:return sn(t.type);case 16:return sn("Lazy");case 13:return sn("Suspense");case 19:return sn("SuspenseList");case 0:case 2:case 15:return t=qi(t.type,!1),t;case 11:return t=qi(t.type.render,!1),t;case 1:return t=qi(t.type,!0),t;default:return""}}function To(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cs:return"Fragment";case ls:return"Portal";case So:return"Profiler";case Ul:return"StrictMode";case Co:return"Suspense";case Eo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mu:return(t.displayName||"Context")+".Consumer";case Iu:return(t._context.displayName||"Context")+".Provider";case Il:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ml:return e=t.displayName||null,e!==null?e:To(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return To(t(e))}catch{}}return null}function t0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return To(e);case 8:return e===Ul?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function r0(t){var e=zu(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ua(t){t._valueTracker||(t._valueTracker=r0(t))}function Bu(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=zu(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function Va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Po(t,e){var r=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Zc(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=vr(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hu(t,e){e=e.checked,e!=null&&Ll(t,"checked",e,!1)}function Ao(t,e){Hu(t,e);var r=vr(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ro(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ro(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ed(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ro(t,e,r){(e!=="number"||Va(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var nn=Array.isArray;function bs(t,e,r,s){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&s&&(t[r].defaultSelected=!0)}else{for(r=""+vr(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Oo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function td(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(D(92));if(nn(r)){if(1<r.length)throw Error(D(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:vr(r)}}function Vu(t,e){var r=vr(e.value),s=vr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function rd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Do(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wu(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ha,qu=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ha=ha||document.createElement("div"),ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var cn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s0=["Webkit","ms","Moz","O"];Object.keys(cn).forEach(function(t){s0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cn[e]=cn[t]})});function Ku(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||cn.hasOwnProperty(t)&&cn[t]?(""+e).trim():e+"px"}function Qu(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=Ku(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,a):t[r]=a}}var n0=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $o(t,e){if(e){if(n0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Lo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uo=null;function Fl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Io=null,js=null,Ns=null;function sd(t){if(t=Jn(t)){if(typeof Io!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Ci(e),Io(t.stateNode,t.type,e))}}function Gu(t){js?Ns?Ns.push(t):Ns=[t]:js=t}function Ju(){if(js){var t=js,e=Ns;if(Ns=js=null,sd(t),e)for(t=0;t<e.length;t++)sd(e[t])}}function Yu(t,e){return t(e)}function Xu(){}var Ki=!1;function Zu(t,e,r){if(Ki)return t(e,r);Ki=!0;try{return Yu(t,e,r)}finally{Ki=!1,(js!==null||Ns!==null)&&(Xu(),Ju())}}function _n(t,e){var r=t.stateNode;if(r===null)return null;var s=Ci(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(D(231,e,typeof r));return r}var Mo=!1;if(qt)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){Mo=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{Mo=!1}function a0(t,e,r,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var dn=!1,Wa=null,qa=!1,Fo=null,i0={onError:function(t){dn=!0,Wa=t}};function o0(t,e,r,s,a,i,o,l,c){dn=!1,Wa=null,a0.apply(i0,arguments)}function l0(t,e,r,s,a,i,o,l,c){if(o0.apply(this,arguments),dn){if(dn){var d=Wa;dn=!1,Wa=null}else throw Error(D(198));qa||(qa=!0,Fo=d)}}function Kr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function eh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nd(t){if(Kr(t)!==t)throw Error(D(188))}function c0(t){var e=t.alternate;if(!e){if(e=Kr(t),e===null)throw Error(D(188));return e!==t?null:t}for(var r=t,s=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return nd(a),t;if(i===s)return nd(a),e;i=i.sibling}throw Error(D(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(D(189))}}if(r.alternate!==s)throw Error(D(190))}if(r.tag!==3)throw Error(D(188));return r.stateNode.current===r?t:e}function th(t){return t=c0(t),t!==null?rh(t):null}function rh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rh(t);if(e!==null)return e;t=t.sibling}return null}var sh=tt.unstable_scheduleCallback,ad=tt.unstable_cancelCallback,d0=tt.unstable_shouldYield,u0=tt.unstable_requestPaint,we=tt.unstable_now,h0=tt.unstable_getCurrentPriorityLevel,zl=tt.unstable_ImmediatePriority,nh=tt.unstable_UserBlockingPriority,Ka=tt.unstable_NormalPriority,m0=tt.unstable_LowPriority,ah=tt.unstable_IdlePriority,Ni=null,$t=null;function f0(t){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Ni,t,void 0,(t.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:x0,p0=Math.log,g0=Math.LN2;function x0(t){return t>>>=0,t===0?32:31-(p0(t)/g0|0)|0}var ma=64,fa=4194304;function an(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qa(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,a=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=an(l):(i&=o,i!==0&&(s=an(i)))}else o=r&~a,o!==0?s=an(o):i!==0&&(s=an(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-_t(e),a=1<<r,s|=t[r],e&=~a;return s}function v0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y0(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_t(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=v0(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function zo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ih(){var t=ma;return ma<<=1,!(ma&4194240)&&(ma=64),t}function Qi(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Qn(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_t(e),t[e]=r}function w0(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-_t(r),i=1<<a;e[a]=0,s[a]=-1,t[a]=-1,r&=~i}}function Bl(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-_t(r),a=1<<s;a&e|t[s]&e&&(t[s]|=e),r&=~a}}var se=0;function oh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lh,Hl,ch,dh,uh,Bo=!1,pa=[],dr=null,ur=null,hr=null,Sn=new Map,Cn=new Map,nr=[],b0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function id(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Sn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cn.delete(e.pointerId)}}function Js(t,e,r,s,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Jn(e),e!==null&&Hl(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function j0(t,e,r,s,a){switch(e){case"focusin":return dr=Js(dr,t,e,r,s,a),!0;case"dragenter":return ur=Js(ur,t,e,r,s,a),!0;case"mouseover":return hr=Js(hr,t,e,r,s,a),!0;case"pointerover":var i=a.pointerId;return Sn.set(i,Js(Sn.get(i)||null,t,e,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Cn.set(i,Js(Cn.get(i)||null,t,e,r,s,a)),!0}return!1}function hh(t){var e=$r(t.target);if(e!==null){var r=Kr(e);if(r!==null){if(e=r.tag,e===13){if(e=eh(r),e!==null){t.blockedOn=e,uh(t.priority,function(){ch(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ho(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Uo=s,r.target.dispatchEvent(s),Uo=null}else return e=Jn(r),e!==null&&Hl(e),t.blockedOn=r,!1;e.shift()}return!0}function od(t,e,r){Oa(t)&&r.delete(e)}function N0(){Bo=!1,dr!==null&&Oa(dr)&&(dr=null),ur!==null&&Oa(ur)&&(ur=null),hr!==null&&Oa(hr)&&(hr=null),Sn.forEach(od),Cn.forEach(od)}function Ys(t,e){t.blockedOn===e&&(t.blockedOn=null,Bo||(Bo=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,N0)))}function En(t){function e(a){return Ys(a,t)}if(0<pa.length){Ys(pa[0],t);for(var r=1;r<pa.length;r++){var s=pa[r];s.blockedOn===t&&(s.blockedOn=null)}}for(dr!==null&&Ys(dr,t),ur!==null&&Ys(ur,t),hr!==null&&Ys(hr,t),Sn.forEach(e),Cn.forEach(e),r=0;r<nr.length;r++)s=nr[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<nr.length&&(r=nr[0],r.blockedOn===null);)hh(r),r.blockedOn===null&&nr.shift()}var ks=Yt.ReactCurrentBatchConfig,Ga=!0;function k0(t,e,r,s){var a=se,i=ks.transition;ks.transition=null;try{se=1,Vl(t,e,r,s)}finally{se=a,ks.transition=i}}function _0(t,e,r,s){var a=se,i=ks.transition;ks.transition=null;try{se=4,Vl(t,e,r,s)}finally{se=a,ks.transition=i}}function Vl(t,e,r,s){if(Ga){var a=Ho(t,e,r,s);if(a===null)no(t,e,s,Ja,r),id(t,s);else if(j0(a,t,e,r,s))s.stopPropagation();else if(id(t,s),e&4&&-1<b0.indexOf(t)){for(;a!==null;){var i=Jn(a);if(i!==null&&lh(i),i=Ho(t,e,r,s),i===null&&no(t,e,s,Ja,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else no(t,e,s,null,r)}}var Ja=null;function Ho(t,e,r,s){if(Ja=null,t=Fl(s),t=$r(t),t!==null)if(e=Kr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=eh(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ja=t,null}function mh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h0()){case zl:return 1;case nh:return 4;case Ka:case m0:return 16;case ah:return 536870912;default:return 16}default:return 16}}var or=null,Wl=null,Da=null;function fh(){if(Da)return Da;var t,e=Wl,r=e.length,s,a="value"in or?or.value:or.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(s=1;s<=o&&e[r-s]===a[i-s];s++);return Da=a.slice(t,1<s?1-s:void 0)}function $a(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ga(){return!0}function ld(){return!1}function st(t){function e(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ga:ld,this.isPropagationStopped=ld,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),e}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=st(Ms),Gn=ve({},Ms,{view:0,detail:0}),S0=st(Gn),Gi,Ji,Xs,ki=ve({},Gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?(Gi=t.screenX-Xs.screenX,Ji=t.screenY-Xs.screenY):Ji=Gi=0,Xs=t),Gi)},movementY:function(t){return"movementY"in t?t.movementY:Ji}}),cd=st(ki),C0=ve({},ki,{dataTransfer:0}),E0=st(C0),T0=ve({},Gn,{relatedTarget:0}),Yi=st(T0),P0=ve({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),A0=st(P0),R0=ve({},Ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),O0=st(R0),D0=ve({},Ms,{data:0}),dd=st(D0),$0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=U0[t])?!!e[t]:!1}function Kl(){return I0}var M0=ve({},Gn,{key:function(t){if(t.key){var e=$0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$a(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?L0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kl,charCode:function(t){return t.type==="keypress"?$a(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$a(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F0=st(M0),z0=ve({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ud=st(z0),B0=ve({},Gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kl}),H0=st(B0),V0=ve({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),W0=st(V0),q0=ve({},ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K0=st(q0),Q0=[9,13,27,32],Ql=qt&&"CompositionEvent"in window,un=null;qt&&"documentMode"in document&&(un=document.documentMode);var G0=qt&&"TextEvent"in window&&!un,ph=qt&&(!Ql||un&&8<un&&11>=un),hd=" ",md=!1;function gh(t,e){switch(t){case"keyup":return Q0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ds=!1;function J0(t,e){switch(t){case"compositionend":return xh(e);case"keypress":return e.which!==32?null:(md=!0,hd);case"textInput":return t=e.data,t===hd&&md?null:t;default:return null}}function Y0(t,e){if(ds)return t==="compositionend"||!Ql&&gh(t,e)?(t=fh(),Da=Wl=or=null,ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ph&&e.locale!=="ko"?null:e.data;default:return null}}var X0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!X0[t.type]:e==="textarea"}function vh(t,e,r,s){Gu(s),e=Ya(e,"onChange"),0<e.length&&(r=new ql("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var hn=null,Tn=null;function Z0(t){Th(t,0)}function _i(t){var e=ms(t);if(Bu(e))return t}function ep(t,e){if(t==="change")return e}var yh=!1;if(qt){var Xi;if(qt){var Zi="oninput"in document;if(!Zi){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),Zi=typeof pd.oninput=="function"}Xi=Zi}else Xi=!1;yh=Xi&&(!document.documentMode||9<document.documentMode)}function gd(){hn&&(hn.detachEvent("onpropertychange",wh),Tn=hn=null)}function wh(t){if(t.propertyName==="value"&&_i(Tn)){var e=[];vh(e,Tn,t,Fl(t)),Zu(Z0,e)}}function tp(t,e,r){t==="focusin"?(gd(),hn=e,Tn=r,hn.attachEvent("onpropertychange",wh)):t==="focusout"&&gd()}function rp(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _i(Tn)}function sp(t,e){if(t==="click")return _i(e)}function np(t,e){if(t==="input"||t==="change")return _i(e)}function ap(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ct=typeof Object.is=="function"?Object.is:ap;function Pn(t,e){if(Ct(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!_o.call(e,a)||!Ct(t[a],e[a]))return!1}return!0}function xd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vd(t,e){var r=xd(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xd(r)}}function bh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jh(){for(var t=window,e=Va();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Va(t.document)}return e}function Gl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ip(t){var e=jh(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&bh(r.ownerDocument.documentElement,r)){if(s!==null&&Gl(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!t.extend&&i>s&&(a=s,s=i,i=a),a=vd(r,i);var o=vd(r,s);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var op=qt&&"documentMode"in document&&11>=document.documentMode,us=null,Vo=null,mn=null,Wo=!1;function yd(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wo||us==null||us!==Va(s)||(s=us,"selectionStart"in s&&Gl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),mn&&Pn(mn,s)||(mn=s,s=Ya(Vo,"onSelect"),0<s.length&&(e=new ql("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=us)))}function xa(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var hs={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},eo={},Nh={};qt&&(Nh=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Si(t){if(eo[t])return eo[t];if(!hs[t])return t;var e=hs[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Nh)return eo[t]=e[r];return t}var kh=Si("animationend"),_h=Si("animationiteration"),Sh=Si("animationstart"),Ch=Si("transitionend"),Eh=new Map,wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(t,e){Eh.set(t,e),qr(e,[t])}for(var to=0;to<wd.length;to++){var ro=wd[to],lp=ro.toLowerCase(),cp=ro[0].toUpperCase()+ro.slice(1);br(lp,"on"+cp)}br(kh,"onAnimationEnd");br(_h,"onAnimationIteration");br(Sh,"onAnimationStart");br("dblclick","onDoubleClick");br("focusin","onFocus");br("focusout","onBlur");br(Ch,"onTransitionEnd");Ts("onMouseEnter",["mouseout","mouseover"]);Ts("onMouseLeave",["mouseout","mouseover"]);Ts("onPointerEnter",["pointerout","pointerover"]);Ts("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var on="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dp=new Set("cancel close invalid load scroll toggle".split(" ").concat(on));function bd(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,l0(s,e,void 0,t),t.currentTarget=null}function Th(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],a=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;bd(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;bd(a,l,d),i=c}}}if(qa)throw t=Fo,qa=!1,Fo=null,t}function ce(t,e){var r=e[Jo];r===void 0&&(r=e[Jo]=new Set);var s=t+"__bubble";r.has(s)||(Ph(e,t,2,!1),r.add(s))}function so(t,e,r){var s=0;e&&(s|=4),Ph(r,t,s,e)}var va="_reactListening"+Math.random().toString(36).slice(2);function An(t){if(!t[va]){t[va]=!0,Uu.forEach(function(r){r!=="selectionchange"&&(dp.has(r)||so(r,!1,t),so(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[va]||(e[va]=!0,so("selectionchange",!1,e))}}function Ph(t,e,r,s){switch(mh(e)){case 1:var a=k0;break;case 4:a=_0;break;default:a=Vl}r=a.bind(null,e,r,t),a=void 0,!Mo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function no(t,e,r,s,a){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=$r(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}Zu(function(){var d=i,u=Fl(r),m=[];e:{var g=Eh.get(t);if(g!==void 0){var p=ql,y=t;switch(t){case"keypress":if($a(r)===0)break e;case"keydown":case"keyup":p=F0;break;case"focusin":y="focus",p=Yi;break;case"focusout":y="blur",p=Yi;break;case"beforeblur":case"afterblur":p=Yi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=E0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=H0;break;case kh:case _h:case Sh:p=A0;break;case Ch:p=W0;break;case"scroll":p=S0;break;case"wheel":p=K0;break;case"copy":case"cut":case"paste":p=O0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ud}var j=(e&4)!==0,N=!j&&t==="scroll",x=j?g!==null?g+"Capture":null:g;j=[];for(var f=d,h;f!==null;){h=f;var v=h.stateNode;if(h.tag===5&&v!==null&&(h=v,x!==null&&(v=_n(f,x),v!=null&&j.push(Rn(f,v,h)))),N)break;f=f.return}0<j.length&&(g=new p(g,y,null,r,u),m.push({event:g,listeners:j}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",g&&r!==Uo&&(y=r.relatedTarget||r.fromElement)&&($r(y)||y[Kt]))break e;if((p||g)&&(g=u.window===u?u:(g=u.ownerDocument)?g.defaultView||g.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=d,y=y?$r(y):null,y!==null&&(N=Kr(y),y!==N||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=d),p!==y)){if(j=cd,v="onMouseLeave",x="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(j=ud,v="onPointerLeave",x="onPointerEnter",f="pointer"),N=p==null?g:ms(p),h=y==null?g:ms(y),g=new j(v,f+"leave",p,r,u),g.target=N,g.relatedTarget=h,v=null,$r(u)===d&&(j=new j(x,f+"enter",y,r,u),j.target=h,j.relatedTarget=N,v=j),N=v,p&&y)t:{for(j=p,x=y,f=0,h=j;h;h=es(h))f++;for(h=0,v=x;v;v=es(v))h++;for(;0<f-h;)j=es(j),f--;for(;0<h-f;)x=es(x),h--;for(;f--;){if(j===x||x!==null&&j===x.alternate)break t;j=es(j),x=es(x)}j=null}else j=null;p!==null&&jd(m,g,p,j,!1),y!==null&&N!==null&&jd(m,N,y,j,!0)}}e:{if(g=d?ms(d):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var b=ep;else if(fd(g))if(yh)b=np;else{b=rp;var w=tp}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(b=sp);if(b&&(b=b(t,d))){vh(m,b,r,u);break e}w&&w(t,g,d),t==="focusout"&&(w=g._wrapperState)&&w.controlled&&g.type==="number"&&Ro(g,"number",g.value)}switch(w=d?ms(d):window,t){case"focusin":(fd(w)||w.contentEditable==="true")&&(us=w,Vo=d,mn=null);break;case"focusout":mn=Vo=us=null;break;case"mousedown":Wo=!0;break;case"contextmenu":case"mouseup":case"dragend":Wo=!1,yd(m,r,u);break;case"selectionchange":if(op)break;case"keydown":case"keyup":yd(m,r,u)}var _;if(Ql)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ds?gh(t,r)&&(R="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(ph&&r.locale!=="ko"&&(ds||R!=="onCompositionStart"?R==="onCompositionEnd"&&ds&&(_=fh()):(or=u,Wl="value"in or?or.value:or.textContent,ds=!0)),w=Ya(d,R),0<w.length&&(R=new dd(R,t,null,r,u),m.push({event:R,listeners:w}),_?R.data=_:(_=xh(r),_!==null&&(R.data=_)))),(_=G0?J0(t,r):Y0(t,r))&&(d=Ya(d,"onBeforeInput"),0<d.length&&(u=new dd("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=_))}Th(m,e)})}function Rn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ya(t,e){for(var r=e+"Capture",s=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=_n(t,r),i!=null&&s.unshift(Rn(t,i,a)),i=_n(t,e),i!=null&&s.push(Rn(t,i,a))),t=t.return}return s}function es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jd(t,e,r,s,a){for(var i=e._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=_n(r,i),c!=null&&o.unshift(Rn(r,c,l))):a||(c=_n(r,i),c!=null&&o.push(Rn(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var up=/\r\n?/g,hp=/\u0000|\uFFFD/g;function Nd(t){return(typeof t=="string"?t:""+t).replace(up,`
`).replace(hp,"")}function ya(t,e,r){if(e=Nd(e),Nd(t)!==e&&r)throw Error(D(425))}function Xa(){}var qo=null,Ko=null;function Qo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Go=typeof setTimeout=="function"?setTimeout:void 0,mp=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,fp=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(t){return kd.resolve(null).then(t).catch(pp)}:Go;function pp(t){setTimeout(function(){throw t})}function ao(t,e){var r=e,s=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){t.removeChild(a),En(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);En(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _d(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Fs=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Fs,On="__reactProps$"+Fs,Kt="__reactContainer$"+Fs,Jo="__reactEvents$"+Fs,gp="__reactListeners$"+Fs,xp="__reactHandles$"+Fs;function $r(t){var e=t[Rt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Kt]||r[Rt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=_d(t);t!==null;){if(r=t[Rt])return r;t=_d(t)}return e}t=r,r=t.parentNode}return null}function Jn(t){return t=t[Rt]||t[Kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Ci(t){return t[On]||null}var Yo=[],fs=-1;function jr(t){return{current:t}}function de(t){0>fs||(t.current=Yo[fs],Yo[fs]=null,fs--)}function oe(t,e){fs++,Yo[fs]=t.current,t.current=e}var yr={},Me=jr(yr),Ge=jr(!1),zr=yr;function Ps(t,e){var r=t.type.contextTypes;if(!r)return yr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Je(t){return t=t.childContextTypes,t!=null}function Za(){de(Ge),de(Me)}function Sd(t,e,r){if(Me.current!==yr)throw Error(D(168));oe(Me,e),oe(Ge,r)}function Ah(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(D(108,t0(t)||"Unknown",a));return ve({},r,s)}function ei(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yr,zr=Me.current,oe(Me,t),oe(Ge,Ge.current),!0}function Cd(t,e,r){var s=t.stateNode;if(!s)throw Error(D(169));r?(t=Ah(t,e,zr),s.__reactInternalMemoizedMergedChildContext=t,de(Ge),de(Me),oe(Me,t)):de(Ge),oe(Ge,r)}var Bt=null,Ei=!1,io=!1;function Rh(t){Bt===null?Bt=[t]:Bt.push(t)}function vp(t){Ei=!0,Rh(t)}function Nr(){if(!io&&Bt!==null){io=!0;var t=0,e=se;try{var r=Bt;for(se=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}Bt=null,Ei=!1}catch(a){throw Bt!==null&&(Bt=Bt.slice(t+1)),sh(zl,Nr),a}finally{se=e,io=!1}}return null}var ps=[],gs=0,ti=null,ri=0,at=[],it=0,Br=null,Ht=1,Vt="";function Ar(t,e){ps[gs++]=ri,ps[gs++]=ti,ti=t,ri=e}function Oh(t,e,r){at[it++]=Ht,at[it++]=Vt,at[it++]=Br,Br=t;var s=Ht;t=Vt;var a=32-_t(s)-1;s&=~(1<<a),r+=1;var i=32-_t(e)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Ht=1<<32-_t(e)+a|r<<a|s,Vt=i+t}else Ht=1<<i|r<<a|s,Vt=t}function Jl(t){t.return!==null&&(Ar(t,1),Oh(t,1,0))}function Yl(t){for(;t===ti;)ti=ps[--gs],ps[gs]=null,ri=ps[--gs],ps[gs]=null;for(;t===Br;)Br=at[--it],at[it]=null,Vt=at[--it],at[it]=null,Ht=at[--it],at[it]=null}var et=null,Ze=null,he=!1,kt=null;function Dh(t,e){var r=ot(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ed(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,et=t,Ze=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,et=t,Ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Br!==null?{id:Ht,overflow:Vt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ot(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,et=t,Ze=null,!0):!1;default:return!1}}function Xo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zo(t){if(he){var e=Ze;if(e){var r=e;if(!Ed(t,e)){if(Xo(t))throw Error(D(418));e=mr(r.nextSibling);var s=et;e&&Ed(t,e)?Dh(s,r):(t.flags=t.flags&-4097|2,he=!1,et=t)}}else{if(Xo(t))throw Error(D(418));t.flags=t.flags&-4097|2,he=!1,et=t}}}function Td(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;et=t}function wa(t){if(t!==et)return!1;if(!he)return Td(t),he=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qo(t.type,t.memoizedProps)),e&&(e=Ze)){if(Xo(t))throw $h(),Error(D(418));for(;e;)Dh(t,e),e=mr(e.nextSibling)}if(Td(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ze=mr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ze=null}}else Ze=et?mr(t.stateNode.nextSibling):null;return!0}function $h(){for(var t=Ze;t;)t=mr(t.nextSibling)}function As(){Ze=et=null,he=!1}function Xl(t){kt===null?kt=[t]:kt.push(t)}var yp=Yt.ReactCurrentBatchConfig;function Zs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(D(309));var s=r.stateNode}if(!s)throw Error(D(147,t));var a=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!r._owner)throw Error(D(290,t))}return t}function ba(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pd(t){var e=t._init;return e(t._payload)}function Lh(t){function e(x,f){if(t){var h=x.deletions;h===null?(x.deletions=[f],x.flags|=16):h.push(f)}}function r(x,f){if(!t)return null;for(;f!==null;)e(x,f),f=f.sibling;return null}function s(x,f){for(x=new Map;f!==null;)f.key!==null?x.set(f.key,f):x.set(f.index,f),f=f.sibling;return x}function a(x,f){return x=xr(x,f),x.index=0,x.sibling=null,x}function i(x,f,h){return x.index=h,t?(h=x.alternate,h!==null?(h=h.index,h<f?(x.flags|=2,f):h):(x.flags|=2,f)):(x.flags|=1048576,f)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,f,h,v){return f===null||f.tag!==6?(f=fo(h,x.mode,v),f.return=x,f):(f=a(f,h),f.return=x,f)}function c(x,f,h,v){var b=h.type;return b===cs?u(x,f,h.props.children,v,h.key):f!==null&&(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===tr&&Pd(b)===f.type)?(v=a(f,h.props),v.ref=Zs(x,f,h),v.return=x,v):(v=Ba(h.type,h.key,h.props,null,x.mode,v),v.ref=Zs(x,f,h),v.return=x,v)}function d(x,f,h,v){return f===null||f.tag!==4||f.stateNode.containerInfo!==h.containerInfo||f.stateNode.implementation!==h.implementation?(f=po(h,x.mode,v),f.return=x,f):(f=a(f,h.children||[]),f.return=x,f)}function u(x,f,h,v,b){return f===null||f.tag!==7?(f=Mr(h,x.mode,v,b),f.return=x,f):(f=a(f,h),f.return=x,f)}function m(x,f,h){if(typeof f=="string"&&f!==""||typeof f=="number")return f=fo(""+f,x.mode,h),f.return=x,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case da:return h=Ba(f.type,f.key,f.props,null,x.mode,h),h.ref=Zs(x,null,f),h.return=x,h;case ls:return f=po(f,x.mode,h),f.return=x,f;case tr:var v=f._init;return m(x,v(f._payload),h)}if(nn(f)||Qs(f))return f=Mr(f,x.mode,h,null),f.return=x,f;ba(x,f)}return null}function g(x,f,h,v){var b=f!==null?f.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return b!==null?null:l(x,f,""+h,v);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case da:return h.key===b?c(x,f,h,v):null;case ls:return h.key===b?d(x,f,h,v):null;case tr:return b=h._init,g(x,f,b(h._payload),v)}if(nn(h)||Qs(h))return b!==null?null:u(x,f,h,v,null);ba(x,h)}return null}function p(x,f,h,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return x=x.get(h)||null,l(f,x,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case da:return x=x.get(v.key===null?h:v.key)||null,c(f,x,v,b);case ls:return x=x.get(v.key===null?h:v.key)||null,d(f,x,v,b);case tr:var w=v._init;return p(x,f,h,w(v._payload),b)}if(nn(v)||Qs(v))return x=x.get(h)||null,u(f,x,v,b,null);ba(f,v)}return null}function y(x,f,h,v){for(var b=null,w=null,_=f,R=f=0,A=null;_!==null&&R<h.length;R++){_.index>R?(A=_,_=null):A=_.sibling;var C=g(x,_,h[R],v);if(C===null){_===null&&(_=A);break}t&&_&&C.alternate===null&&e(x,_),f=i(C,f,R),w===null?b=C:w.sibling=C,w=C,_=A}if(R===h.length)return r(x,_),he&&Ar(x,R),b;if(_===null){for(;R<h.length;R++)_=m(x,h[R],v),_!==null&&(f=i(_,f,R),w===null?b=_:w.sibling=_,w=_);return he&&Ar(x,R),b}for(_=s(x,_);R<h.length;R++)A=p(_,x,R,h[R],v),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?R:A.key),f=i(A,f,R),w===null?b=A:w.sibling=A,w=A);return t&&_.forEach(function(U){return e(x,U)}),he&&Ar(x,R),b}function j(x,f,h,v){var b=Qs(h);if(typeof b!="function")throw Error(D(150));if(h=b.call(h),h==null)throw Error(D(151));for(var w=b=null,_=f,R=f=0,A=null,C=h.next();_!==null&&!C.done;R++,C=h.next()){_.index>R?(A=_,_=null):A=_.sibling;var U=g(x,_,C.value,v);if(U===null){_===null&&(_=A);break}t&&_&&U.alternate===null&&e(x,_),f=i(U,f,R),w===null?b=U:w.sibling=U,w=U,_=A}if(C.done)return r(x,_),he&&Ar(x,R),b;if(_===null){for(;!C.done;R++,C=h.next())C=m(x,C.value,v),C!==null&&(f=i(C,f,R),w===null?b=C:w.sibling=C,w=C);return he&&Ar(x,R),b}for(_=s(x,_);!C.done;R++,C=h.next())C=p(_,x,R,C.value,v),C!==null&&(t&&C.alternate!==null&&_.delete(C.key===null?R:C.key),f=i(C,f,R),w===null?b=C:w.sibling=C,w=C);return t&&_.forEach(function(B){return e(x,B)}),he&&Ar(x,R),b}function N(x,f,h,v){if(typeof h=="object"&&h!==null&&h.type===cs&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case da:e:{for(var b=h.key,w=f;w!==null;){if(w.key===b){if(b=h.type,b===cs){if(w.tag===7){r(x,w.sibling),f=a(w,h.props.children),f.return=x,x=f;break e}}else if(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===tr&&Pd(b)===w.type){r(x,w.sibling),f=a(w,h.props),f.ref=Zs(x,w,h),f.return=x,x=f;break e}r(x,w);break}else e(x,w);w=w.sibling}h.type===cs?(f=Mr(h.props.children,x.mode,v,h.key),f.return=x,x=f):(v=Ba(h.type,h.key,h.props,null,x.mode,v),v.ref=Zs(x,f,h),v.return=x,x=v)}return o(x);case ls:e:{for(w=h.key;f!==null;){if(f.key===w)if(f.tag===4&&f.stateNode.containerInfo===h.containerInfo&&f.stateNode.implementation===h.implementation){r(x,f.sibling),f=a(f,h.children||[]),f.return=x,x=f;break e}else{r(x,f);break}else e(x,f);f=f.sibling}f=po(h,x.mode,v),f.return=x,x=f}return o(x);case tr:return w=h._init,N(x,f,w(h._payload),v)}if(nn(h))return y(x,f,h,v);if(Qs(h))return j(x,f,h,v);ba(x,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,f!==null&&f.tag===6?(r(x,f.sibling),f=a(f,h),f.return=x,x=f):(r(x,f),f=fo(h,x.mode,v),f.return=x,x=f),o(x)):r(x,f)}return N}var Rs=Lh(!0),Uh=Lh(!1),si=jr(null),ni=null,xs=null,Zl=null;function ec(){Zl=xs=ni=null}function tc(t){var e=si.current;de(si),t._currentValue=e}function el(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function _s(t,e){ni=t,Zl=xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qe=!0),t.firstContext=null)}function ht(t){var e=t._currentValue;if(Zl!==t)if(t={context:t,memoizedValue:e,next:null},xs===null){if(ni===null)throw Error(D(308));xs=t,ni.dependencies={lanes:0,firstContext:t}}else xs=xs.next=t;return e}var Lr=null;function rc(t){Lr===null?Lr=[t]:Lr.push(t)}function Ih(t,e,r,s){var a=e.interleaved;return a===null?(r.next=r,rc(e)):(r.next=a.next,a.next=r),e.interleaved=r,Qt(t,s)}function Qt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var rr=!1;function sc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,X&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,Qt(t,r)}return a=s.interleaved,a===null?(e.next=e,rc(s)):(e.next=a.next,a.next=e),s.interleaved=e,Qt(t,r)}function La(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Bl(t,r)}}function Ad(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ai(t,e,r,s){var a=t.updateQueue;rr=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var g=l.lane,p=l.eventTime;if((s&g)===g){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,j=l;switch(g=e,p=r,j.tag){case 1:if(y=j.payload,typeof y=="function"){m=y.call(p,m,g);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=j.payload,g=typeof y=="function"?y.call(p,m,g):y,g==null)break e;m=ve({},m,g);break e;case 2:rr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=a.effects,g===null?a.effects=[l]:g.push(l))}else p={eventTime:p,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,o|=g;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Vr|=o,t.lanes=o,t.memoizedState=m}}function Rd(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(D(191,a));a.call(s)}}}var Yn={},Lt=jr(Yn),Dn=jr(Yn),$n=jr(Yn);function Ur(t){if(t===Yn)throw Error(D(174));return t}function nc(t,e){switch(oe($n,e),oe(Dn,t),oe(Lt,Yn),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Do(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Do(e,t)}de(Lt),oe(Lt,e)}function Os(){de(Lt),de(Dn),de($n)}function Fh(t){Ur($n.current);var e=Ur(Lt.current),r=Do(e,t.type);e!==r&&(oe(Dn,t),oe(Lt,r))}function ac(t){Dn.current===t&&(de(Lt),de(Dn))}var pe=jr(0);function ii(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oo=[];function ic(){for(var t=0;t<oo.length;t++)oo[t]._workInProgressVersionPrimary=null;oo.length=0}var Ua=Yt.ReactCurrentDispatcher,lo=Yt.ReactCurrentBatchConfig,Hr=0,xe=null,Se=null,Ee=null,oi=!1,fn=!1,Ln=0,wp=0;function $e(){throw Error(D(321))}function oc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ct(t[r],e[r]))return!1;return!0}function lc(t,e,r,s,a,i){if(Hr=i,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ua.current=t===null||t.memoizedState===null?kp:_p,t=r(s,a),fn){i=0;do{if(fn=!1,Ln=0,25<=i)throw Error(D(301));i+=1,Ee=Se=null,e.updateQueue=null,Ua.current=Sp,t=r(s,a)}while(fn)}if(Ua.current=li,e=Se!==null&&Se.next!==null,Hr=0,Ee=Se=xe=null,oi=!1,e)throw Error(D(300));return t}function cc(){var t=Ln!==0;return Ln=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?xe.memoizedState=Ee=t:Ee=Ee.next=t,Ee}function mt(){if(Se===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=Ee===null?xe.memoizedState:Ee.next;if(e!==null)Ee=e,Se=t;else{if(t===null)throw Error(D(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ee===null?xe.memoizedState=Ee=t:Ee=Ee.next=t}return Ee}function Un(t,e){return typeof e=="function"?e(t):e}function co(t){var e=mt(),r=e.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=t;var s=Se,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Hr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=s):c=c.next=m,xe.lanes|=u,Vr|=u}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,Ct(s,e.memoizedState)||(Qe=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){a=t;do i=a.lane,xe.lanes|=i,Vr|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function uo(t){var e=mt(),r=e.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=t;var s=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Ct(i,e.memoizedState)||(Qe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,s]}function zh(){}function Bh(t,e){var r=xe,s=mt(),a=e(),i=!Ct(s.memoizedState,a);if(i&&(s.memoizedState=a,Qe=!0),s=s.queue,dc(Wh.bind(null,r,s,t),[t]),s.getSnapshot!==e||i||Ee!==null&&Ee.memoizedState.tag&1){if(r.flags|=2048,In(9,Vh.bind(null,r,s,a,e),void 0,null),Te===null)throw Error(D(349));Hr&30||Hh(r,e,a)}return a}function Hh(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Vh(t,e,r,s){e.value=r,e.getSnapshot=s,qh(e)&&Kh(t)}function Wh(t,e,r){return r(function(){qh(e)&&Kh(t)})}function qh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ct(t,r)}catch{return!0}}function Kh(t){var e=Qt(t,1);e!==null&&St(e,t,1,-1)}function Od(t){var e=Pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:t},e.queue=t,t=t.dispatch=Np.bind(null,xe,t),[e.memoizedState,t]}function In(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function Qh(){return mt().memoizedState}function Ia(t,e,r,s){var a=Pt();xe.flags|=t,a.memoizedState=In(1|e,r,void 0,s===void 0?null:s)}function Ti(t,e,r,s){var a=mt();s=s===void 0?null:s;var i=void 0;if(Se!==null){var o=Se.memoizedState;if(i=o.destroy,s!==null&&oc(s,o.deps)){a.memoizedState=In(e,r,i,s);return}}xe.flags|=t,a.memoizedState=In(1|e,r,i,s)}function Dd(t,e){return Ia(8390656,8,t,e)}function dc(t,e){return Ti(2048,8,t,e)}function Gh(t,e){return Ti(4,2,t,e)}function Jh(t,e){return Ti(4,4,t,e)}function Yh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xh(t,e,r){return r=r!=null?r.concat([t]):null,Ti(4,4,Yh.bind(null,e,t),r)}function uc(){}function Zh(t,e){var r=mt();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&oc(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function em(t,e){var r=mt();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&oc(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function tm(t,e,r){return Hr&21?(Ct(r,e)||(r=ih(),xe.lanes|=r,Vr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qe=!0),t.memoizedState=r)}function bp(t,e){var r=se;se=r!==0&&4>r?r:4,t(!0);var s=lo.transition;lo.transition={};try{t(!1),e()}finally{se=r,lo.transition=s}}function rm(){return mt().memoizedState}function jp(t,e,r){var s=gr(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},sm(t))nm(e,r);else if(r=Ih(t,e,r,s),r!==null){var a=He();St(r,t,s,a),am(r,e,s)}}function Np(t,e,r){var s=gr(t),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(sm(t))nm(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Ct(l,o)){var c=e.interleaved;c===null?(a.next=a,rc(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=Ih(t,e,a,s),r!==null&&(a=He(),St(r,t,s,a),am(r,e,s))}}function sm(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function nm(t,e){fn=oi=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function am(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Bl(t,r)}}var li={readContext:ht,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},kp={readContext:ht,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:ht,useEffect:Dd,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ia(4194308,4,Yh.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ia(4,2,t,e)},useMemo:function(t,e){var r=Pt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=Pt();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=jp.bind(null,xe,t),[s.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:Od,useDebugValue:uc,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=Od(!1),e=t[0];return t=bp.bind(null,t[1]),Pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=xe,a=Pt();if(he){if(r===void 0)throw Error(D(407));r=r()}else{if(r=e(),Te===null)throw Error(D(349));Hr&30||Hh(s,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,Dd(Wh.bind(null,s,i,t),[t]),s.flags|=2048,In(9,Vh.bind(null,s,i,r,e),void 0,null),r},useId:function(){var t=Pt(),e=Te.identifierPrefix;if(he){var r=Vt,s=Ht;r=(s&~(1<<32-_t(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ln++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=wp++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_p={readContext:ht,useCallback:Zh,useContext:ht,useEffect:dc,useImperativeHandle:Xh,useInsertionEffect:Gh,useLayoutEffect:Jh,useMemo:em,useReducer:co,useRef:Qh,useState:function(){return co(Un)},useDebugValue:uc,useDeferredValue:function(t){var e=mt();return tm(e,Se.memoizedState,t)},useTransition:function(){var t=co(Un)[0],e=mt().memoizedState;return[t,e]},useMutableSource:zh,useSyncExternalStore:Bh,useId:rm,unstable_isNewReconciler:!1},Sp={readContext:ht,useCallback:Zh,useContext:ht,useEffect:dc,useImperativeHandle:Xh,useInsertionEffect:Gh,useLayoutEffect:Jh,useMemo:em,useReducer:uo,useRef:Qh,useState:function(){return uo(Un)},useDebugValue:uc,useDeferredValue:function(t){var e=mt();return Se===null?e.memoizedState=t:tm(e,Se.memoizedState,t)},useTransition:function(){var t=uo(Un)[0],e=mt().memoizedState;return[t,e]},useMutableSource:zh,useSyncExternalStore:Bh,useId:rm,unstable_isNewReconciler:!1};function bt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function tl(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:ve({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Pi={isMounted:function(t){return(t=t._reactInternals)?Kr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=He(),a=gr(t),i=Wt(s,a);i.payload=e,r!=null&&(i.callback=r),e=fr(t,i,a),e!==null&&(St(e,t,a,s),La(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=He(),a=gr(t),i=Wt(s,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=fr(t,i,a),e!==null&&(St(e,t,a,s),La(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=He(),s=gr(t),a=Wt(r,s);a.tag=2,e!=null&&(a.callback=e),e=fr(t,a,s),e!==null&&(St(e,t,s,r),La(e,t,s))}};function $d(t,e,r,s,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Pn(r,s)||!Pn(a,i):!0}function im(t,e,r){var s=!1,a=yr,i=e.contextType;return typeof i=="object"&&i!==null?i=ht(i):(a=Je(e)?zr:Me.current,s=e.contextTypes,i=(s=s!=null)?Ps(t,a):yr),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pi,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ld(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Pi.enqueueReplaceState(e,e.state,null)}function rl(t,e,r,s){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},sc(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=ht(i):(i=Je(e)?zr:Me.current,a.context=Ps(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(tl(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Pi.enqueueReplaceState(a,a.state,null),ai(t,r,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,e){try{var r="",s=e;do r+=e0(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function ho(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function sl(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Cp=typeof WeakMap=="function"?WeakMap:Map;function om(t,e,r){r=Wt(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){di||(di=!0,ml=s),sl(t,e)},r}function lm(t,e,r){r=Wt(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;r.payload=function(){return s(a)},r.callback=function(){sl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){sl(t,e),typeof s!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Ud(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new Cp;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(r)||(a.add(r),t=zp.bind(null,t,e,r),e.then(t,t))}function Id(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Md(t,e,r,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Wt(-1,1),e.tag=2,fr(r,e,1))),r.lanes|=1),t)}var Ep=Yt.ReactCurrentOwner,Qe=!1;function Be(t,e,r,s){e.child=t===null?Uh(e,null,r,s):Rs(e,t.child,r,s)}function Fd(t,e,r,s,a){r=r.render;var i=e.ref;return _s(e,a),s=lc(t,e,r,s,i,a),r=cc(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Gt(t,e,a)):(he&&r&&Jl(e),e.flags|=1,Be(t,e,s,a),e.child)}function zd(t,e,r,s,a){if(t===null){var i=r.type;return typeof i=="function"&&!yc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,cm(t,e,i,s,a)):(t=Ba(r.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Pn,r(o,s)&&t.ref===e.ref)return Gt(t,e,a)}return e.flags|=1,t=xr(i,s),t.ref=e.ref,t.return=e,e.child=t}function cm(t,e,r,s,a){if(t!==null){var i=t.memoizedProps;if(Pn(i,s)&&t.ref===e.ref)if(Qe=!1,e.pendingProps=s=i,(t.lanes&a)!==0)t.flags&131072&&(Qe=!0);else return e.lanes=t.lanes,Gt(t,e,a)}return nl(t,e,r,s,a)}function dm(t,e,r){var s=e.pendingProps,a=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(ys,Xe),Xe|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(ys,Xe),Xe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,oe(ys,Xe),Xe|=s}else i!==null?(s=i.baseLanes|r,e.memoizedState=null):s=r,oe(ys,Xe),Xe|=s;return Be(t,e,a,r),e.child}function um(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function nl(t,e,r,s,a){var i=Je(r)?zr:Me.current;return i=Ps(e,i),_s(e,a),r=lc(t,e,r,s,i,a),s=cc(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Gt(t,e,a)):(he&&s&&Jl(e),e.flags|=1,Be(t,e,r,a),e.child)}function Bd(t,e,r,s,a){if(Je(r)){var i=!0;ei(e)}else i=!1;if(_s(e,a),e.stateNode===null)Ma(t,e),im(e,r,s),rl(e,r,s,a),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ht(d):(d=Je(r)?zr:Me.current,d=Ps(e,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&Ld(e,o,s,d),rr=!1;var g=e.memoizedState;o.state=g,ai(e,s,o,a),c=e.memoizedState,l!==s||g!==c||Ge.current||rr?(typeof u=="function"&&(tl(e,r,u,s),c=e.memoizedState),(l=rr||$d(e,r,l,s,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Mh(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:bt(e.type,l),o.props=d,m=e.pendingProps,g=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ht(c):(c=Je(r)?zr:Me.current,c=Ps(e,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&Ld(e,o,s,c),rr=!1,g=e.memoizedState,o.state=g,ai(e,s,o,a);var y=e.memoizedState;l!==m||g!==y||Ge.current||rr?(typeof p=="function"&&(tl(e,r,p,s),y=e.memoizedState),(d=rr||$d(e,r,d,s,g,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return al(t,e,r,s,i,a)}function al(t,e,r,s,a,i){um(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return a&&Cd(e,r,!1),Gt(t,e,i);s=e.stateNode,Ep.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Rs(e,t.child,null,i),e.child=Rs(e,null,l,i)):Be(t,e,l,i),e.memoizedState=s.state,a&&Cd(e,r,!0),e.child}function hm(t){var e=t.stateNode;e.pendingContext?Sd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sd(t,e.context,!1),nc(t,e.containerInfo)}function Hd(t,e,r,s,a){return As(),Xl(a),e.flags|=256,Be(t,e,r,s),e.child}var il={dehydrated:null,treeContext:null,retryLane:0};function ol(t){return{baseLanes:t,cachePool:null,transitions:null}}function mm(t,e,r){var s=e.pendingProps,a=pe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),oe(pe,a&1),t===null)return Zo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Oi(o,s,0,null),t=Mr(t,s,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ol(r),e.memoizedState=il,t):hc(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Tp(t,e,o,s,l,a,r);if(i){i=s.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=xr(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=xr(l,i):(i=Mr(i,o,r,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?ol(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=il,s}return i=t.child,t=i.sibling,s=xr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function hc(t,e){return e=Oi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ja(t,e,r,s){return s!==null&&Xl(s),Rs(e,t.child,null,r),t=hc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tp(t,e,r,s,a,i,o){if(r)return e.flags&256?(e.flags&=-257,s=ho(Error(D(422))),ja(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,a=e.mode,s=Oi({mode:"visible",children:s.children},a,0,null),i=Mr(i,a,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Rs(e,t.child,null,o),e.child.memoizedState=ol(o),e.memoizedState=il,i);if(!(e.mode&1))return ja(t,e,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(D(419)),s=ho(i,s,void 0),ja(t,e,o,s)}if(l=(o&t.childLanes)!==0,Qe||l){if(s=Te,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Qt(t,a),St(s,t,a,-1))}return vc(),s=ho(Error(D(421))),ja(t,e,o,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Bp.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Ze=mr(a.nextSibling),et=e,he=!0,kt=null,t!==null&&(at[it++]=Ht,at[it++]=Vt,at[it++]=Br,Ht=t.id,Vt=t.overflow,Br=e),e=hc(e,s.children),e.flags|=4096,e)}function Vd(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),el(t.return,e,r)}function mo(t,e,r,s,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function fm(t,e,r){var s=e.pendingProps,a=s.revealOrder,i=s.tail;if(Be(t,e,s.children,r),s=pe.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vd(t,r,e);else if(t.tag===19)Vd(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(oe(pe,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&ii(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),mo(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&ii(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}mo(e,!0,r,null,i);break;case"together":mo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ma(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,r=xr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=xr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Pp(t,e,r){switch(e.tag){case 3:hm(e),As();break;case 5:Fh(e);break;case 1:Je(e.type)&&ei(e);break;case 4:nc(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;oe(si,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(oe(pe,pe.current&1),e.flags|=128,null):r&e.child.childLanes?mm(t,e,r):(oe(pe,pe.current&1),t=Gt(t,e,r),t!==null?t.sibling:null);oe(pe,pe.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return fm(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),oe(pe,pe.current),s)break;return null;case 22:case 23:return e.lanes=0,dm(t,e,r)}return Gt(t,e,r)}var pm,ll,gm,xm;pm=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ll=function(){};gm=function(t,e,r,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,Ur(Lt.current);var i=null;switch(r){case"input":a=Po(t,a),s=Po(t,s),i=[];break;case"select":a=ve({},a,{value:void 0}),s=ve({},s,{value:void 0}),i=[];break;case"textarea":a=Oo(t,a),s=Oo(t,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Xa)}$o(r,s);var o;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Nn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Nn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ce("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};xm=function(t,e,r,s){r!==s&&(e.flags|=4)};function en(t,e){if(!he)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function Ap(t,e,r){var s=e.pendingProps;switch(Yl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return Je(e.type)&&Za(),Le(e),null;case 3:return s=e.stateNode,Os(),de(Ge),de(Me),ic(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(wa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kt!==null&&(gl(kt),kt=null))),ll(t,e),Le(e),null;case 5:ac(e);var a=Ur($n.current);if(r=e.type,t!==null&&e.stateNode!=null)gm(t,e,r,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(D(166));return Le(e),null}if(t=Ur(Lt.current),wa(e)){s=e.stateNode,r=e.type;var i=e.memoizedProps;switch(s[Rt]=e,s[On]=i,t=(e.mode&1)!==0,r){case"dialog":ce("cancel",s),ce("close",s);break;case"iframe":case"object":case"embed":ce("load",s);break;case"video":case"audio":for(a=0;a<on.length;a++)ce(on[a],s);break;case"source":ce("error",s);break;case"img":case"image":case"link":ce("error",s),ce("load",s);break;case"details":ce("toggle",s);break;case"input":Zc(s,i),ce("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ce("invalid",s);break;case"textarea":td(s,i),ce("invalid",s)}$o(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&ya(s.textContent,l,t),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ya(s.textContent,l,t),a=["children",""+l]):Nn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ce("scroll",s)}switch(r){case"input":ua(s),ed(s,i,!0);break;case"textarea":ua(s),rd(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Xa)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wu(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(r,{is:s.is}):(t=o.createElement(r),r==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,r),t[Rt]=e,t[On]=s,pm(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lo(r,s),r){case"dialog":ce("cancel",t),ce("close",t),a=s;break;case"iframe":case"object":case"embed":ce("load",t),a=s;break;case"video":case"audio":for(a=0;a<on.length;a++)ce(on[a],t);a=s;break;case"source":ce("error",t),a=s;break;case"img":case"image":case"link":ce("error",t),ce("load",t),a=s;break;case"details":ce("toggle",t),a=s;break;case"input":Zc(t,s),a=Po(t,s),ce("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=ve({},s,{value:void 0}),ce("invalid",t);break;case"textarea":td(t,s),a=Oo(t,s),ce("invalid",t);break;default:a=s}$o(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Qu(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qu(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&kn(t,c):typeof c=="number"&&kn(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Nn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ce("scroll",t):c!=null&&Ll(t,i,c,o))}switch(r){case"input":ua(t),ed(t,s,!1);break;case"textarea":ua(t),rd(t);break;case"option":s.value!=null&&t.setAttribute("value",""+vr(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?bs(t,!!s.multiple,i,!1):s.defaultValue!=null&&bs(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Xa)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Le(e),null;case 6:if(t&&e.stateNode!=null)xm(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(D(166));if(r=Ur($n.current),Ur(Lt.current),wa(e)){if(s=e.stateNode,r=e.memoizedProps,s[Rt]=e,(i=s.nodeValue!==r)&&(t=et,t!==null))switch(t.tag){case 3:ya(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ya(s.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Rt]=e,e.stateNode=s}return Le(e),null;case 13:if(de(pe),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(he&&Ze!==null&&e.mode&1&&!(e.flags&128))$h(),As(),e.flags|=98560,i=!1;else if(i=wa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Rt]=e}else As(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),i=!1}else kt!==null&&(gl(kt),kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?Ce===0&&(Ce=3):vc())),e.updateQueue!==null&&(e.flags|=4),Le(e),null);case 4:return Os(),ll(t,e),t===null&&An(e.stateNode.containerInfo),Le(e),null;case 10:return tc(e.type._context),Le(e),null;case 17:return Je(e.type)&&Za(),Le(e),null;case 19:if(de(pe),i=e.memoizedState,i===null)return Le(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)en(i,!1);else{if(Ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ii(t),o!==null){for(e.flags|=128,en(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)i=r,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return oe(pe,pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&we()>$s&&(e.flags|=128,s=!0,en(i,!1),e.lanes=4194304)}else{if(!s)if(t=ii(o),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),en(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!he)return Le(e),null}else 2*we()-i.renderingStartTime>$s&&r!==1073741824&&(e.flags|=128,s=!0,en(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=we(),e.sibling=null,r=pe.current,oe(pe,s?r&1|2:r&1),e):(Le(e),null);case 22:case 23:return xc(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Xe&1073741824&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function Rp(t,e){switch(Yl(e),e.tag){case 1:return Je(e.type)&&Za(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Os(),de(Ge),de(Me),ic(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ac(e),null;case 13:if(de(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));As()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(pe),null;case 4:return Os(),null;case 10:return tc(e.type._context),null;case 22:case 23:return xc(),null;case 24:return null;default:return null}}var Na=!1,Ie=!1,Op=typeof WeakSet=="function"?WeakSet:Set,z=null;function vs(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ye(t,e,s)}else r.current=null}function cl(t,e,r){try{r()}catch(s){ye(t,e,s)}}var Wd=!1;function Dp(t,e){if(qo=Ga,t=jh(),Gl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=t,g=null;t:for(;;){for(var p;m!==r||a!==0&&m.nodeType!==3||(l=o+a),m!==i||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(p=m.firstChild)!==null;)g=m,m=p;for(;;){if(m===t)break t;if(g===r&&++d===a&&(l=o),g===i&&++u===s&&(c=o),(p=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ko={focusedElem:t,selectionRange:r},Ga=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var j=y.memoizedProps,N=y.memoizedState,x=e.stateNode,f=x.getSnapshotBeforeUpdate(e.elementType===e.type?j:bt(e.type,j),N);x.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var h=e.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(v){ye(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return y=Wd,Wd=!1,y}function pn(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&cl(e,r,i)}a=a.next}while(a!==s)}}function Ai(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function dl(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function vm(t){var e=t.alternate;e!==null&&(t.alternate=null,vm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rt],delete e[On],delete e[Jo],delete e[gp],delete e[xp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ym(t){return t.tag===5||t.tag===3||t.tag===4}function qd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ym(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ul(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Xa));else if(s!==4&&(t=t.child,t!==null))for(ul(t,e,r),t=t.sibling;t!==null;)ul(t,e,r),t=t.sibling}function hl(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(hl(t,e,r),t=t.sibling;t!==null;)hl(t,e,r),t=t.sibling}var Ae=null,jt=!1;function Xt(t,e,r){for(r=r.child;r!==null;)wm(t,e,r),r=r.sibling}function wm(t,e,r){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Ni,r)}catch{}switch(r.tag){case 5:Ie||vs(r,e);case 6:var s=Ae,a=jt;Ae=null,Xt(t,e,r),Ae=s,jt=a,Ae!==null&&(jt?(t=Ae,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ae.removeChild(r.stateNode));break;case 18:Ae!==null&&(jt?(t=Ae,r=r.stateNode,t.nodeType===8?ao(t.parentNode,r):t.nodeType===1&&ao(t,r),En(t)):ao(Ae,r.stateNode));break;case 4:s=Ae,a=jt,Ae=r.stateNode.containerInfo,jt=!0,Xt(t,e,r),Ae=s,jt=a;break;case 0:case 11:case 14:case 15:if(!Ie&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cl(r,e,o),a=a.next}while(a!==s)}Xt(t,e,r);break;case 1:if(!Ie&&(vs(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){ye(r,e,l)}Xt(t,e,r);break;case 21:Xt(t,e,r);break;case 22:r.mode&1?(Ie=(s=Ie)||r.memoizedState!==null,Xt(t,e,r),Ie=s):Xt(t,e,r);break;default:Xt(t,e,r)}}function Kd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Op),e.forEach(function(s){var a=Hp.bind(null,t,s);r.has(s)||(r.add(s),s.then(a,a))})}}function yt(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ae=l.stateNode,jt=!1;break e;case 3:Ae=l.stateNode.containerInfo,jt=!0;break e;case 4:Ae=l.stateNode.containerInfo,jt=!0;break e}l=l.return}if(Ae===null)throw Error(D(160));wm(i,o,a),Ae=null,jt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){ye(a,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bm(e,t),e=e.sibling}function bm(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yt(e,t),Tt(t),s&4){try{pn(3,t,t.return),Ai(3,t)}catch(j){ye(t,t.return,j)}try{pn(5,t,t.return)}catch(j){ye(t,t.return,j)}}break;case 1:yt(e,t),Tt(t),s&512&&r!==null&&vs(r,r.return);break;case 5:if(yt(e,t),Tt(t),s&512&&r!==null&&vs(r,r.return),t.flags&32){var a=t.stateNode;try{kn(a,"")}catch(j){ye(t,t.return,j)}}if(s&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Hu(a,i),Lo(l,o);var d=Lo(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?Qu(a,m):u==="dangerouslySetInnerHTML"?qu(a,m):u==="children"?kn(a,m):Ll(a,u,m,d)}switch(l){case"input":Ao(a,i);break;case"textarea":Vu(a,i);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?bs(a,!!i.multiple,p,!1):g!==!!i.multiple&&(i.defaultValue!=null?bs(a,!!i.multiple,i.defaultValue,!0):bs(a,!!i.multiple,i.multiple?[]:"",!1))}a[On]=i}catch(j){ye(t,t.return,j)}}break;case 6:if(yt(e,t),Tt(t),s&4){if(t.stateNode===null)throw Error(D(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(j){ye(t,t.return,j)}}break;case 3:if(yt(e,t),Tt(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{En(e.containerInfo)}catch(j){ye(t,t.return,j)}break;case 4:yt(e,t),Tt(t);break;case 13:yt(e,t),Tt(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(pc=we())),s&4&&Kd(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Ie=(d=Ie)||u,yt(e,t),Ie=d):yt(e,t),Tt(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(z=t,u=t.child;u!==null;){for(m=z=u;z!==null;){switch(g=z,p=g.child,g.tag){case 0:case 11:case 14:case 15:pn(4,g,g.return);break;case 1:vs(g,g.return);var y=g.stateNode;if(typeof y.componentWillUnmount=="function"){s=g,r=g.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(j){ye(s,r,j)}}break;case 5:vs(g,g.return);break;case 22:if(g.memoizedState!==null){Gd(m);continue}}p!==null?(p.return=g,z=p):Gd(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ku("display",o))}catch(j){ye(t,t.return,j)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(j){ye(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:yt(e,t),Tt(t),s&4&&Kd(t);break;case 21:break;default:yt(e,t),Tt(t)}}function Tt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ym(r)){var s=r;break e}r=r.return}throw Error(D(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(kn(a,""),s.flags&=-33);var i=qd(t);hl(t,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=qd(t);ul(t,l,o);break;default:throw Error(D(161))}}catch(c){ye(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $p(t,e,r){z=t,jm(t)}function jm(t,e,r){for(var s=(t.mode&1)!==0;z!==null;){var a=z,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Na;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ie;l=Na;var d=Ie;if(Na=o,(Ie=c)&&!d)for(z=a;z!==null;)o=z,c=o.child,o.tag===22&&o.memoizedState!==null?Jd(a):c!==null?(c.return=o,z=c):Jd(a);for(;i!==null;)z=i,jm(i),i=i.sibling;z=a,Na=l,Ie=d}Qd(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,z=i):Qd(t)}}function Qd(t){for(;z!==null;){var e=z;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ie||Ai(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Ie)if(r===null)s.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:bt(e.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Rd(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Rd(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&En(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ie||e.flags&512&&dl(e)}catch(g){ye(e,e.return,g)}}if(e===t){z=null;break}if(r=e.sibling,r!==null){r.return=e.return,z=r;break}z=e.return}}function Gd(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var r=e.sibling;if(r!==null){r.return=e.return,z=r;break}z=e.return}}function Jd(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ai(4,e)}catch(c){ye(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(c){ye(e,a,c)}}var i=e.return;try{dl(e)}catch(c){ye(e,i,c)}break;case 5:var o=e.return;try{dl(e)}catch(c){ye(e,o,c)}}}catch(c){ye(e,e.return,c)}if(e===t){z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,z=l;break}z=e.return}}var Lp=Math.ceil,ci=Yt.ReactCurrentDispatcher,mc=Yt.ReactCurrentOwner,lt=Yt.ReactCurrentBatchConfig,X=0,Te=null,je=null,Re=0,Xe=0,ys=jr(0),Ce=0,Mn=null,Vr=0,Ri=0,fc=0,gn=null,qe=null,pc=0,$s=1/0,Ft=null,di=!1,ml=null,pr=null,ka=!1,lr=null,ui=0,xn=0,fl=null,Fa=-1,za=0;function He(){return X&6?we():Fa!==-1?Fa:Fa=we()}function gr(t){return t.mode&1?X&2&&Re!==0?Re&-Re:yp.transition!==null?(za===0&&(za=ih()),za):(t=se,t!==0||(t=window.event,t=t===void 0?16:mh(t.type)),t):1}function St(t,e,r,s){if(50<xn)throw xn=0,fl=null,Error(D(185));Qn(t,r,s),(!(X&2)||t!==Te)&&(t===Te&&(!(X&2)&&(Ri|=r),Ce===4&&ar(t,Re)),Ye(t,s),r===1&&X===0&&!(e.mode&1)&&($s=we()+500,Ei&&Nr()))}function Ye(t,e){var r=t.callbackNode;y0(t,e);var s=Qa(t,t===Te?Re:0);if(s===0)r!==null&&ad(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&ad(r),e===1)t.tag===0?vp(Yd.bind(null,t)):Rh(Yd.bind(null,t)),fp(function(){!(X&6)&&Nr()}),r=null;else{switch(oh(s)){case 1:r=zl;break;case 4:r=nh;break;case 16:r=Ka;break;case 536870912:r=ah;break;default:r=Ka}r=Pm(r,Nm.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Nm(t,e){if(Fa=-1,za=0,X&6)throw Error(D(327));var r=t.callbackNode;if(Ss()&&t.callbackNode!==r)return null;var s=Qa(t,t===Te?Re:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=hi(t,s);else{e=s;var a=X;X|=2;var i=_m();(Te!==t||Re!==e)&&(Ft=null,$s=we()+500,Ir(t,e));do try{Mp();break}catch(l){km(t,l)}while(!0);ec(),ci.current=i,X=a,je!==null?e=0:(Te=null,Re=0,e=Ce)}if(e!==0){if(e===2&&(a=zo(t),a!==0&&(s=a,e=pl(t,a))),e===1)throw r=Mn,Ir(t,0),ar(t,s),Ye(t,we()),r;if(e===6)ar(t,s);else{if(a=t.current.alternate,!(s&30)&&!Up(a)&&(e=hi(t,s),e===2&&(i=zo(t),i!==0&&(s=i,e=pl(t,i))),e===1))throw r=Mn,Ir(t,0),ar(t,s),Ye(t,we()),r;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(D(345));case 2:Rr(t,qe,Ft);break;case 3:if(ar(t,s),(s&130023424)===s&&(e=pc+500-we(),10<e)){if(Qa(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){He(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Go(Rr.bind(null,t,qe,Ft),e);break}Rr(t,qe,Ft);break;case 4:if(ar(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var o=31-_t(s);i=1<<o,o=e[o],o>a&&(a=o),s&=~i}if(s=a,s=we()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Lp(s/1960))-s,10<s){t.timeoutHandle=Go(Rr.bind(null,t,qe,Ft),s);break}Rr(t,qe,Ft);break;case 5:Rr(t,qe,Ft);break;default:throw Error(D(329))}}}return Ye(t,we()),t.callbackNode===r?Nm.bind(null,t):null}function pl(t,e){var r=gn;return t.current.memoizedState.isDehydrated&&(Ir(t,e).flags|=256),t=hi(t,e),t!==2&&(e=qe,qe=r,e!==null&&gl(e)),t}function gl(t){qe===null?qe=t:qe.push.apply(qe,t)}function Up(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Ct(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ar(t,e){for(e&=~fc,e&=~Ri,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-_t(e),s=1<<r;t[r]=-1,e&=~s}}function Yd(t){if(X&6)throw Error(D(327));Ss();var e=Qa(t,0);if(!(e&1))return Ye(t,we()),null;var r=hi(t,e);if(t.tag!==0&&r===2){var s=zo(t);s!==0&&(e=s,r=pl(t,s))}if(r===1)throw r=Mn,Ir(t,0),ar(t,e),Ye(t,we()),r;if(r===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rr(t,qe,Ft),Ye(t,we()),null}function gc(t,e){var r=X;X|=1;try{return t(e)}finally{X=r,X===0&&($s=we()+500,Ei&&Nr())}}function Wr(t){lr!==null&&lr.tag===0&&!(X&6)&&Ss();var e=X;X|=1;var r=lt.transition,s=se;try{if(lt.transition=null,se=1,t)return t()}finally{se=s,lt.transition=r,X=e,!(X&6)&&Nr()}}function xc(){Xe=ys.current,de(ys)}function Ir(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,mp(r)),je!==null)for(r=je.return;r!==null;){var s=r;switch(Yl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Za();break;case 3:Os(),de(Ge),de(Me),ic();break;case 5:ac(s);break;case 4:Os();break;case 13:de(pe);break;case 19:de(pe);break;case 10:tc(s.type._context);break;case 22:case 23:xc()}r=r.return}if(Te=t,je=t=xr(t.current,null),Re=Xe=e,Ce=0,Mn=null,fc=Ri=Vr=0,qe=gn=null,Lr!==null){for(e=0;e<Lr.length;e++)if(r=Lr[e],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}Lr=null}return t}function km(t,e){do{var r=je;try{if(ec(),Ua.current=li,oi){for(var s=xe.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}oi=!1}if(Hr=0,Ee=Se=xe=null,fn=!1,Ln=0,mc.current=null,r===null||r.return===null){Ce=1,Mn=e,je=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=Re,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Id(o);if(p!==null){p.flags&=-257,Md(p,o,l,i,e),p.mode&1&&Ud(i,d,e),e=p,c=d;var y=e.updateQueue;if(y===null){var j=new Set;j.add(c),e.updateQueue=j}else y.add(c);break e}else{if(!(e&1)){Ud(i,d,e),vc();break e}c=Error(D(426))}}else if(he&&l.mode&1){var N=Id(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Md(N,o,l,i,e),Xl(Ds(c,l));break e}}i=c=Ds(c,l),Ce!==4&&(Ce=2),gn===null?gn=[i]:gn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=om(i,c,e);Ad(i,x);break e;case 1:l=c;var f=i.type,h=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(pr===null||!pr.has(h)))){i.flags|=65536,e&=-e,i.lanes|=e;var v=lm(i,l,e);Ad(i,v);break e}}i=i.return}while(i!==null)}Cm(r)}catch(b){e=b,je===r&&r!==null&&(je=r=r.return);continue}break}while(!0)}function _m(){var t=ci.current;return ci.current=li,t===null?li:t}function vc(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Te===null||!(Vr&268435455)&&!(Ri&268435455)||ar(Te,Re)}function hi(t,e){var r=X;X|=2;var s=_m();(Te!==t||Re!==e)&&(Ft=null,Ir(t,e));do try{Ip();break}catch(a){km(t,a)}while(!0);if(ec(),X=r,ci.current=s,je!==null)throw Error(D(261));return Te=null,Re=0,Ce}function Ip(){for(;je!==null;)Sm(je)}function Mp(){for(;je!==null&&!d0();)Sm(je)}function Sm(t){var e=Tm(t.alternate,t,Xe);t.memoizedProps=t.pendingProps,e===null?Cm(t):je=e,mc.current=null}function Cm(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Rp(r,e),r!==null){r.flags&=32767,je=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ce=6,je=null;return}}else if(r=Ap(r,e,Xe),r!==null){je=r;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Ce===0&&(Ce=5)}function Rr(t,e,r){var s=se,a=lt.transition;try{lt.transition=null,se=1,Fp(t,e,r,s)}finally{lt.transition=a,se=s}return null}function Fp(t,e,r,s){do Ss();while(lr!==null);if(X&6)throw Error(D(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(w0(t,i),t===Te&&(je=Te=null,Re=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ka||(ka=!0,Pm(Ka,function(){return Ss(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var o=se;se=1;var l=X;X|=4,mc.current=null,Dp(t,r),bm(r,t),ip(Ko),Ga=!!qo,Ko=qo=null,t.current=r,$p(r),u0(),X=l,se=o,lt.transition=i}else t.current=r;if(ka&&(ka=!1,lr=t,ui=a),i=t.pendingLanes,i===0&&(pr=null),f0(r.stateNode),Ye(t,we()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(di)throw di=!1,t=ml,ml=null,t;return ui&1&&t.tag!==0&&Ss(),i=t.pendingLanes,i&1?t===fl?xn++:(xn=0,fl=t):xn=0,Nr(),null}function Ss(){if(lr!==null){var t=oh(ui),e=lt.transition,r=se;try{if(lt.transition=null,se=16>t?16:t,lr===null)var s=!1;else{if(t=lr,lr=null,ui=0,X&6)throw Error(D(331));var a=X;for(X|=4,z=t.current;z!==null;){var i=z,o=i.child;if(z.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(z=d;z!==null;){var u=z;switch(u.tag){case 0:case 11:case 15:pn(8,u,i)}var m=u.child;if(m!==null)m.return=u,z=m;else for(;z!==null;){u=z;var g=u.sibling,p=u.return;if(vm(u),u===d){z=null;break}if(g!==null){g.return=p,z=g;break}z=p}}}var y=i.alternate;if(y!==null){var j=y.child;if(j!==null){y.child=null;do{var N=j.sibling;j.sibling=null,j=N}while(j!==null)}}z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,z=o;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pn(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,z=x;break e}z=i.return}}var f=t.current;for(z=f;z!==null;){o=z;var h=o.child;if(o.subtreeFlags&2064&&h!==null)h.return=o,z=h;else e:for(o=f;z!==null;){if(l=z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ai(9,l)}}catch(b){ye(l,l.return,b)}if(l===o){z=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,z=v;break e}z=l.return}}if(X=a,Nr(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Ni,t)}catch{}s=!0}return s}finally{se=r,lt.transition=e}}return!1}function Xd(t,e,r){e=Ds(r,e),e=om(t,e,1),t=fr(t,e,1),e=He(),t!==null&&(Qn(t,1,e),Ye(t,e))}function ye(t,e,r){if(t.tag===3)Xd(t,t,r);else for(;e!==null;){if(e.tag===3){Xd(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(pr===null||!pr.has(s))){t=Ds(r,t),t=lm(e,t,1),e=fr(e,t,1),t=He(),e!==null&&(Qn(e,1,t),Ye(e,t));break}}e=e.return}}function zp(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=He(),t.pingedLanes|=t.suspendedLanes&r,Te===t&&(Re&r)===r&&(Ce===4||Ce===3&&(Re&130023424)===Re&&500>we()-pc?Ir(t,0):fc|=r),Ye(t,e)}function Em(t,e){e===0&&(t.mode&1?(e=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):e=1);var r=He();t=Qt(t,e),t!==null&&(Qn(t,e,r),Ye(t,r))}function Bp(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Em(t,r)}function Hp(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(D(314))}s!==null&&s.delete(e),Em(t,r)}var Tm;Tm=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ge.current)Qe=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Qe=!1,Pp(t,e,r);Qe=!!(t.flags&131072)}else Qe=!1,he&&e.flags&1048576&&Oh(e,ri,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ma(t,e),t=e.pendingProps;var a=Ps(e,Me.current);_s(e,r),a=lc(null,e,s,t,a,r);var i=cc();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Je(s)?(i=!0,ei(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,sc(e),a.updater=Pi,e.stateNode=a,a._reactInternals=e,rl(e,s,t,r),e=al(null,e,s,!0,i,r)):(e.tag=0,he&&i&&Jl(e),Be(null,e,a,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Ma(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=Wp(s),t=bt(s,t),a){case 0:e=nl(null,e,s,t,r);break e;case 1:e=Bd(null,e,s,t,r);break e;case 11:e=Fd(null,e,s,t,r);break e;case 14:e=zd(null,e,s,bt(s.type,t),r);break e}throw Error(D(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:bt(s,a),nl(t,e,s,a,r);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:bt(s,a),Bd(t,e,s,a,r);case 3:e:{if(hm(e),t===null)throw Error(D(387));s=e.pendingProps,i=e.memoizedState,a=i.element,Mh(t,e),ai(e,s,null,r);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=Ds(Error(D(423)),e),e=Hd(t,e,s,r,a);break e}else if(s!==a){a=Ds(Error(D(424)),e),e=Hd(t,e,s,r,a);break e}else for(Ze=mr(e.stateNode.containerInfo.firstChild),et=e,he=!0,kt=null,r=Uh(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(As(),s===a){e=Gt(t,e,r);break e}Be(t,e,s,r)}e=e.child}return e;case 5:return Fh(e),t===null&&Zo(e),s=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,Qo(s,a)?o=null:i!==null&&Qo(s,i)&&(e.flags|=32),um(t,e),Be(t,e,o,r),e.child;case 6:return t===null&&Zo(e),null;case 13:return mm(t,e,r);case 4:return nc(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Rs(e,null,s,r):Be(t,e,s,r),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:bt(s,a),Fd(t,e,s,a,r);case 7:return Be(t,e,e.pendingProps,r),e.child;case 8:return Be(t,e,e.pendingProps.children,r),e.child;case 12:return Be(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,oe(si,s._currentValue),s._currentValue=o,i!==null)if(Ct(i.value,o)){if(i.children===a.children&&!Ge.current){e=Gt(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Wt(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),el(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),el(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Be(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,_s(e,r),a=ht(a),s=s(a),e.flags|=1,Be(t,e,s,r),e.child;case 14:return s=e.type,a=bt(s,e.pendingProps),a=bt(s.type,a),zd(t,e,s,a,r);case 15:return cm(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:bt(s,a),Ma(t,e),e.tag=1,Je(s)?(t=!0,ei(e)):t=!1,_s(e,r),im(e,s,a),rl(e,s,a,r),al(null,e,s,!0,t,r);case 19:return fm(t,e,r);case 22:return dm(t,e,r)}throw Error(D(156,e.tag))};function Pm(t,e){return sh(t,e)}function Vp(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,r,s){return new Vp(t,e,r,s)}function yc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wp(t){if(typeof t=="function")return yc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Il)return 11;if(t===Ml)return 14}return 2}function xr(t,e){var r=t.alternate;return r===null?(r=ot(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ba(t,e,r,s,a,i){var o=2;if(s=t,typeof t=="function")yc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cs:return Mr(r.children,a,i,e);case Ul:o=8,a|=8;break;case So:return t=ot(12,r,e,a|2),t.elementType=So,t.lanes=i,t;case Co:return t=ot(13,r,e,a),t.elementType=Co,t.lanes=i,t;case Eo:return t=ot(19,r,e,a),t.elementType=Eo,t.lanes=i,t;case Fu:return Oi(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Iu:o=10;break e;case Mu:o=9;break e;case Il:o=11;break e;case Ml:o=14;break e;case tr:o=16,s=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=ot(o,r,e,a),e.elementType=t,e.type=s,e.lanes=i,e}function Mr(t,e,r,s){return t=ot(7,t,s,e),t.lanes=r,t}function Oi(t,e,r,s){return t=ot(22,t,s,e),t.elementType=Fu,t.lanes=r,t.stateNode={isHidden:!1},t}function fo(t,e,r){return t=ot(6,t,null,e),t.lanes=r,t}function po(t,e,r){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qp(t,e,r,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qi(0),this.expirationTimes=Qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function wc(t,e,r,s,a,i,o,l,c){return t=new qp(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ot(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},sc(i),t}function Kp(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function Am(t){if(!t)return yr;t=t._reactInternals;e:{if(Kr(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Je(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var r=t.type;if(Je(r))return Ah(t,r,e)}return e}function Rm(t,e,r,s,a,i,o,l,c){return t=wc(r,s,!0,t,a,i,o,l,c),t.context=Am(null),r=t.current,s=He(),a=gr(r),i=Wt(s,a),i.callback=e??null,fr(r,i,a),t.current.lanes=a,Qn(t,a,s),Ye(t,s),t}function Di(t,e,r,s){var a=e.current,i=He(),o=gr(a);return r=Am(r),e.context===null?e.context=r:e.pendingContext=r,e=Wt(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=fr(a,e,o),t!==null&&(St(t,a,o,i),La(t,a,o)),o}function mi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function bc(t,e){Zd(t,e),(t=t.alternate)&&Zd(t,e)}function Qp(){return null}var Om=typeof reportError=="function"?reportError:function(t){console.error(t)};function jc(t){this._internalRoot=t}$i.prototype.render=jc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));Di(t,e,null,null)};$i.prototype.unmount=jc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wr(function(){Di(null,t,null,null)}),e[Kt]=null}};function $i(t){this._internalRoot=t}$i.prototype.unstable_scheduleHydration=function(t){if(t){var e=dh();t={blockedOn:null,target:t,priority:e};for(var r=0;r<nr.length&&e!==0&&e<nr[r].priority;r++);nr.splice(r,0,t),r===0&&hh(t)}};function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Li(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eu(){}function Gp(t,e,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=mi(o);i.call(d)}}var o=Rm(e,s,t,0,null,!1,!1,"",eu);return t._reactRootContainer=o,t[Kt]=o.current,An(t.nodeType===8?t.parentNode:t),Wr(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=mi(c);l.call(d)}}var c=wc(t,0,!1,null,null,!1,!1,"",eu);return t._reactRootContainer=c,t[Kt]=c.current,An(t.nodeType===8?t.parentNode:t),Wr(function(){Di(e,c,r,s)}),c}function Ui(t,e,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=mi(o);l.call(c)}}Di(e,o,t,a)}else o=Gp(r,e,t,a,s);return mi(o)}lh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=an(e.pendingLanes);r!==0&&(Bl(e,r|1),Ye(e,we()),!(X&6)&&($s=we()+500,Nr()))}break;case 13:Wr(function(){var s=Qt(t,1);if(s!==null){var a=He();St(s,t,1,a)}}),bc(t,1)}};Hl=function(t){if(t.tag===13){var e=Qt(t,134217728);if(e!==null){var r=He();St(e,t,134217728,r)}bc(t,134217728)}};ch=function(t){if(t.tag===13){var e=gr(t),r=Qt(t,e);if(r!==null){var s=He();St(r,t,e,s)}bc(t,e)}};dh=function(){return se};uh=function(t,e){var r=se;try{return se=t,e()}finally{se=r}};Io=function(t,e,r){switch(e){case"input":if(Ao(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var a=Ci(s);if(!a)throw Error(D(90));Bu(s),Ao(s,a)}}}break;case"textarea":Vu(t,r);break;case"select":e=r.value,e!=null&&bs(t,!!r.multiple,e,!1)}};Yu=gc;Xu=Wr;var Jp={usingClientEntryPoint:!1,Events:[Jn,ms,Ci,Gu,Ju,gc]},tn={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yp={bundleType:tn.bundleType,version:tn.version,rendererPackageName:tn.rendererPackageName,rendererConfig:tn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=th(t),t===null?null:t.stateNode},findFiberByHostInstance:tn.findFiberByHostInstance||Qp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_a.isDisabled&&_a.supportsFiber)try{Ni=_a.inject(Yp),$t=_a}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jp;rt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(e))throw Error(D(200));return Kp(t,e,null,r)};rt.createRoot=function(t,e){if(!Nc(t))throw Error(D(299));var r=!1,s="",a=Om;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=wc(t,1,!1,null,null,r,!1,s,a),t[Kt]=e.current,An(t.nodeType===8?t.parentNode:t),new jc(e)};rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=th(e),t=t===null?null:t.stateNode,t};rt.flushSync=function(t){return Wr(t)};rt.hydrate=function(t,e,r){if(!Li(e))throw Error(D(200));return Ui(null,t,e,!0,r)};rt.hydrateRoot=function(t,e,r){if(!Nc(t))throw Error(D(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=Om;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Rm(e,null,t,1,r??null,a,!1,i,o),t[Kt]=e.current,An(t),s)for(t=0;t<s.length;t++)r=s[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new $i(e)};rt.render=function(t,e,r){if(!Li(e))throw Error(D(200));return Ui(null,t,e,!1,r)};rt.unmountComponentAtNode=function(t){if(!Li(t))throw Error(D(40));return t._reactRootContainer?(Wr(function(){Ui(null,null,t,!1,function(){t._reactRootContainer=null,t[Kt]=null})}),!0):!1};rt.unstable_batchedUpdates=gc;rt.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Li(r))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return Ui(t,e,r,!1,s)};rt.version="18.3.1-next-f1338f8080-20240426";function Dm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dm)}catch(t){console.error(t)}}Dm(),Du.exports=rt;var Xp=Du.exports,$m,tu=Xp;$m=tu.createRoot,tu.hydrateRoot;const ge=[{id:"1",name:"Operations",color:"#10B981",description:"Day-to-day business operations",slaHours:24,issueCategories:[{name:"TID live but stuck or delayed",slaHours:24,poc:"",poc2:""},{name:"Missing Items",slaHours:24,poc:"",poc2:""},{name:"Order Lost by courier",slaHours:48,poc:"",poc2:""},{name:"Order stuck in customs",slaHours:48,poc:"",poc2:""},{name:"Redelivery",slaHours:48,poc:"",poc2:""},{name:"Damage in transit",slaHours:48,poc:"",poc2:""},{name:"Order swap",slaHours:48,poc:"",poc2:""},{name:"Row seller issues",slaHours:24,poc:"",poc2:""},{name:"QC isssues",slaHours:24,poc:"",poc2:""},{name:"Fulfillment",slaHours:24,poc:"",poc2:""},{name:"QC HOLD- pictures required",slaHours:24,poc:"",poc2:""},{name:"QC HOLD- replacements available but sheet not updated",slaHours:24,poc:"",poc2:""},{name:"QC HOLD- clarity for hold reason",slaHours:24,poc:"",poc2:""},{name:"QC HOLD- replacement ready for pickup",slaHours:24,poc:"",poc2:""},{name:"QC HOLD- rtv",slaHours:24,poc:"",poc2:""}]},{id:"2",name:"Supply",color:"#F59E0B",description:"Supply chain and logistics",slaHours:24,issueCategories:[{name:"Row seller issues",slaHours:24,poc:"",poc2:""},{name:"QC isssues",slaHours:24,poc:"",poc2:""},{name:"Fulfillment",slaHours:24,poc:"",poc2:""},{name:"PQ- incorrect sizes",slaHours:48,poc:"",poc2:""},{name:"PQ- authenticity",slaHours:48,poc:"",poc2:""},{name:"PQ- grading",slaHours:48,poc:"",poc2:""},{name:"PQ- items donot match description",slaHours:48,poc:"",poc2:""},{name:"QC HOLD- Seller not responding",slaHours:24,poc:"",poc2:""},{name:"QC HOLD- Replacements not sent by the seller",slaHours:24,poc:"",poc2:""}]},{id:"3",name:"Engineers",color:"#8B5CF6",description:"Engineering and technical support",slaHours:24,issueCategories:[{name:"Tech related issues",slaHours:24,poc:"",poc2:""}]},{id:"4",name:"CX",color:"#6B7280",description:"Customer experience and support",slaHours:12,issueCategories:[{name:"Cancellation",slaHours:12,poc:"",poc2:""},{name:"Discount vouchers",slaHours:12,poc:"",poc2:""}]},{id:"5",name:"Finance",color:"#3B82F6",description:"Financial operations and accounting",slaHours:24,issueCategories:[{name:"Refunds not processsed",slaHours:24,poc:"",poc2:""},{name:"Invoices from credit partner",slaHours:24,poc:"",poc2:""},{name:"Bank transfer",slaHours:24,poc:"",poc2:""},{name:"Refund approval",slaHours:24,poc:"",poc2:""}]},{id:"6",name:"Growth",color:"#EF4444",description:"Marketing and growth initiatives",slaHours:24,issueCategories:[{name:"Affiliate buyer  issues",slaHours:24,poc:"",poc2:""},{name:"PQ- authenticity",slaHours:48,poc:"",poc2:""}]},{id:"7",name:"Seller Support",color:"#DC2626",description:"Seller support and relationship management",slaHours:24,issueCategories:[{name:"QC HOLD- Seller not responding",slaHours:24,poc:"",poc2:""}]}],Zp="modulepreload",eg=function(t){return"/"+t},ru={},Xn=function(e,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=eg(c),c in ru)return;ru[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Zp,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,p)=>{m.addEventListener("load",g),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},tg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Xn(async()=>{const{default:s}=await Promise.resolve().then(()=>zs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class kc extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class rg extends kc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class su extends kc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class nu extends kc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(xl||(xl={}));var sg=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class ng{constructor(e,{headers:r={},customFetch:s,region:a=xl.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=tg(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return sg(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const m=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(j=>{throw new rg(j)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new su(m);if(!m.ok)throw new nu(m);let p=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield m.json():p==="application/octet-stream"?y=yield m.blob():p==="text/event-stream"?y=m:p==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof nu||a instanceof su?a.context:void 0}}})}}var Ke={},_c={},Ii={},Zn={},Mi={},Fi={},ag=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ls=ag();const ig=Ls.fetch,Lm=Ls.fetch.bind(Ls),Um=Ls.Headers,og=Ls.Request,lg=Ls.Response,zs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Um,Request:og,Response:lg,default:Lm,fetch:ig},Symbol.toStringTag,{value:"Module"})),cg=_f(zs);var zi={};Object.defineProperty(zi,"__esModule",{value:!0});let dg=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};zi.default=dg;var Im=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fi,"__esModule",{value:!0});const ug=Im(cg),hg=Im(zi);let mg=class{constructor(e){var r,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ug.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,m=null,g=null,p=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const f=await i.text();f===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?m=f:m=JSON.parse(f))}const N=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");N&&x&&x.length>1&&(g=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(u={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,p=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const N=await i.text();try{u=JSON.parse(N),Array.isArray(u)&&i.status===404&&(m=[],u=null,p=200,y="OK")}catch{i.status===404&&N===""?(p=204,y="No Content"):u={message:N}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,p=200,y="OK"),u&&this.shouldThrowOnError)throw new hg.default(u)}return{error:u,data:m,count:g,status:p,statusText:y}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};Fi.default=mg;var fg=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mi,"__esModule",{value:!0});const pg=fg(Fi);let gg=class extends pg.default{select(e){let r=!1;const s=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Mi.default=gg;var xg=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zn,"__esModule",{value:!0});const vg=xg(Mi);let yg=class extends vg.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};Zn.default=yg;var wg=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ii,"__esModule",{value:!0});const rn=wg(Zn);let bg=class{constructor(e,{headers:r={},schema:s,fetch:a}){this.url=e,this.headers=new Headers(r),this.schema=s,this.fetch=a}select(e,{head:r=!1,count:s}={}){const a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new rn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:s=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new rn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new rn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var s;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new rn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var r;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new rn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ii.default=bg;var Mm=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_c,"__esModule",{value:!0});const jg=Mm(Ii),Ng=Mm(Zn);let kg=class Fm{constructor(e,{headers:r={},schema:s,fetch:a}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new jg.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Fm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;s||a?(l=s?"HEAD":"GET",Object.entries(r).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{c.searchParams.append(m,g)})):(l="POST",d=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new Ng.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};_c.default=kg;var Bs=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.PostgrestError=Ke.PostgrestBuilder=Ke.PostgrestTransformBuilder=Ke.PostgrestFilterBuilder=Ke.PostgrestQueryBuilder=Ke.PostgrestClient=void 0;const zm=Bs(_c);Ke.PostgrestClient=zm.default;const Bm=Bs(Ii);Ke.PostgrestQueryBuilder=Bm.default;const Hm=Bs(Zn);Ke.PostgrestFilterBuilder=Hm.default;const Vm=Bs(Mi);Ke.PostgrestTransformBuilder=Vm.default;const Wm=Bs(Fi);Ke.PostgrestBuilder=Wm.default;const qm=Bs(zi);Ke.PostgrestError=qm.default;var _g=Ke.default={PostgrestClient:zm.default,PostgrestQueryBuilder:Bm.default,PostgrestFilterBuilder:Hm.default,PostgrestTransformBuilder:Vm.default,PostgrestBuilder:Wm.default,PostgrestError:qm.default};const{PostgrestClient:Sg,PostgrestQueryBuilder:_y,PostgrestFilterBuilder:Sy,PostgrestTransformBuilder:Cy,PostgrestBuilder:Ey,PostgrestError:Ty}=_g;class Cg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Eg="2.15.5",Tg=`realtime-js/${Eg}`,Pg="1.0.0",vl=1e4,Ag=1e3,Rg=100;var vn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(vn||(vn={}));var ke;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ke||(ke={}));var Nt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Nt||(Nt={}));var yl;(function(t){t.websocket="websocket"})(yl||(yl={}));var Dr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Dr||(Dr={}));class Og{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+a));o=o+a;const c=s.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}let Km=class{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ie;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ie||(ie={}));const au=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Dg(o,t,e,a),i),{})},Dg=(t,e,r,s)=>{const a=e.find(l=>l.name===t),i=a==null?void 0:a.type,o=r[t];return i&&!s.includes(i)?Qm(i,o):wl(o)},Qm=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Ig(e,r)}switch(t){case ie.bool:return $g(e);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return Lg(e);case ie.json:case ie.jsonb:return Ug(e);case ie.timestamp:return Mg(e);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return wl(e);default:return wl(e)}},wl=t=>t,$g=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Lg=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ug=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Ig=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Qm(e,l))}return t},Mg=t=>typeof t=="string"?t.replace(" ","T"):t,Gm=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class go{constructor(e,r,s={},a=vl){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var iu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(iu||(iu={}));class yn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yn.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=yn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=yn.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const m=i[d];if(m){const g=u.map(N=>N.presence_ref),p=m.map(N=>N.presence_ref),y=u.filter(N=>p.indexOf(N.presence_ref)<0),j=m.filter(N=>g.indexOf(N.presence_ref)<0);y.length>0&&(l[d]=y),j.length>0&&(c[d]=j)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(e,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const m=e[l].map(p=>p.presence_ref),g=u.filter(p=>m.indexOf(p.presence_ref)<0);e[l].unshift(...g)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ou;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ou||(ou={}));var wn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wn||(wn={}));var zt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(zt||(zt={}));class Sc{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new go(this,Nt.join,this.params,this.timeout),this.rejoinTimer=new Km(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new yn(this),this.broadcastEndpointURL=Gm(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ke.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[wn.PRESENCE]&&this.bindings[wn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},g={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(zt.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(zt.CLOSED)),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket.setAuth(),p===void 0){e==null||e(zt.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,N=(y=j==null?void 0:j.length)!==null&&y!==void 0?y:0,x=[];for(let f=0;f<N;f++){const h=j[f],{filter:{event:v,schema:b,table:w,filter:_}}=h,R=p&&p[f];if(R&&R.event===v&&R.schema===b&&R.table===w&&R.filter===_)x.push(Object.assign(Object.assign({},h),{id:R.id}));else{this.unsubscribe(),this.state=ke.errored,e==null||e(zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(zt.SUBSCRIBED);return}}).receive("error",p=>{this.state=ke.errored,e==null||e(zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===ke.joined&&e===wn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ke.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new go(this,Nt.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ke.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new go(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Rg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Nt;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let g=this._onMessage(o,r,s);if(r&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var y,j,N;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((N=(j=p.filter)===null||j===void 0?void 0:j.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(p=>p.callback(g,s)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,j,N,x,f,h;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const v=p.id,b=(y=p.filter)===null||y===void 0?void 0:y.event;return v&&((j=r.ids)===null||j===void 0?void 0:j.includes(v))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const v=(f=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return v==="*"||v===((h=r==null?void 0:r.event)===null||h===void 0?void 0:h.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof g=="object"&&"ids"in g){const y=g.data,{schema:j,table:N,commit_timestamp:x,type:f,errors:h}=y;g=Object.assign(Object.assign({},{schema:j,table:N,commit_timestamp:x,eventType:f,new:{},old:{},errors:h}),this._getPayloadRecords(y))}p.callback(g,s)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Sc.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nt.close,{},e)}_onError(e){this._on(Nt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=au(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=au(e.columns,e.old_record)),r}}const xo=()=>{},Sa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fg=[1e3,2e3,5e3,1e4],zg=1e4,Bg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hg{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vl,this.transport=null,this.heartbeatIntervalMs=Sa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xo,this.ref=0,this.reconnectTimer=null,this.logger=xo,this.conn=null,this.sendBuffer=[],this.serializer=new Og,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Xn(async()=>{const{default:l}=await Promise.resolve().then(()=>zs);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${yl.websocket}`,this.httpEndpoint=Gm(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Cg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pg}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case vn.connecting:return Dr.Connecting;case vn.open:return Dr.Open;case vn.closing:return Dr.Closing;default:return Dr.Closed}}isConnected(){return this.connectionState()===Dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new Sc(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:s,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ag,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Sa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([Bg],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:Tg};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Nt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Km(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Sa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,i,o,l,c,d,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:vl,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Sa.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:xo,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>Fg[m-1]||zg,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(m,g)=>g(JSON.stringify(m)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Cc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _e(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Vg extends Cc{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bl extends Cc{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Wg=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const Jm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Xn(async()=>{const{default:s}=await Promise.resolve().then(()=>zs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},qg=()=>Wg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xn(()=>Promise.resolve().then(()=>zs),void 0)).Response:Response}),jl=t=>{if(Array.isArray(t))return t.map(r=>jl(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=jl(s)}),e},Kg=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Qr=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const vo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qg=(t,e,r)=>Qr(void 0,void 0,void 0,function*(){const s=yield qg();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const i=t.status||500,o=(a==null?void 0:a.statusCode)||i+"";e(new Vg(vo(a),i,o))}).catch(a=>{e(new bl(vo(a),a))}):e(new bl(vo(t),t))}),Gg=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(Kg(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function ea(t,e,r,s,a,i){return Qr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,Gg(e,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Qg(c,l,s))})})}function fi(t,e,r,s){return Qr(this,void 0,void 0,function*(){return ea(t,"GET",e,r,s)})}function At(t,e,r,s,a){return Qr(this,void 0,void 0,function*(){return ea(t,"POST",e,s,a,r)})}function Nl(t,e,r,s,a){return Qr(this,void 0,void 0,function*(){return ea(t,"PUT",e,s,a,r)})}function Jg(t,e,r,s){return Qr(this,void 0,void 0,function*(){return ea(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Ym(t,e,r,s,a){return Qr(this,void 0,void 0,function*(){return ea(t,"DELETE",e,s,a,r)})}var ze=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const Yg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xg{constructor(e,r={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=Jm(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,a){return ze(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},lu),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),m=yield(e=="PUT"?Nl:At)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_e(i))return{data:null,error:i};throw i}})}upload(e,r,s){return ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return ze(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:lu.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield Nl(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(_e(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield At(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Cc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_e(s))return{data:null,error:s};throw s}})}update(e,r,s){return ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return ze(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_e(a))return{data:null,error:a};throw a}})}copy(e,r,s){return ze(this,void 0,void 0,function*(){try{return{data:{path:(yield At(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_e(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return ze(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield At(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_e(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return ze(this,void 0,void 0,function*(){try{const a=yield At(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_e(a))return{data:null,error:a};throw a}})}download(e,r){return ze(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield fi(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(_e(l))return{data:null,error:l};throw l}})}info(e){return ze(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield fi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:jl(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_e(s))return{data:null,error:s};throw s}})}exists(e){return ze(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Jg(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_e(s)&&s instanceof bl){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return ze(this,void 0,void 0,function*(){try{return{data:yield Ym(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_e(r))return{data:null,error:r};throw r}})}list(e,r,s){return ze(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Yg),r),{prefix:e||""});return{data:yield At(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_e(a))return{data:null,error:a};throw a}})}listV2(e,r){return ze(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield At(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_e(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Zg="2.12.1",ex={"X-Client-Info":`storage-js/${Zg}`};var ts=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class tx{constructor(e,r={},s,a){this.shouldThrowOnError=!1;const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ex),r),this.fetch=Jm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ts(this,void 0,void 0,function*(){try{return{data:yield fi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_e(e))return{data:null,error:e};throw e}})}getBucket(e){return ts(this,void 0,void 0,function*(){try{return{data:yield fi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_e(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return ts(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_e(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return ts(this,void 0,void 0,function*(){try{return{data:yield Nl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_e(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ts(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_e(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ts(this,void 0,void 0,function*(){try{return{data:yield Ym(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_e(r))return{data:null,error:r};throw r}})}}class rx extends tx{constructor(e,r={},s,a){super(e,r,s,a)}from(e){return new Xg(this.url,this.headers,e,this.fetch)}}const sx="2.57.4";let ln="";typeof Deno<"u"?ln="deno":typeof document<"u"?ln="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ln="react-native":ln="node";const nx={"X-Client-Info":`supabase-js-${ln}/${sx}`},ax={headers:nx},ix={schema:"public"},ox={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lx={};var cx=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const dx=t=>{let e;return t?e=t:typeof fetch>"u"?e=Lm:e=fetch,(...r)=>e(...r)},ux=()=>typeof Headers>"u"?Um:Headers,hx=(t,e,r)=>{const s=dx(r),a=ux();return(i,o)=>cx(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:d}))})};var mx=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};function fx(t){return t.endsWith("/")?t:t+"/"}function px(t,e){var r,s;const{db:a,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:m}=e,g={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>mx(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}function gx(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fx(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Xm="2.71.1",is=30*1e3,kl=3,yo=kl*is,xx="http://localhost:9999",vx="supabase.auth.token",yx={"X-Client-Info":`gotrue-js/${Xm}`},_l="X-Supabase-Api-Version",Zm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bx=10*60*1e3;class Ec extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function V(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class jx extends Ec{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Nx(t){return V(t)&&t.name==="AuthApiError"}class ef extends Ec{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class kr extends Ec{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}}class er extends kr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kx(t){return V(t)&&t.name==="AuthSessionMissingError"}class Ca extends kr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ea extends kr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ta extends kr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _x(t){return V(t)&&t.name==="AuthImplicitGrantRedirectError"}class cu extends kr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sl extends kr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function wo(t){return V(t)&&t.name==="AuthRetryableFetchError"}class du extends kr{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Cl extends kr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uu=` 	
\r=`.split(""),Sx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<uu.length;e+=1)t[uu[e].charCodeAt(0)]=-2;for(let e=0;e<pi.length;e+=1)t[pi[e].charCodeAt(0)]=e;return t})();function hu(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(pi[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(pi[s]),e.queuedBits-=6}}function tf(t,e,r){const s=Sx[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function mu(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Tx(o,s,r)};for(let o=0;o<t.length;o+=1)tf(t.charCodeAt(o),a,i);return e.join("")}function Cx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ex(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Cx(s,e)}}function Tx(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Px(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)tf(t.charCodeAt(a),r,s);return new Uint8Array(e)}function Ax(t){const e=[];return Ex(t,r=>e.push(r)),new Uint8Array(e)}function Rx(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>hu(a,r,s)),hu(null,r,s),e.join("")}function Ox(t){return Math.round(Date.now()/1e3)+t}function Dx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const wt=()=>typeof window<"u"&&typeof document<"u",Er={tested:!1,writable:!1},rf=()=>{if(!wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Er.tested)return Er.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Er.tested=!0,Er.writable=!0}catch{Er.tested=!0,Er.writable=!1}return Er.writable};function $x(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const sf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Xn(async()=>{const{default:s}=await Promise.resolve().then(()=>zs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Lx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",os=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Tr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Zt=async(t,e)=>{await t.removeItem(e)};class Bi{constructor(){this.promise=new Bi.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Bi.promiseConstructor=Promise;function bo(t){const e=t.split(".");if(e.length!==3)throw new Cl("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!wx.test(e[s]))throw new Cl("JWT not in base64url format");return{header:JSON.parse(mu(e[0])),payload:JSON.parse(mu(e[1])),signature:Px(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ux(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ix(t,e){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function Mx(t){return("0"+t.toString(16)).substr(-2)}function Fx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Mx).join("")}async function zx(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Bx(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await zx(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rs(t,e,r=!1){const s=Fx();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await os(t,`${e}-code-verifier`,a);const i=await Bx(s);return[i,s===i?"plain":"s256"]}const Hx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vx(t){const e=t.headers.get(_l);if(!e||!e.match(Hx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Wx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function qx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ss(t){if(!Kx.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jo(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fu(t){return JSON.parse(JSON.stringify(t))}var Qx=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r};const Or=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gx=[502,503,504];async function pu(t){var e;if(!Lx(t))throw new Sl(Or(t),0);if(Gx.includes(t.status))throw new Sl(Or(t),t.status);let r;try{r=await t.json()}catch(i){throw new ef(Or(i),i)}let s;const a=Vx(t);if(a&&a.getTime()>=Zm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new du(Or(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new er}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new du(Or(r),t.status,r.weak_password.reasons);throw new jx(Or(r),t.status||500,s)}const Jx=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function q(t,e,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[_l]||(i[_l]=Zm["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Yx(t,e,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Yx(t,e,r,s,a,i){const o=Jx(e,s,a,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Sl(Or(c),0)}if(l.ok||await pu(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await pu(c)}}function Mt(t){var e;let r=null;tv(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Ox(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function gu(t){const e=Mt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ir(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Xx(t){return{data:t,error:null}}function Zx(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=t,o=Qx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function ev(t){return t}function tv(t){return t.access_token&&t.refresh_token&&t.expires_in}const No=["global","local","others"];var rv=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r};class sv{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=sf(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=No[0]){if(No.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${No.join(", ")}`);try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ir})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=rv(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Zx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(V(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ir})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:ev});if(u.error)throw u.error;const m=await u.json(),g=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const j=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(y.split(";")[1].split("=")[1]);d[`${N}Page`]=j}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(V(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){ss(e);try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ir})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ss(e);try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ir})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){ss(e);try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ir})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ss(e.userId);try{const{data:r,error:s}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(V(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ss(e.userId),ss(e.id);try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}}function xu(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function nv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ns={debug:!!(globalThis&&rf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class av extends nf{}async function iv(t,e,r){ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ns.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new av(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ns.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}nv();const ov={url:xx,storageKey:vx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function vu(t,e,r){return await r()}const as={};class Fn{constructor(e){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fn.nextInstanceID,Fn.nextInstanceID+=1,this.instanceID>0&&wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},ov),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new sv({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=sf(a.fetch),this.lock=a.lock||vu,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:wt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=iv:this.lock=vu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:rf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xu(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=xu(this.memoryStorage)),wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=as[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){as[this.storageKey]=Object.assign(Object.assign({},as[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=as[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){as[this.storageKey]=Object.assign(Object.assign({},as[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xm}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=$x(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),wt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_x(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return V(r)?{error:r}:{error:new ef("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Mt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(V(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,s,a;try{let i;if("email"in e){const{email:u,password:m,options:g}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await rs(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:u,password:m,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:y},xform:Mt})}else if("phone"in e){const{phone:u,password:m,options:g}=e;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},channel:(a=g==null?void 0:g.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Mt})}else throw new Ea("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(V(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gu})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gu})}else throw new Ea("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ca}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,a,i,o,l,c,d,u,m,g,p;let y,j;if("message"in e)y=e.message,j=e.signature;else{const{chain:N,wallet:x,statement:f,options:h}=e;let v;if(wt())if(typeof x=="object")v=x;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))v=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=x}const b=new URL((r=h==null?void 0:h.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const w=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},h==null?void 0:h.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),f?{statement:f}:null));let _;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")_=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)_=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)y=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),j=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${b.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(a=(s=h==null?void 0:h.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=h==null?void 0:h.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${h.signInWithSolana.notBefore}`]:[],...!((o=h==null?void 0:h.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${h.signInWithSolana.expirationTime}`]:[],...!((l=h==null?void 0:h.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${h.signInWithSolana.chainId}`]:[],...!((c=h==null?void 0:h.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${h.signInWithSolana.nonce}`]:[],...!((d=h==null?void 0:h.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${h.signInWithSolana.requestId}`]:[],...!((m=(u=h==null?void 0:h.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...h.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const w=await v.signMessage(new TextEncoder().encode(y),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=w}}try{const{data:N,error:x}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Rx(j)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Mt});if(x)throw x;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Ca}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:x})}catch(N){if(V(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const r=await Tr(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:i,error:o}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Mt});if(await Zt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ca}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(V(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=e,l=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Mt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ca}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await rs(this.storage,this.storageKey));const{error:m}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ea("You must provide either an email or phone number.")}catch(l){if(V(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Mt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,s,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await rs(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Xx})}catch(i){if(V(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new er;const{error:a}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:i}=e,{error:o}=await q(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:a,options:i}=e,{data:o,error:l}=await q(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ea("You must provide either an email or phone number and a type")}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Tr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<yo:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await Tr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=jo()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ir}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new er}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ir})})}catch(r){if(V(r))return kx(r)&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new er;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await rs(this.storage,this.storageKey));const{data:d,error:u}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ir});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new er;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=bo(e.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(V(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new er;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!wt())throw new Ta("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ta(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ta("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new cu("No code detected.");const{data:f,error:h}=await this._exchangeCodeForSession(e.code);if(h)throw h;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new Ta("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let g=u+m;c&&(g=parseInt(c));const p=g-u;p*1e3<=is&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${m}s`);const y=g-m;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,g,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,g,u);const{data:j,error:N}=await this._getUser(i);if(N)throw N;const x={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:g,refresh_token:o,token_type:d,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(s){if(V(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Tr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{error:i};const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Nx(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Dx(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await rs(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(V(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:m,error:g}=i;if(g)throw g;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return wt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(V(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Ix(async a=>(a>0&&await Ux(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Mt})),(a,i)=>{const o=200*Math.pow(2,a);return i&&wo(i)&&Date.now()+o-s<is})}catch(s){if(this._debug(r,"error",s),V(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),wt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Tr(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Tr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await os(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:jo()}else if(a&&!a.user&&!a.user){const o=await Tr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Zt(this.storage,this.storageKey+"-user"),await os(this.storage,this.storageKey,a)):a.user=jo()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yo;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${yo}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),wo(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Bi;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new er;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),V(i)){const o={session:null,error:i};return wo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await os(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=fu(a);await os(this.storage,this.storageKey,i)}else{const a=fu(r);await os(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Zt(this.storage,this.storageKey),await Zt(this.storage,this.storageKey+"-code-verifier"),await Zt(this.storage,this.storageKey+"-user"),this.userStorage&&await Zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),is);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/is);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${is}ms, refresh threshold is ${kl} ticks`),a<=kl&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await rs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await q(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],a=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=bo(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(l=>l.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+bx>a)return s;const{data:i,error:o}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};s=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=bo(s);r!=null&&r.allowExpired||Wx(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const u=qx(a.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,o,Ax(`${l}.${c}`)))throw new Cl("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}}Fn.nextInstanceID=0;const lv=Fn;class cv extends lv{constructor(e){super(e)}}var dv=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class uv{constructor(e,r,s){var a,i,o;this.supabaseUrl=e,this.supabaseKey=r;const l=gx(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:ix,realtime:lx,auth:Object.assign(Object.assign({},ox),{storageKey:c}),global:ax},u=px(s??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=hx(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Sg(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new rx(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new ng(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return dv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},u,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cv({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),u),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:i,flowType:l,lock:c,debug:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Hg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hv=(t,e,r)=>new uv(t,e,r);function mv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}mv()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fv="https://zzsheingevyhhqomujug.supabase.co",pv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp6c2hlaW5nZXZ5aGhxb211anVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1MDUzNDUsImV4cCI6MjA3MzA4MTM0NX0._Z9hVv3e7gAS2GHEmT2E6SOdr8oToqPRF_OTeo9q4fA",le=hv(fv,pv),fe={TICKETS:"tickets",USERS:"users",COMMENTS:"comments",REPLIES:"replies",REMINDERS:"reminders",ATTACHMENTS:"attachments"};class gv{mapDatabaseTicketToTicket(e){return{id:e.id,title:e.title,description:e.description,status:e.status,priority:e.priority,department:{id:e.department_id,name:e.department_name,description:"",color:"#3B82F6"},assignee:e.assignee_id?{id:e.assignee_id,name:e.assignee_name||"",email:e.assignee_email||"",role:"agent",department:{id:e.department_id,name:e.department_name,description:"",color:"#3B82F6"},isBlocked:!1}:null,reporter:{id:e.reporter_id,name:e.reporter_name,email:e.reporter_email,role:"agent",department:{id:e.department_id,name:e.department_name,description:"",color:"#3B82F6"},isBlocked:!1},createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),dueDate:e.due_date?new Date(e.due_date):void 0,tags:e.tags||[],comments:[],issueType:e.issue_type,orderNumber:e.order_number,orderValue:e.order_value,refundValue:e.refund_value,currency:e.currency,issueCategory:e.issue_category,slaHours:e.sla_hours,pocName:e.poc_name,escalationLevel:e.escalation_level,businessImpact:e.business_impact,resolutionTime:e.resolution_time?Math.floor((new Date(e.resolution_time).getTime()-new Date(e.created_at).getTime())/6e4):void 0,firstResponseTime:e.first_response_time?Math.floor((new Date(e.first_response_time).getTime()-new Date(e.created_at).getTime())/6e4):void 0,watchers:e.watchers||[],linkedTickets:e.linked_tickets||[],customFields:e.custom_fields||{},reminder:void 0}}mapTicketToDatabaseTicket(e){var r,s,a,i,o,l;return{id:e.id,title:e.title,description:e.description,status:e.status,priority:e.priority,department_id:((r=e.department)==null?void 0:r.id)||"dept-default",department_name:((s=e.department)==null?void 0:s.name)||"Default Department",assignee_id:((a=e.assignee)==null?void 0:a.id)||null,assignee_name:((i=e.assignee)==null?void 0:i.name)||null,assignee_email:((o=e.assignee)==null?void 0:o.email)||null,reporter_id:e.reporter.id,reporter_name:e.reporter.name,reporter_email:e.reporter.email,due_date:((l=e.dueDate)==null?void 0:l.toISOString())||null,tags:e.tags||[],issue_type:e.issueType||"general",order_number:e.orderNumber||null,order_value:e.orderValue||null,refund_value:e.refundValue||null,currency:e.currency||null,issue_category:e.issueCategory||null,sla_hours:e.slaHours||null,poc_name:e.pocName||null,escalation_level:e.escalationLevel||"none",business_impact:e.businessImpact||"medium",resolution_time:null,first_response_time:null,watchers:e.watchers||[],linked_tickets:e.linkedTickets||[],custom_fields:e.customFields||{}}}mapPartialTicketToDatabaseTicket(e){var s,a,i,o;console.log("🔧 Using PARTIAL mapping for ticket update:",Object.keys(e));const r={};return e.id!==void 0&&(r.id=e.id),e.title!==void 0&&(r.title=e.title),e.description!==void 0&&(r.description=e.description),e.status!==void 0&&(r.status=e.status),e.priority!==void 0&&(r.priority=e.priority),e.department&&(r.department_id=e.department.id,r.department_name=e.department.name),e.assignee!==void 0&&(r.assignee_id=((s=e.assignee)==null?void 0:s.id)||null,r.assignee_name=((a=e.assignee)==null?void 0:a.name)||null,r.assignee_email=((i=e.assignee)==null?void 0:i.email)||null),e.reporter&&(r.reporter_id=e.reporter.id,r.reporter_name=e.reporter.name,r.reporter_email=e.reporter.email),e.dueDate!==void 0&&(r.due_date=((o=e.dueDate)==null?void 0:o.toISOString())||null),e.tags!==void 0&&(r.tags=e.tags||[]),e.issueType!==void 0&&(r.issue_type=e.issueType||"general"),e.orderNumber!==void 0&&(r.order_number=e.orderNumber||null),e.orderValue!==void 0&&(r.order_value=e.orderValue||null),e.refundValue!==void 0&&(r.refund_value=e.refundValue||null),e.currency!==void 0&&(r.currency=e.currency||null),e.issueCategory!==void 0&&(r.issue_category=e.issueCategory||null),e.slaHours!==void 0&&(r.sla_hours=e.slaHours||null),e.pocName!==void 0&&(r.poc_name=e.pocName||null),e.escalationLevel!==void 0&&(r.escalation_level=e.escalationLevel||"none"),e.businessImpact!==void 0&&(r.business_impact=e.businessImpact||"medium"),e.watchers!==void 0&&(r.watchers=e.watchers||[]),e.linkedTickets!==void 0&&(r.linked_tickets=e.linkedTickets||[]),e.customFields!==void 0&&(r.custom_fields=e.customFields||{}),r}mapDatabaseUserToUser(e){return{id:e.id,name:e.name,email:e.email,role:e.role,department:{id:e.department_id,name:e.department_name,description:"",color:"#3B82F6"},avatar:e.avatar,isBlocked:!e.is_active}}mapUserToDatabaseUser(e){return{id:e.id,name:e.name,email:e.email,role:e.role,department_id:e.department.id,department_name:e.department.name,avatar:e.avatar,is_active:!e.isBlocked}}isValidUUID(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}convertToValidUUID(e){return this.isValidUUID(e)?e:(console.warn(`⚠️ Non-UUID ID detected: ${e}, using admin UUID`),"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11")}async createTicket(e){const r=this.mapTicketToDatabaseTicket(e);r.reporter_id=this.convertToValidUUID(r.reporter_id),r.assignee_id&&(r.assignee_id=this.convertToValidUUID(r.assignee_id)),console.log("🔄 Creating ticket in Supabase:",e.id),console.log("📄 Database ticket data:",r);const{error:s}=await le.from(fe.TICKETS).insert(r);if(s)throw console.error("❌ Supabase error details:",s),s;console.log("✅ Ticket created in Supabase:",e.id)}async updateTicket(e,r){const{error:s}=await le.from(fe.TICKETS).update({...this.mapPartialTicketToDatabaseTicket(r),updated_at:new Date().toISOString()}).eq("id",e);if(s)throw s;console.log("✅ Ticket updated in Supabase:",e)}async deleteTicket(e){const{error:r}=await le.from(fe.TICKETS).delete().eq("id",e);if(r)throw r;console.log("✅ Ticket deleted from Supabase:",e)}async loadTickets(e=50,r=0){const{data:s,error:a}=await le.from(fe.TICKETS).select("*").order("created_at",{ascending:!1}).range(r,r+e-1);if(a)throw a;return console.log(`✅ Loaded tickets from Supabase: ${(s==null?void 0:s.length)||0} (limit: ${e}, offset: ${r})`),(s||[]).map(this.mapDatabaseTicketToTicket)}async loadTicketComments(e){const{data:r,error:s}=await le.from(fe.COMMENTS).select("*").eq("ticket_id",e).order("created_at",{ascending:!0});if(s)throw s;const a=(r||[]).map(i=>({id:i.id,author:{id:i.author_id,name:i.author_name,email:i.author_email,role:"agent",department:{id:"",name:"",description:"",color:"#3B82F6"},isBlocked:!1},content:i.content,createdAt:new Date(i.created_at),isInternal:i.is_internal,replies:[]}));for(const i of a){const{data:o,error:l}=await le.from(fe.REPLIES).select("*").eq("comment_id",i.id).order("created_at",{ascending:!0});!l&&o&&(i.replies=o.map(c=>({id:c.id,author:{id:c.author_id,name:c.author_name,email:c.author_email,role:"agent",department:{id:"",name:"",description:"",color:"#3B82F6"},isBlocked:!1},content:c.content,createdAt:new Date(c.created_at)})))}return a}async addComment(e,r){const{error:s}=await le.from(fe.COMMENTS).insert({ticket_id:e,author_id:r.author.id,author_name:r.author.name,author_email:r.author.email,content:r.content,is_internal:r.isInternal||!1});if(s)throw s;await this.updateTicket(e,{updatedAt:new Date}),console.log("✅ Comment added to Supabase:",r.id)}async addReply(e,r,s){const{error:a}=await le.from(fe.REPLIES).insert({comment_id:r,author_id:s.author.id,author_name:s.author.name,author_email:s.author.email,content:s.content});if(a)throw a;await this.updateTicket(e,{updatedAt:new Date}),console.log("✅ Reply added to Supabase:",s.id)}async createUser(e){const r=this.mapUserToDatabaseUser(e);if(!this.isValidUUID(r.id)){console.warn(`⚠️ Invalid user UUID: ${r.id}, skipping user creation`);return}const{error:s}=await le.from(fe.USERS).insert(r);if(s){if(s.code==="23505"){console.warn(`⚠️ User already exists: ${e.id}`);return}throw s}console.log("✅ User created in Supabase:",e.id)}async updateUser(e,r){const s={};r.name!==void 0&&(s.name=r.name),r.email!==void 0&&(s.email=r.email),r.role!==void 0&&(s.role=r.role),r.department!==void 0&&(s.department_id=r.department.id,s.department_name=r.department.name),r.isBlocked!==void 0&&(s.is_active=!r.isBlocked),s.updated_at=new Date().toISOString();const{error:a}=await le.from(fe.USERS).update(s).eq("id",e);if(a)throw a;console.log("✅ User updated in Supabase:",e)}async deleteUser(e){const{data:r,error:s}=await le.from(fe.USERS).select("role").eq("id",e).single();if(s)throw s;if(r.role==="admin"||r.role==="super_admin")throw new Error("Cannot delete admin users");const{error:a}=await le.from(fe.USERS).update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",e);if(a)throw a;console.log("✅ User deactivated in Supabase:",e)}async loadUsers(){const{data:e,error:r}=await le.from(fe.USERS).select("*").order("created_at",{ascending:!0});if(r)throw r;return console.log("✅ Loaded users from Supabase:",(e==null?void 0:e.length)||0),(e||[]).map(this.mapDatabaseUserToUser)}async setReminder(e,r){const{error:s}=await le.from(fe.REMINDERS).insert({ticket_id:e,user_id:r.userId,message:r.message,due_date:r.dueDate.toISOString()});if(s)throw s;console.log("✅ Reminder set in Supabase for ticket:",e)}subscribeToTickets(e){const r=le.channel("tickets_channel").on("postgres_changes",{event:"*",schema:"public",table:fe.TICKETS},async()=>{try{const s=await this.loadTickets();e(s)}catch(s){console.error("Failed to reload tickets after change:",s)}}).subscribe();return()=>{le.removeChannel(r)}}subscribeToUsers(e){const r=le.channel("users_channel").on("postgres_changes",{event:"*",schema:"public",table:fe.USERS},async()=>{try{const s=await this.loadUsers();e(s)}catch(s){console.error("Failed to reload users after change:",s)}}).subscribe();return()=>{le.removeChannel(r)}}async ensureAdminUserExists(){try{const{data:e,error:r}=await le.from(fe.USERS).select("id");if(r){console.error("❌ Error checking user count:",r);return}console.log("🔧 Current user count in database:",(e==null?void 0:e.length)||0);const{data:s,error:a}=await le.from(fe.USERS).select("*").eq("email","admin@fleek.com").single();if(a&&a.code!=="PGRST116")throw a;if(s)console.log("✅ Admin user already exists");else{const i={id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",name:"System Administrator",email:"admin@fleek.com",role:"admin",department:{id:"1",name:"Operations"},isBlocked:!1,is_active:!0},{error:o}=await le.from(fe.USERS).insert([this.mapUserToDatabaseUser(i)]);o?console.error("❌ Failed to create admin user:",o):console.log("✅ Admin user created successfully")}if(((e==null?void 0:e.length)||0)<3){console.log("🔧 Creating sample users for testing...");const i=[{id:"b1eebc99-9c0b-4ef8-bb6d-6bb9bd380a22",name:"John Smith",email:"john@fleek.com",role:"agent",department:{id:"1",name:"Operations"},isBlocked:!1,is_active:!0},{id:"c2eebc99-9c0b-4ef8-bb6d-6bb9bd380a33",name:"Jane Doe",email:"jane@fleek.com",role:"senior_agent",department:{id:"2",name:"Marketing"},isBlocked:!1,is_active:!0}];for(const o of i)try{const{error:l}=await le.from(fe.USERS).insert([this.mapUserToDatabaseUser(o)]);l?console.error(`❌ Failed to create sample user ${o.name}:`,l):console.log(`✅ Sample user created: ${o.name}`)}catch(l){console.error(`❌ Error creating sample user ${o.name}:`,l)}}}catch(e){console.error("❌ Error ensuring admin user exists:",e)}}async authenticateUser(e,r){try{await this.ensureAdminUserExists();let s=`email.ilike.%${e}%,name.ilike.%${e}%`;e.toLowerCase()==="admin"&&(s="email.eq.admin@fleek.com,name.ilike.%admin%");const{data:a,error:i}=await le.from(fe.USERS).select("*").or(s);if(i)throw i;if(!a||a.length===0)throw new Error("User not found");const o=a[0],l={"admin@fleek.com":"admin123","shaharyar@fleek.com":"shaharyar123","john@fleek.com":"john123","jane@fleek.com":"jane123","bob@fleek.com":"bob123"};let c=!1;if(l[o.email]?c=l[o.email]===r:c=localStorage.getItem(`fleek_user_password_${o.id}`)===r,!c)throw new Error("Invalid credentials");if(!o.is_active)throw new Error("Account is deactivated");return console.log("✅ User authenticated:",o.email),this.mapDatabaseUserToUser(o)}catch(s){throw console.error("❌ Authentication failed:",s),s}}async getUserByEmail(e){try{const{data:r,error:s}=await le.from(fe.USERS).select("*").eq("email",e).single();if(s){if(s.code==="PGRST116")return null;throw s}return this.mapDatabaseUserToUser(r)}catch(r){return console.error("Failed to get user by email:",r),null}}async testConnection(){try{const{data:e,error:r}=await le.from(fe.USERS).select("id").limit(1);return r?(console.error("Supabase connection test failed:",r),!1):(console.log("✅ Supabase connection test successful"),!0)}catch(e){return console.error("Supabase connection test failed:",e),!1}}}const ne=new gv,Pr={AUTH_USER:"fleek_auth_user"},xv={user:null,isAuthenticated:!1,isLoading:!1,error:null},vv=(t,e)=>{switch(e.type){case"LOGIN_START":case"SIGNUP_START":return{...t,isLoading:!0,error:null};case"LOGIN_SUCCESS":case"SIGNUP_SUCCESS":return{...t,user:e.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_FAILURE":case"SIGNUP_FAILURE":return{...t,user:null,isAuthenticated:!1,isLoading:!1,error:e.payload};case"LOGOUT":return{...t,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"CLEAR_ERROR":return{...t,error:null};case"UPDATE_PROFILE":return{...t,user:e.payload};default:return t}},af=S.createContext(void 0),Et=()=>{const t=S.useContext(af);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},yv=({children:t})=>{var x,f,h;const[e,r]=S.useReducer(vv,xv);S.useEffect(()=>{(()=>{localStorage.removeItem("fleek_users_database"),Object.keys(localStorage).forEach(w=>{w.startsWith("fleek_user_password_user-")&&(localStorage.removeItem(w),console.log("🧹 Cleaned up old password:",w))});const b=localStorage.getItem(Pr.AUTH_USER);if(b)try{const w=JSON.parse(b);/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(w.id)?r({type:"LOGIN_SUCCESS",payload:w}):(console.log("🧹 Removing user with invalid UUID:",w.id),localStorage.removeItem(Pr.AUTH_USER))}catch{localStorage.removeItem(Pr.AUTH_USER)}})()},[]);const s=async v=>{r({type:"LOGIN_START"});try{const b=await ne.authenticateUser(v.username,v.password);if(!b)throw new Error("Invalid username/email or password");const w={id:b.id,username:b.name.toLowerCase().replace(/\s+/g,""),email:b.email,name:b.name,role:b.role,department:b.department,createdAt:new Date,lastLogin:new Date,isActive:!b.isBlocked,isBlocked:b.isBlocked};localStorage.setItem(Pr.AUTH_USER,JSON.stringify(w)),r({type:"LOGIN_SUCCESS",payload:w})}catch(b){throw r({type:"LOGIN_FAILURE",payload:b instanceof Error?b.message:"Login failed"}),b}},a=async v=>{r({type:"SIGNUP_START"});try{if(v.password!==v.confirmPassword)throw new Error("Passwords do not match");if(v.password.length<8)throw new Error("Password must be at least 8 characters long");if(!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(v.password))throw new Error("Password must contain at least one uppercase letter, one lowercase letter, and one number");if(await ne.getUserByEmail(v.email.toLowerCase().trim()))throw new Error("Email already exists");const _={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(A){const C=Math.random()*16|0;return(A=="x"?C:C&3|8).toString(16)}),name:v.name.trim(),email:v.email.toLowerCase().trim(),role:"agent",department:v.department&&ge.find(A=>A.id===v.department)||ge[0],isBlocked:!1};await ne.createUser(_),localStorage.setItem(`fleek_user_password_${_.id}`,v.password);const R={id:_.id,username:_.name.toLowerCase().replace(/\s+/g,""),email:_.email,name:_.name,role:_.role,department:_.department,createdAt:new Date,lastLogin:new Date,isActive:!0,isBlocked:!1};localStorage.setItem(Pr.AUTH_USER,JSON.stringify(R)),r({type:"SIGNUP_SUCCESS",payload:R}),console.log("✅ User created in Supabase and logged in:",R.email)}catch(b){throw r({type:"SIGNUP_FAILURE",payload:b instanceof Error?b.message:"Signup failed"}),b}},i=()=>{localStorage.removeItem(Pr.AUTH_USER),r({type:"LOGOUT"})},o=async v=>{if(await new Promise(w=>setTimeout(w,1e3)),!await ne.getUserByEmail(v.toLowerCase()))throw new Error("No account found with this email address");console.log(`Password reset email sent to ${v}`)},l=async v=>{if(!e.user)throw new Error("No user logged in");await new Promise(_=>setTimeout(_,500));const b={...e.user,...v},w=usersDatabase.findIndex(_=>_.id===e.user.id);w!==-1&&(usersDatabase[w]=b,saveUsersToStorage(usersDatabase)),localStorage.setItem(Pr.AUTH_USER,JSON.stringify(b)),r({type:"UPDATE_PROFILE",payload:b})},c=async()=>{var v,b;if(console.log("🔧 getAllUsers called, current user:",(v=e.user)==null?void 0:v.name,"role:",(b=e.user)==null?void 0:b.role),!e.user)throw console.error("❌ No authenticated user for getAllUsers"),new Error("Authentication required");try{console.log("🔧 Loading users from Supabase...");const w=await ne.loadUsers();return console.log("🔧 Loaded from Supabase:",w.length,"users"),w.map(_=>({id:_.id,username:_.name.toLowerCase().replace(/\s+/g,""),email:_.email,name:_.name,role:_.role,department:_.department,createdAt:new Date,lastLogin:new Date,isActive:!_.isBlocked,isBlocked:_.isBlocked}))}catch(w){return console.error("Failed to load users from Supabase:",w),[]}},d=async(v,b)=>{var w;if(((w=e.user)==null?void 0:w.role)!=="admin")throw new Error("Unauthorized: Admin access required");await new Promise(_=>setTimeout(_,500)),await ne.updateUser(v,{isBlocked:!0}),console.log(`User ${v} blocked with reason: ${b}`)},u=async v=>{var b;if(((b=e.user)==null?void 0:b.role)!=="admin")throw new Error("Unauthorized: Admin access required");await new Promise(w=>setTimeout(w,500)),await ne.updateUser(v,{isBlocked:!1}),console.log(`User ${v} unblocked`)},m=async v=>{var b;if(((b=e.user)==null?void 0:b.role)!=="admin")throw new Error("Unauthorized: Admin access required");await new Promise(w=>setTimeout(w,500)),await ne.deleteUser(v),localStorage.removeItem(`fleek_user_password_${v}`),console.log(`User ${v} deactivated`)},g=async(v,b)=>{var _;if(((_=e.user)==null?void 0:_.role)!=="admin")throw new Error("Unauthorized: Admin access required");await new Promise(R=>setTimeout(R,500));const w={name:b.name,email:b.email,role:b.role,department:b.department,isBlocked:b.isBlocked};await ne.updateUser(v,w),console.log(`User ${v} profile updated in Supabase`)},p=async(v,b)=>{await new Promise(A=>setTimeout(A,1e3));const w=await ne.getUserByEmail(v.toLowerCase());if(!w)throw new Error("User not found");const R={"admin@fleek.com":{"What was the name of your first pet?":"fluffy","What city were you born in?":"new york"},"shaharyar@fleek.com":{"What was the name of your first pet?":"buddy","What city were you born in?":"karachi"}}[w.email.toLowerCase()];if(!R)return!1;for(const A of b){const C=R[A.question];if(!C||C.toLowerCase()!==A.answer.toLowerCase().trim())return!1}return!0},y=async v=>{if(await new Promise(w=>setTimeout(w,1e3)),v.newPassword!==v.confirmPassword)throw new Error("Passwords do not match");const b=await ne.getUserByEmail(v.email.toLowerCase());if(!b)throw new Error("User not found");localStorage.setItem(`fleek_user_password_${b.id}`,v.newPassword),console.log("✅ Password updated for user:",b.email)},j=((x=e.user)==null?void 0:x.role)==="admin"||((f=e.user)==null?void 0:f.role)==="super_admin",N={authState:e,login:s,signup:a,logout:i,resetPassword:o,verifySecurityQuestions:p,resetPasswordWithSecurity:y,updateProfile:l,getAllUsers:c,blockUser:j?d:void 0,unblockUser:j?u:void 0,deleteUser:j?m:void 0,updateUserProfile:j?g:void 0};return console.log("🔧 AuthContext value object:",{getAllUsersPresent:!!N.getAllUsers,userRole:(h=e.user)==null?void 0:h.role,isAdmin:j,blockUserPresent:!!N.blockUser,updateUserProfilePresent:!!N.updateUserProfile,authStatePresent:!!e.user}),n.jsx(af.Provider,{value:N,children:t})},of=S.createContext(void 0),Hs=()=>{const t=S.useContext(of);if(!t)throw new Error("useData must be used within a DataProvider");return t},wv=({children:t})=>{const[e,r]=S.useState([]),[s,a]=S.useState([]),[i,o]=S.useState(!1),[l,c]=S.useState(!0);S.useEffect(()=>{(async()=>{console.log("🚀 Starting progressive data load...");try{console.log("📥 Loading users...");const C=await ne.loadUsers();a(C),console.log("✅ Users loaded:",C.length),console.log("🔧 DataContext: Loaded users data:",C.map(F=>{var te;return{id:F.id,name:F.name,email:F.email,department:((te=F.department)==null?void 0:te.name)||"No Department"}})),console.log("📥 Loading recent tickets (first 25)...");const B=(await ne.loadTickets(25,0)).map(F=>({...F,comments:[]}));r(B),c(!1),console.log("✅ Tickets loaded:",B.length)}catch(C){console.error("❌ Failed to load data:",C),r([]),a([]),c(!1)}})()},[]),S.useEffect(()=>{if(l)return;console.log("📡 Setting up real-time subscriptions...");let A=null,C=null;try{A=ne.subscribeToTickets(U=>{console.log("🔄 Tickets updated from real-time subscription:",U.length),r(U)}),C=ne.subscribeToUsers(U=>{console.log("🔄 Users updated from real-time subscription:",U.length),a(U)})}catch(U){console.error("❌ Failed to setup real-time subscriptions:",U)}return()=>{console.log("📡 Cleaning up real-time subscriptions");try{A&&A(),C&&C()}catch(U){console.error("❌ Error cleaning up subscriptions:",U)}}},[l]);const d=S.useCallback(async A=>{try{await ne.createTicket(A),r(C=>{const U=[A,...C];return console.log("📝 New ticket added to cloud:",A.id),U})}catch(C){throw console.error("❌ Failed to create ticket:",C),C}},[]),u=S.useCallback(async(A,C)=>{try{await ne.updateTicket(A,C),r(U=>{const B=U.map(F=>F.id===A?{...F,...C,updatedAt:new Date}:F);return console.log("✏️ Ticket updated in cloud:",A),B})}catch(U){throw console.error("❌ Failed to update ticket:",U),U}},[]),m=S.useCallback(async A=>{try{await ne.deleteTicket(A),r(C=>{const U=C.filter(B=>B.id!==A);return console.log("🗑️ Ticket deleted from cloud:",A),U})}catch(C){throw console.error("❌ Failed to delete ticket:",C),C}},[]),g=S.useCallback(async A=>{try{const C=await ne.loadTicketComments(A);r(U=>U.map(B=>B.id===A?{...B,comments:C}:B))}catch(C){console.error("❌ Failed to load ticket comments:",C)}},[]),p=S.useCallback(async(A,C)=>{try{await ne.addComment(A,C),r(U=>{const B=U.map(F=>F.id===A?{...F,comments:[...F.comments,C],updatedAt:new Date}:F);return console.log("💬 Comment added to cloud for ticket:",A),B})}catch(U){throw console.error("❌ Failed to add comment:",U),U}},[]),y=S.useCallback(async(A,C,U)=>{try{await ne.addReply(A,C,U),r(B=>{const F=B.map(te=>te.id===A?{...te,comments:te.comments.map(ee=>ee.id===C?{...ee,replies:[...ee.replies||[],U]}:ee),updatedAt:new Date}:te);return console.log("↩️ Reply added to cloud for comment:",C),F})}catch(B){throw console.error("❌ Failed to add reply:",B),B}},[]),j=S.useCallback(async A=>{try{await ne.createUser(A),a(C=>{if(C.some(F=>F.id===A.id||F.email===A.email))return console.warn("⚠️ User already exists:",A.email),C;const B=[...C,A];return console.log("👤 New user added to cloud:",A.email),B})}catch(C){throw console.error("❌ Failed to create user:",C),C}},[]),N=S.useCallback(async(A,C)=>{try{await ne.updateUser(A,C),a(U=>{const B=U.map(F=>F.id===A?{...F,...C}:F);return console.log("✏️ User updated in cloud:",A),B})}catch(U){throw console.error("❌ Failed to update user:",U),U}},[]),x=S.useCallback(async(A,C)=>{try{await ne.setReminder(A,C),r(U=>{const B=U.map(F=>F.id===A?{...F,reminder:C,updatedAt:new Date}:F);return console.log("⏰ Reminder set in cloud for ticket:",A),B})}catch(U){throw console.error("❌ Failed to set reminder:",U),U}},[]),f=S.useCallback((A,C)=>{u(A,{status:C})},[u]),h=S.useCallback((A,C)=>{u(A,{assignee:C})},[u]),v=S.useCallback(()=>{const A={tickets:e,users:s,exportedAt:new Date().toISOString(),version:"2.0.0-supabase"};return JSON.stringify(A,null,2)},[e,s]),b=S.useCallback(async A=>{try{const C=JSON.parse(A);if(C.users)for(const F of C.users)await ne.createUser(F);if(C.tickets)for(const F of C.tickets)await ne.createTicket(F);const[U,B]=await Promise.all([ne.loadTickets(),ne.loadUsers()]);return r(U),a(B),console.log("✅ Data imported to Supabase successfully"),!0}catch(C){return console.error("❌ Failed to import data to Supabase:",C),!1}},[]),w=S.useCallback(async()=>{try{console.warn("⚠️ Clear all data not implemented for Supabase (safety measure)"),console.log("🧹 Use Supabase dashboard to clear data if needed")}catch(A){console.error("❌ Failed to clear data:",A)}},[]),_=S.useCallback(()=>{const A=JSON.stringify({tickets:e,users:s});return{used:new Blob([A]).size,available:1/0,percentage:0,provider:"Supabase Cloud"}},[e,s]),R={tickets:e,users:s,isLoading:i,ticketsLoading:l,addTicket:d,updateTicket:u,deleteTicket:m,loadTicketComments:g,addComment:p,addReply:y,addUser:j,updateUser:N,setReminder:x,changeTicketStatus:f,assignTicket:h,exportData:v,importData:b,clearAllData:w,getStorageStats:_};return n.jsx(of.Provider,{value:R,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),M=(t,e)=>{const r=S.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>S.createElement("svg",{ref:u,...bv,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${jv(t)}`,l].join(" "),...d},[...e.map(([m,g])=>S.createElement(m,g)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=M("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=M("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=M("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=M("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=M("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=M("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=M("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=M("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=M("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=M("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=M("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=M("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=M("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=M("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=M("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=M("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=M("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=M("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=M("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=M("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=M("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=M("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=M("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=M("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=M("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=M("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=M("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=M("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=M("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=M("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=M("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=M("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=M("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=M("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=M("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=M("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=M("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=M("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=M("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=M("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=M("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=M("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=M("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=M("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=M("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=M("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=M("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=M("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=M("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=M("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=M("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=M("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=M("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=M("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=M("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=M("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=M("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=M("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=M("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=M("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=M("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=M("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=M("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=M("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=M("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Vv=({onSwitchToSignup:t,onSwitchToForgotPassword:e})=>{const{authState:r,login:s}=Et(),[a,i]=S.useState({username:"",password:"",rememberMe:!1}),[o,l]=S.useState(!1),[c,d]=S.useState({});S.useEffect(()=>{if(r.error){const y=setTimeout(()=>{d({})},100);return()=>clearTimeout(y)}},[a,r.error]);const u=()=>{const y={};return a.username.trim()||(y.username="Username or email is required"),a.password||(y.password="Password is required"),d(y),Object.keys(y).length===0},m=async y=>{if(y.preventDefault(),!!u())try{await s(a)}catch{}},g=(y,j)=>{i(N=>({...N,[y]:j})),c[y]&&d(N=>({...N,[y]:""}))},p=y=>y.includes("@")&&y.includes(".");return n.jsxs("div",{className:"w-full max-w-md mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(cr,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-semibold text-gray-900 tracking-tight",children:"Welcome back"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to F.I.T.S"})]}),n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[r.error&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3",children:[n.jsx(Ue,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Sign in failed"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:r.error})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username or Email"}),n.jsxs("div",{className:"relative",children:[p(a.username)?n.jsx(Wn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}):n.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:a.username,onChange:y=>g("username",y.target.value),className:`w-full pl-11 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${c.username?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter username or email",autoComplete:"username",disabled:r.isLoading})]}),c.username&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),c.username]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"💡 You can sign in with either your username or email address"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:o?"text":"password",value:a.password,onChange:y=>g("password",y.target.value),className:`w-full pl-11 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${c.password?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter your password",autoComplete:"current-password",disabled:r.isLoading}),n.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:r.isLoading,children:o?n.jsx(Hn,{className:"w-5 h-5"}):n.jsx(Vn,{className:"w-5 h-5"})})]}),c.password&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),c.password]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:a.rememberMe,onChange:y=>g("rememberMe",y.target.checked),className:"rounded border-gray-300 text-gray-900 focus:ring-gray-900 transition-colors duration-200",disabled:r.isLoading}),n.jsx("span",{className:"text-sm text-gray-700",children:"Remember me"})]}),n.jsx("button",{type:"button",onClick:e,className:"text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",disabled:r.isLoading,children:"Forgot password?"})]}),n.jsx("button",{type:"submit",disabled:r.isLoading,className:"w-full bg-gray-900 text-white py-3 rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2 font-medium",children:r.isLoading?n.jsxs(n.Fragment,{children:[n.jsx(Dt,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{children:"Signing in..."})]}):n.jsx("span",{children:"Sign in"})}),n.jsx("div",{className:"text-center pt-4 border-t border-gray-100",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",n.jsx("button",{type:"button",onClick:t,className:"text-gray-900 hover:text-gray-700 font-medium transition-colors duration-200",disabled:r.isLoading,children:"Sign up"})]})})]})]})},Wv=({onSwitchToLogin:t})=>{const{authState:e,signup:r}=Et(),[s,a]=S.useState({username:"",email:"",name:"",password:"",confirmPassword:"",department:""}),[i,o]=S.useState(!1),[l,c]=S.useState(!1),[d,u]=S.useState({}),[m,g]=S.useState({score:0,feedback:[]}),p=["What was the name of your first pet?","What city were you born in?","What was your mother's maiden name?","What was the name of your elementary school?","What was your first car's make and model?","What street did you grow up on?","What was your childhood nickname?","What is your favorite movie?","What was the name of your first boss?","What is your favorite food?"];S.useEffect(()=>{if(e.error){const h=setTimeout(()=>{u({})},100);return()=>clearTimeout(h)}},[s,e.error]),S.useEffect(()=>{const h=s.password;let v=0;const b=[];h.length>=8?v+=1:h.length>0&&b.push("At least 8 characters"),/[a-z]/.test(h)?v+=1:h.length>0&&b.push("One lowercase letter"),/[A-Z]/.test(h)?v+=1:h.length>0&&b.push("One uppercase letter"),/\d/.test(h)?v+=1:h.length>0&&b.push("One number"),/[!@#$%^&*(),.?":{}|<>]/.test(h)?v+=1:h.length>0&&b.push("One special character"),g({score:v,feedback:b})},[s.password]);const y=()=>{const h={};return s.username.trim()?s.username.length<3?h.username="Username must be at least 3 characters":/^[a-zA-Z0-9._-]+$/.test(s.username)||(h.username="Username can only contain letters, numbers, dots, hyphens, and underscores"):h.username="Username is required",s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(h.email="Please enter a valid email address"):h.email="Email is required",s.name.trim()?s.name.trim().length<2&&(h.name="Name must be at least 2 characters"):h.name="Full name is required",s.password?m.score<4&&(h.password="Password is too weak"):h.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(h.confirmPassword="Passwords do not match"):h.confirmPassword="Please confirm your password",s.securityQuestion1||(h.securityQuestion1="Please select a security question"),(!s.securityAnswer1||s.securityAnswer1.trim().length<2)&&(h.securityAnswer1="Answer must be at least 2 characters"),s.securityQuestion2||(h.securityQuestion2="Please select a security question"),(!s.securityAnswer2||s.securityAnswer2.trim().length<2)&&(h.securityAnswer2="Answer must be at least 2 characters"),s.securityQuestion1&&s.securityQuestion2&&s.securityQuestion1===s.securityQuestion2&&(h.securityQuestion2="Please select different security questions"),u(h),Object.keys(h).length===0},j=async h=>{if(h.preventDefault(),!!y())try{await r(s)}catch{}},N=(h,v)=>{a(b=>({...b,[h]:v})),d[h]&&u(b=>({...b,[h]:""}))},x=()=>m.score<=1?"bg-red-500":m.score<=2?"bg-orange-500":m.score<=3?"bg-yellow-500":m.score<=4?"bg-green-500":"bg-green-600",f=()=>m.score<=1?"Very Weak":m.score<=2?"Weak":m.score<=3?"Fair":m.score<=4?"Good":"Strong";return n.jsxs("div",{className:"w-full max-w-md mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(be,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-semibold text-gray-900 tracking-tight",children:"Create account"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Join the F.I.T.S team today"})]}),n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.error&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3",children:[n.jsx(Ue,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Signup failed"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:e.error})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:s.name,onChange:h=>N("name",h.target.value),className:`w-full pl-11 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${d.name?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter your full name",autoComplete:"name",disabled:e.isLoading})]}),d.name&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.name]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),n.jsxs("div",{className:"relative",children:[n.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:s.username,onChange:h=>N("username",h.target.value.toLowerCase()),className:`w-full pl-11 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${d.username?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Choose a username",autoComplete:"username",disabled:e.isLoading})]}),d.username&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.username]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Letters, numbers, dots, hyphens, and underscores only"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(Wn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",value:s.email,onChange:h=>N("email",h.target.value),className:`w-full pl-11 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${d.email?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter your email address",autoComplete:"email",disabled:e.isLoading})]}),d.email&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.email]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department (Optional)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsxs("select",{value:s.department,onChange:h=>N("department",h.target.value),className:"w-full pl-11 pr-10 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 appearance-none hover:border-gray-300",disabled:e.isLoading,children:[n.jsx("option",{value:"",children:"Select a department"}),ge.map(h=>n.jsx("option",{value:h.id,children:h.name},h.id))]}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Security Questions"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Please select and answer two security questions. These will be used to verify your identity if you forget your password."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Security Question 1 *"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsxs("select",{value:s.securityQuestion1,onChange:h=>N("securityQuestion1",h.target.value),className:`w-full pl-4 pr-10 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 appearance-none ${d.securityQuestion1?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,disabled:e.isLoading,children:[n.jsx("option",{value:"",children:"Select a security question"}),p.filter(h=>h!==s.securityQuestion2).map(h=>n.jsx("option",{value:h,children:h},h))]}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),n.jsx("input",{type:"text",value:s.securityAnswer1,onChange:h=>N("securityAnswer1",h.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${d.securityAnswer1?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter your answer",disabled:e.isLoading||!s.securityQuestion1}),d.securityQuestion1&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.securityQuestion1]}),d.securityAnswer1&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.securityAnswer1]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Security Question 2 *"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsxs("select",{value:s.securityQuestion2,onChange:h=>N("securityQuestion2",h.target.value),className:`w-full pl-4 pr-10 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 appearance-none ${d.securityQuestion2?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,disabled:e.isLoading,children:[n.jsx("option",{value:"",children:"Select a security question"}),p.filter(h=>h!==s.securityQuestion1).map(h=>n.jsx("option",{value:h,children:h},h))]}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),n.jsx("input",{type:"text",value:s.securityAnswer2,onChange:h=>N("securityAnswer2",h.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${d.securityAnswer2?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Enter your answer",disabled:e.isLoading||!s.securityQuestion2}),d.securityQuestion2&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.securityQuestion2]}),d.securityAnswer2&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.securityAnswer2]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:i?"text":"password",value:s.password,onChange:h=>N("password",h.target.value),className:`w-full pl-11 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${d.password?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Create a strong password",autoComplete:"new-password",disabled:e.isLoading}),n.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:e.isLoading,children:i?n.jsx(Hn,{className:"w-5 h-5"}):n.jsx(Vn,{className:"w-5 h-5"})})]}),s.password&&n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Password strength"}),n.jsx("span",{className:`text-xs font-medium ${m.score<=2?"text-red-600":m.score<=3?"text-yellow-600":"text-green-600"}`,children:f()})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${x()}`,style:{width:`${m.score/5*100}%`}})}),m.feedback.length>0&&n.jsxs("div",{className:"mt-1",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Missing:"}),n.jsx("ul",{className:"text-xs text-gray-500 list-disc list-inside",children:m.feedback.map((h,v)=>n.jsx("li",{children:h},v))})]})]}),d.password&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.password]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:l?"text":"password",value:s.confirmPassword,onChange:h=>N("confirmPassword",h.target.value),className:`w-full pl-11 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 ${d.confirmPassword?"border-red-300 bg-red-50":s.confirmPassword&&s.password===s.confirmPassword?"border-green-300 bg-green-50":"border-gray-200 hover:border-gray-300"}`,placeholder:"Confirm your password",autoComplete:"new-password",disabled:e.isLoading}),n.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:e.isLoading,children:l?n.jsx(Hn,{className:"w-5 h-5"}):n.jsx(Vn,{className:"w-5 h-5"})})]}),s.confirmPassword&&s.password===s.confirmPassword&&!d.confirmPassword&&n.jsxs("p",{className:"text-sm text-green-600 mt-1 flex items-center",children:[n.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Passwords match"]}),d.confirmPassword&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center",children:[n.jsx(Ue,{className:"w-4 h-4 mr-1"}),d.confirmPassword]})]}),n.jsx("button",{type:"submit",disabled:e.isLoading,className:"w-full bg-gray-900 text-white py-3 rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2 font-medium",children:e.isLoading?n.jsxs(n.Fragment,{children:[n.jsx(Dt,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{children:"Creating account..."})]}):n.jsx("span",{children:"Create account"})}),n.jsx("div",{className:"text-center pt-4 border-t border-gray-100",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",n.jsx("button",{type:"button",onClick:t,className:"text-gray-900 hover:text-gray-700 font-medium transition-colors duration-200",disabled:e.isLoading,children:"Sign in"})]})})]})]})},qv=({onSwitchToLogin:t})=>{const{resetPassword:e,verifySecurityQuestions:r,resetPasswordWithSecurity:s}=Et(),[a,i]=S.useState("email"),[o,l]=S.useState(""),[c,d]=S.useState([]),[u,m]=S.useState([]),[g,p]=S.useState(""),[y,j]=S.useState(""),[N,x]=S.useState(!1),[f,h]=S.useState(!1),[v,b]=S.useState(!1),[w,_]=S.useState(""),R=async W=>{if(W.preventDefault(),!o.trim()){_("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){_("Please enter a valid email address");return}b(!0),_("");try{const J=[{question:"What was the name of your first pet?",answer:""},{question:"What city were you born in?",answer:""}];d(J),m(J.map(k=>({question:k.question,answer:""}))),i("security")}catch(J){_(J instanceof Error?J.message:"Failed to retrieve security questions")}finally{b(!1)}},A=async W=>{if(W.preventDefault(),u.some(k=>!k.answer.trim())){_("Please answer all security questions");return}b(!0),_("");try{await r(o,u)?i("password"):_("Security question answers are incorrect. Please try again.")}catch(k){_(k instanceof Error?k.message:"Failed to verify security questions")}finally{b(!1)}},C=async W=>{if(W.preventDefault(),!g){_("New password is required");return}if(g.length<8){_("Password must be at least 8 characters long");return}if(!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(g)){_("Password must contain at least one uppercase letter, one lowercase letter, and one number");return}if(g!==y){_("Passwords do not match");return}b(!0),_("");try{await s({email:o,securityQuestions:u,newPassword:g,confirmPassword:y}),i("success")}catch(J){_(J instanceof Error?J.message:"Failed to reset password")}finally{b(!1)}},U=(W,J)=>{const k=[...u];k[W]={...k[W],answer:J},m(k)},B=()=>n.jsxs("div",{className:"w-full max-w-md mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(Wn,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-semibold text-gray-900 tracking-tight",children:"Reset password"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your email to continue"})]}),n.jsxs("form",{onSubmit:R,className:"space-y-6",children:[w&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3",children:[n.jsx(Ue,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Error"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:w})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(Wn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",value:o,onChange:W=>{l(W.target.value),_("")},className:"w-full pl-11 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 hover:border-gray-300",placeholder:"Enter your email address",autoComplete:"email",disabled:v})]})]}),n.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gray-900 text-white py-3 rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2 font-medium",children:v?n.jsxs(n.Fragment,{children:[n.jsx(Dt,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{children:"Checking email..."})]}):n.jsx("span",{children:"Continue"})}),n.jsxs("button",{type:"button",onClick:t,className:"w-full flex items-center justify-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200 py-2",disabled:v,children:[n.jsx(Ha,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to sign in"})]})]})]}),F=()=>n.jsxs("div",{className:"w-full max-w-md mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(cr,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-semibold text-gray-900 tracking-tight",children:"Security Questions"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Answer your security questions to continue"}),n.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ut,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Demo Security Answers"}),n.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:[n.jsx("strong",{children:"For admin@fleek.com:"}),n.jsx("br",{}),"• First pet: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"fluffy"}),n.jsx("br",{}),"• Birth city: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"new york"}),n.jsx("br",{}),n.jsx("strong",{children:"For sarah@fleek.com:"}),n.jsx("br",{}),"• First pet: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"buddy"}),n.jsx("br",{}),"• Birth city: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"chicago"})]})]})]})})]}),n.jsxs("form",{onSubmit:A,className:"space-y-6",children:[w&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3",children:[n.jsx(Ue,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Error"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:w})]})]}),c.map((W,J)=>{var k;return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:W.question}),n.jsx("input",{type:"text",value:((k=u[J])==null?void 0:k.answer)||"",onChange:T=>U(J,T.target.value),className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 hover:border-gray-300",placeholder:"Enter your answer",disabled:v})]},J)}),n.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gray-900 text-white py-3 rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2 font-medium",children:v?n.jsxs(n.Fragment,{children:[n.jsx(Dt,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{children:"Verifying answers..."})]}):n.jsx("span",{children:"Verify Answers"})}),n.jsxs("button",{type:"button",onClick:()=>i("email"),className:"w-full flex items-center justify-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200 py-2",disabled:v,children:[n.jsx(Ha,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to email"})]})]})]}),te=()=>n.jsxs("div",{className:"w-full max-w-md mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(cr,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-semibold text-gray-900 tracking-tight",children:"New Password"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Create a new secure password"})]}),n.jsxs("form",{onSubmit:C,className:"space-y-6",children:[w&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3",children:[n.jsx(Ue,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Error"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:w})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:N?"text":"password",value:g,onChange:W=>{p(W.target.value),_("")},className:"w-full pl-11 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 hover:border-gray-300",placeholder:"Enter new password",disabled:v}),n.jsx("button",{type:"button",onClick:()=>x(!N),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:v,children:N?n.jsx(Hn,{className:"w-5 h-5"}):n.jsx(Vn,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 8 characters with uppercase, lowercase, and number"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:f?"text":"password",value:y,onChange:W=>{j(W.target.value),_("")},className:`w-full pl-11 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200 hover:border-gray-300 ${y&&g===y?"border-green-300 bg-green-50":"border-gray-200"}`,placeholder:"Confirm new password",disabled:v}),n.jsx("button",{type:"button",onClick:()=>h(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:v,children:f?n.jsx(Hn,{className:"w-5 h-5"}):n.jsx(Vn,{className:"w-5 h-5"})})]}),y&&g===y&&n.jsxs("p",{className:"text-sm text-green-600 mt-1 flex items-center",children:[n.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Passwords match"]})]}),n.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gray-900 text-white py-3 rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2 font-medium",children:v?n.jsxs(n.Fragment,{children:[n.jsx(Dt,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{children:"Resetting password..."})]}):n.jsx("span",{children:"Reset Password"})}),n.jsxs("button",{type:"button",onClick:()=>i("security"),className:"w-full flex items-center justify-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200 py-2",disabled:v,children:[n.jsx(Ha,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to security questions"})]})]})]}),ee=()=>n.jsxs("div",{className:"w-full max-w-md mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(Ut,{className:"w-8 h-8 text-green-600"})}),n.jsx("h1",{className:"text-2xl font-semibold text-gray-900 tracking-tight mb-4",children:"Password Reset Successful"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Your password has been successfully reset. You can now sign in with your new password."}),n.jsx("button",{onClick:t,className:"w-full bg-gray-900 text-white py-3 rounded-xl hover:bg-gray-800 transition-colors duration-200 font-medium",children:"Back to Sign In"})]});switch(a){case"email":return B();case"security":return F();case"password":return te();case"success":return ee();default:return B()}},Kv=({className:t})=>n.jsx("img",{src:xf.full,alt:"Fleek Logo",className:t}),Qv=({className:t})=>n.jsx("img",{src:xf.icon,alt:"Fleek Logo",className:t}),xf={full:"/joinfleek_logo.jpeg",icon:"/joinfleek_logo.jpeg",fullDark:"/joinfleek_logo.jpeg",iconDark:"/joinfleek_logo.jpeg"},vf={full:"Fleek",short:"F"},Gv=()=>{const[t,e]=S.useState("login"),r=()=>{switch(t){case"login":return n.jsx(Vv,{onSwitchToSignup:()=>e("signup"),onSwitchToForgotPassword:()=>e("forgot-password")});case"signup":return n.jsx(Wv,{onSwitchToLogin:()=>e("login")});case"forgot-password":return n.jsx(qv,{onSwitchToLogin:()=>e("login")});default:return null}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100 flex items-center justify-center p-4",children:n.jsx("div",{className:"w-full max-w-6xl mx-auto",children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[n.jsx("div",{className:"hidden lg:block",children:n.jsxs("div",{className:"max-w-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl flex items-center justify-center shadow-xl overflow-hidden",children:n.jsx(Kv,{className:"w-full h-full object-cover"})}),n.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full animate-pulse"})]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 bg-clip-text text-transparent tracking-tight",children:vf.full}),n.jsx("p",{className:"text-slate-500 font-medium",children:"Internal Ticketing System"})]})]}),n.jsx("h2",{className:"text-4xl font-bold text-slate-900 leading-tight mb-6",children:"Streamline your internal operations"}),n.jsx("p",{className:"text-xl text-slate-600 mb-8 leading-relaxed",children:"Manage tickets, track performance, and streamline internal workflows with our comprehensive internal ticketing system."}),n.jsx("div",{className:"space-y-4",children:[{icon:n.jsx(Jt,{className:"w-5 h-5"}),text:"Real-time collaboration and mentions",color:"text-blue-600"},{icon:n.jsx(gi,{className:"w-5 h-5"}),text:"Advanced analytics and reporting",color:"text-emerald-600"},{icon:n.jsx(ws,{className:"w-5 h-5"}),text:"Multi-department workflow management",color:"text-purple-600"},{icon:n.jsx(bn,{className:"w-5 h-5"}),text:"Auto-assignment and SLA tracking",color:"text-orange-600"},{icon:n.jsx(ft,{className:"w-5 h-5"}),text:"File attachments and order tracking",color:"text-red-600"}].map((s,a)=>n.jsxs("div",{className:"flex items-center space-x-4 group",children:[n.jsx("div",{className:`p-2 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl group-hover:scale-110 transition-transform duration-300 ${s.color}`,children:s.icon}),n.jsx("span",{className:"text-slate-700 font-medium group-hover:text-slate-900 transition-colors duration-200",children:s.text})]},a))}),n.jsxs("div",{className:"mt-12 relative",children:[n.jsx("div",{className:"absolute -top-4 -left-4 w-20 h-20 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-xl"}),n.jsx("div",{className:"absolute -bottom-4 -right-4 w-16 h-16 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 rounded-full blur-xl"})]})]})}),n.jsx("div",{className:"w-full",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-slate-200/60 p-8 lg:p-12 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-slate-50/50 rounded-3xl"}),n.jsx("div",{className:"lg:hidden text-center mb-8 relative z-10",children:n.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl flex items-center justify-center shadow-lg",children:n.jsx(pf,{className:"w-6 h-6 text-white"})}),n.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full animate-pulse"})]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-slate-900 to-slate-800 bg-clip-text text-transparent tracking-tight",children:"F.I.T.S"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Internal System"})]})]})}),n.jsx("div",{className:"relative z-10",children:r()}),n.jsx("div",{className:"absolute top-4 right-4 opacity-20",children:n.jsx(Pc,{className:"w-6 h-6 text-slate-400"})}),n.jsx("div",{className:"absolute bottom-4 left-4 opacity-20",children:n.jsx(bn,{className:"w-6 h-6 text-slate-400"})})]})})]})})})},Jv=({children:t})=>{const{authState:e}=Et();return e.isLoading?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Dt,{className:"w-8 h-8 animate-spin text-gray-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e.isAuthenticated?n.jsx(n.Fragment,{children:t}):n.jsx(Gv,{})};class Yv extends S.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by boundary:",e,r),this.setState({error:e,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:n.jsx("div",{className:"max-w-md w-full",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-red-200/60 p-8 text-center shadow-lg",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-100 to-red-200 rounded-2xl mx-auto mb-6 flex items-center justify-center",children:n.jsx(ct,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-3",children:"Something went wrong"}),n.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed",children:"We encountered an unexpected error. Don't worry, your data is safe."}),this.state.error&&n.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-left",children:[n.jsx("h3",{className:"text-sm font-semibold text-red-900 mb-2",children:"Error Details:"}),n.jsx("pre",{className:"text-xs text-red-700 overflow-auto max-h-32",children:this.state.error.message}),this.state.errorInfo&&n.jsxs("details",{className:"mt-2",children:[n.jsx("summary",{className:"text-xs text-red-600 cursor-pointer",children:"Stack Trace"}),n.jsx("pre",{className:"text-xs text-red-600 mt-1 overflow-auto max-h-32",children:this.state.errorInfo.componentStack})]})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsxs("button",{onClick:this.handleReset,className:"bg-gradient-to-r from-slate-900 to-slate-800 text-white px-6 py-3 rounded-xl hover:from-slate-800 hover:to-slate-700 transition-all duration-300 flex items-center space-x-2 shadow-lg hover:shadow-xl",children:[n.jsx(Us,{className:"w-4 h-4"}),n.jsx("span",{children:"Try Again"})]}),n.jsxs("button",{onClick:()=>window.location.reload(),className:"text-slate-600 hover:text-slate-900 px-6 py-3 rounded-xl hover:bg-slate-100 transition-all duration-300 flex items-center space-x-2",children:[n.jsx(Rv,{className:"w-4 h-4"}),n.jsx("span",{children:"Reload Page"})]})]})]})})}):this.props.children}}const ju=t=>{const e=new Date,r=e.getTime()-t.getTime(),s=r/(1e3*60*60),a=r/(1e3*60*60*24);return s<1?`${Math.floor(r/6e4)}m ago`:s<24?`${Math.floor(s)}h ago`:a<7?`${Math.floor(a)}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==e.getFullYear()?"numeric":void 0})},sr=t=>t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),Es=t=>t?new Date>t:!1,Xv=({isOpen:t,onClose:e,onNotificationClick:r,notifications:s,onMarkAsRead:a,onMarkAllAsRead:i})=>{const o=d=>{switch(d){case"assignment":return n.jsx(be,{className:"w-4 h-4 text-blue-600"});case"mention":return n.jsx(wr,{className:"w-4 h-4 text-emerald-600"});case"status_change":return n.jsx(Ut,{className:"w-4 h-4 text-purple-600"});case"reminder":return n.jsx(ft,{className:"w-4 h-4 text-orange-600"});case"sla_breach":return n.jsx(ct,{className:"w-4 h-4 text-red-600"});default:return n.jsx(Fr,{className:"w-4 h-4 text-slate-600"})}},l=d=>{switch(d){case"assignment":return"from-blue-50 to-blue-100 border-blue-200";case"mention":return"from-emerald-50 to-emerald-100 border-emerald-200";case"status_change":return"from-purple-50 to-purple-100 border-purple-200";case"reminder":return"from-orange-50 to-orange-100 border-orange-200";case"sla_breach":return"from-red-50 to-red-100 border-red-200";default:return"from-slate-50 to-slate-100 border-slate-200"}},c=s.filter(d=>!d.read).length;return t?n.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white/95 backdrop-blur-xl rounded-2xl shadow-xl border border-slate-200/60 z-50 overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl",children:n.jsx(Fr,{className:"w-4 h-4 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Notifications"}),c>0&&n.jsxs("p",{className:"text-xs text-slate-500",children:[c," unread"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[c>0&&n.jsx("button",{onClick:i,className:"text-xs text-slate-500 hover:text-slate-700 transition-colors duration-200 px-2 py-1 hover:bg-slate-100 rounded-lg",children:"Mark all read"}),n.jsx("button",{onClick:e,className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors duration-200",children:n.jsx(dt,{className:"w-4 h-4 text-slate-500"})})]})]})}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-100 to-slate-200 rounded-2xl mx-auto mb-4 flex items-center justify-center",children:n.jsx(Fr,{className:"w-6 h-6 text-slate-400"})}),n.jsx("h4",{className:"font-medium text-slate-900 mb-2",children:"All caught up!"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No new notifications"})]}):n.jsx("div",{className:"divide-y divide-slate-100",children:s.map(d=>n.jsx("div",{className:`group p-4 hover:bg-slate-50 cursor-pointer transition-all duration-200 ${d.read?"":"bg-gradient-to-r from-blue-50/50 to-indigo-50/50"}`,onClick:()=>{a(d.id),r(d.ticketId),e()},children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:`flex-shrink-0 mt-0.5 p-2 rounded-xl bg-gradient-to-r ${l(d.type)} border`,children:o(d.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate group-hover:text-slate-800 transition-colors duration-200",children:d.title}),n.jsxs("div",{className:"flex items-center space-x-2",children:[!d.read&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 animate-pulse"}),n.jsx(Pc,{className:"w-3 h-3 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]})]}),n.jsx("p",{className:"text-sm text-slate-600 mb-2 leading-relaxed",children:d.message}),n.jsxs("p",{className:"text-xs text-slate-500 flex items-center space-x-1",children:[n.jsx(ft,{className:"w-3 h-3"}),n.jsx("span",{children:sr(d.createdAt)})]})]})]})},d.id))})})]}):null},Zv=()=>{const[t,e]=S.useState(!1),r=[{icon:vi,label:"New Ticket",shortcut:"N",action:()=>console.log("New ticket")},{icon:Tc,label:"Quick Filter",shortcut:"F",action:()=>console.log("Filter")},{icon:xi,label:"Export",shortcut:"E",action:()=>console.log("Export")},{icon:gf,label:"Import",shortcut:"I",action:()=>console.log("Import")}];return n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>e(!t),className:"p-3.5 text-slate-400 hover:text-slate-600 transition-all duration-300 hover:bg-slate-100/60 rounded-2xl group",children:n.jsx(Jt,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"})}),t&&n.jsx("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white/95 backdrop-blur-xl rounded-2xl shadow-xl border border-slate-200/60 overflow-hidden z-50",children:n.jsx("div",{className:"p-2",children:r.map(({icon:s,label:a,shortcut:i,action:o},l)=>n.jsxs("button",{onClick:()=>{o(),e(!1)},className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-slate-50 rounded-xl transition-all duration-200 group",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(s,{className:"w-4 h-4 text-slate-500 group-hover:text-slate-700"}),n.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-slate-900",children:a})]}),n.jsx("kbd",{className:"px-2 py-1 text-xs bg-slate-100 border border-slate-200 rounded text-slate-500",children:i})]},l))})})]})},ey=({isOpen:t,onClose:e,onTicketSelect:r,onViewChange:s})=>{const[a,i]=S.useState(""),[o,l]=S.useState(0),c=S.useRef(null),u=[{type:"action",label:"Go to Tickets",action:()=>s("tickets"),icon:Pa},{type:"action",label:"Go to Analytics",action:()=>s("analytics"),icon:Pa},{type:"action",label:"Go to Settings",action:()=>s("settings"),icon:Pa}].filter(g=>g.label.toLowerCase().includes(a.toLowerCase())||g.sublabel&&g.sublabel.toLowerCase().includes(a.toLowerCase()));S.useEffect(()=>{t&&c.current&&c.current.focus()},[t]),S.useEffect(()=>{l(0)},[a]);const m=g=>{g.key==="ArrowDown"?(g.preventDefault(),l(p=>(p+1)%u.length)):g.key==="ArrowUp"?(g.preventDefault(),l(p=>(p-1+u.length)%u.length)):g.key==="Enter"&&(g.preventDefault(),u[o]&&(u[o].action(),e()))};return t?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center pt-32 z-50",children:n.jsx("div",{className:"w-full max-w-2xl mx-4",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-slate-200/60 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center px-6 py-4 border-b border-slate-100",children:[n.jsx(Cv,{className:"w-5 h-5 text-slate-400 mr-3"}),n.jsx("input",{ref:c,type:"text",value:a,onChange:g=>i(g.target.value),onKeyDown:m,placeholder:"Search tickets, users, or actions...",className:"flex-1 bg-transparent text-slate-900 placeholder-slate-400 outline-none text-lg"}),n.jsx("kbd",{className:"px-2 py-1 text-xs bg-slate-100 border border-slate-200 rounded text-slate-500",children:"ESC"})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:u.length===0?n.jsxs("div",{className:"px-6 py-8 text-center",children:[n.jsx(yi,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-slate-500",children:"No results found"})]}):n.jsx("div",{className:"py-2",children:u.map((g,p)=>n.jsxs("button",{onClick:()=>{g.action(),e()},className:`w-full flex items-center px-6 py-3 text-left transition-all duration-150 ${p===o?"bg-slate-50 border-r-2 border-blue-500":"hover:bg-slate-25"}`,children:[n.jsx(g.icon,{className:`w-4 h-4 mr-3 ${g.type==="ticket"?"text-blue-500":g.type==="user"?"text-emerald-500":"text-slate-400"}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-slate-900",children:g.label}),g.sublabel&&n.jsx("div",{className:"text-sm text-slate-500",children:g.sublabel})]}),n.jsx(Pa,{className:"w-4 h-4 text-slate-300"})]},p))})})]})})}):null},ty=({children:t,currentView:e,onViewChange:r,onTicketSelect:s,searchQuery:a="",onSearchChange:i})=>{var F,te,ee,W,J;const{authState:o,logout:l}=Et(),[c,d]=S.useState(!1),[u,m]=S.useState(!1),[g,p]=S.useState(!1),[y,j]=S.useState([]),[N,x]=S.useState(!1),[f,h]=S.useState(!1),[v,b]=S.useState(!1),w=(y||[]).filter(k=>!k.read).length,_=(y||[]).filter(k=>k.priority==="urgent"&&!k.read).length;S.useEffect(()=>{const k=T=>{(T.metaKey||T.ctrlKey)&&T.key==="k"&&(T.preventDefault(),p(!0)),T.key==="Escape"&&(p(!1),d(!1),m(!1))};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[]);const R=k=>{s&&s(k),r("tickets")},A=k=>{j(T=>T.map(L=>L.id===k?{...L,read:!0}:L))},C=()=>{j(k=>k.map(T=>({...T,read:!0})))},U=()=>{l(),m(!1)},B=()=>{document.fullscreenElement?(document.exitFullscreen(),h(!1)):(document.documentElement.requestFullscreen(),h(!0))};return n.jsxs("div",{className:`min-h-screen transition-all duration-300 ${N?"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900":"bg-gradient-to-br from-slate-50 via-white to-slate-50"}`,children:[n.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-xl border-b shadow-sm transition-all duration-300 ${N?"bg-slate-900/80 border-slate-700/60":"bg-white/80 border-slate-200/60"}`,children:n.jsx("div",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-8",children:[n.jsxs("div",{className:"flex items-center space-x-3 group cursor-pointer",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg transition-all duration-300 group-hover:scale-105 overflow-hidden ${N?"bg-gradient-to-br from-slate-700 to-slate-800":"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900"}`,children:n.jsx(Qv,{className:"w-full h-full object-cover"})}),n.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-br from-emerald-400 to-emerald-500 rounded-full animate-pulse"})]}),n.jsxs("div",{className:"hidden md:block",children:[n.jsx("h1",{className:`text-lg font-bold tracking-tight transition-colors duration-200 ${N?"text-white":"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 bg-clip-text text-transparent"}`,children:vf.full}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),n.jsx("p",{className:`text-xs transition-colors duration-200 ${N?"text-slate-400":"text-slate-500"}`,children:"Internal System"})]})]})]}),n.jsx("nav",{className:`flex items-center space-x-1 rounded-2xl p-1 backdrop-blur-sm transition-all duration-300 ${N?"bg-slate-800/60":"bg-slate-100/60"}`,children:[{key:"tickets",label:"Tickets",icon:pf},{key:"analytics",label:"Analytics",icon:gi},{key:"settings",label:"Settings",icon:Mv}].map(({key:k,label:T,icon:L})=>n.jsxs("button",{onClick:()=>r(k),className:`relative px-6 py-3 text-sm font-medium rounded-xl transition-all duration-300 flex items-center space-x-2 ${e===k?N?"bg-slate-700 text-white shadow-lg":"bg-white text-slate-900 shadow-lg":N?"text-slate-300 hover:text-white hover:bg-slate-700/50":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:[n.jsx(L,{className:"w-4 h-4"}),n.jsx("span",{children:T}),e===k&&n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl"})]},k))})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:`absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-300 blur-sm ${N?"bg-gradient-to-r from-blue-600/20 to-purple-600/20":"bg-gradient-to-r from-blue-500/20 to-purple-500/20"}`}),n.jsxs("div",{className:"relative",children:[n.jsx(yi,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 transition-colors duration-200 ${v?"text-blue-500":N?"text-slate-400 group-hover:text-slate-300":"text-slate-400 group-hover:text-slate-600"}`}),n.jsx("input",{type:"text",placeholder:"Search tickets, users, or use AI...",value:a,onChange:k=>i==null?void 0:i(k.target.value),onFocus:()=>b(!0),onBlur:()=>b(!1),className:`pl-12 pr-16 py-3.5 w-96 text-sm border rounded-2xl transition-all duration-300 backdrop-blur-sm ${v?N?"bg-slate-800/90 border-blue-500/30 ring-2 ring-blue-500/20 text-white":"bg-white/90 border-blue-500/30 ring-2 ring-blue-500/20 text-slate-900":N?"bg-slate-800/60 border-slate-700/60 text-slate-300 hover:bg-slate-800/80 hover:border-slate-600/60":"bg-white/80 border-slate-200/60 text-slate-900 hover:bg-white hover:border-slate-300/60"} placeholder-slate-400`}),n.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 flex items-center space-x-2",children:n.jsx("kbd",{className:`px-2 py-1 text-xs rounded border transition-colors duration-200 ${N?"bg-slate-700 border-slate-600 text-slate-300":"bg-slate-100 border-slate-200 text-slate-500"}`,children:"⌘K"})})]})]}),n.jsx(Zv,{}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>d(!c),className:`relative p-3.5 rounded-2xl transition-all duration-300 group ${N?"text-slate-400 hover:text-slate-200 hover:bg-slate-800/60":"text-slate-400 hover:text-slate-600 hover:bg-slate-100/60"}`,children:[n.jsx(Fr,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),w>0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`absolute -top-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center font-medium text-xs shadow-lg animate-pulse ${_>0?"bg-gradient-to-r from-red-500 to-red-600 text-white":"bg-gradient-to-r from-blue-500 to-blue-600 text-white"}`,children:w>9?"9+":w}),_>0&&n.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500/20 rounded-full animate-ping"})]})]}),n.jsx(Xv,{isOpen:c,onClose:()=>d(!1),onNotificationClick:R,notifications:y,onMarkAsRead:A,onMarkAllAsRead:C})]}),n.jsx("button",{onClick:()=>x(!N),className:`p-3.5 rounded-2xl transition-all duration-300 ${N?"text-slate-400 hover:text-slate-200 hover:bg-slate-800/60":"text-slate-400 hover:text-slate-600 hover:bg-slate-100/60"}`,children:N?n.jsx(mf,{className:"w-5 h-5"}):n.jsx(uf,{className:"w-5 h-5"})}),n.jsx("button",{onClick:B,className:`p-3.5 rounded-2xl transition-all duration-300 ${N?"text-slate-400 hover:text-slate-200 hover:bg-slate-800/60":"text-slate-400 hover:text-slate-600 hover:bg-slate-100/60"}`,children:f?n.jsx(Uv,{className:"w-5 h-5"}):n.jsx(Lv,{className:"w-5 h-5"})}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>m(!u),className:`flex items-center space-x-3 p-2 rounded-2xl transition-all duration-300 group ${N?"hover:bg-slate-800/60":"hover:bg-slate-100/60"}`,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 group-hover:shadow-md ${N?"bg-gradient-to-br from-slate-700 to-slate-800":"bg-gradient-to-br from-slate-200 to-slate-300"}`,children:n.jsx(be,{className:`w-5 h-5 ${N?"text-slate-300":"text-slate-600"}`})}),n.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-gradient-to-br from-emerald-400 to-emerald-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:`text-sm font-semibold transition-colors duration-200 ${N?"text-slate-200 group-hover:text-white":"text-slate-700 group-hover:text-slate-900"}`,children:(F=o.user)==null?void 0:F.name}),n.jsx("div",{className:`text-xs capitalize ${N?"text-slate-400":"text-slate-500"}`,children:(te=o.user)==null?void 0:te.role})]})]}),u&&n.jsxs("div",{className:`absolute top-full right-0 mt-2 w-80 rounded-3xl shadow-xl border overflow-hidden backdrop-blur-xl transition-all duration-300 ${N?"bg-slate-800/95 border-slate-700/60":"bg-white/95 border-slate-200/60"}`,children:[n.jsx("div",{className:`p-6 border-b ${N?"border-slate-700":"border-slate-100"}`,children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${N?"bg-gradient-to-br from-slate-700 to-slate-800":"bg-gradient-to-br from-slate-200 to-slate-300"}`,children:n.jsx(be,{className:`w-7 h-7 ${N?"text-slate-300":"text-slate-600"}`})}),n.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gradient-to-br from-emerald-400 to-emerald-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`font-semibold ${N?"text-white":"text-slate-900"}`,children:(ee=o.user)==null?void 0:ee.name}),n.jsx("div",{className:`text-sm ${N?"text-slate-400":"text-slate-500"}`,children:(W=o.user)==null?void 0:W.email}),n.jsxs("div",{className:"text-xs capitalize mt-1 flex items-center space-x-1 text-slate-400",children:[n.jsx(zn,{className:"w-3 h-3"}),n.jsx("span",{children:(J=o.user)==null?void 0:J.role})]})]})]})}),n.jsx("div",{className:"p-2",children:n.jsxs("button",{onClick:U,className:`w-full flex items-center space-x-3 px-4 py-3 text-left rounded-2xl transition-all duration-200 group ${N?"text-red-400 hover:bg-red-500/10 hover:text-red-300":"text-red-600 hover:bg-red-50 hover:text-red-700"}`,children:[n.jsx($v,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200"}),n.jsx("span",{className:"font-medium",children:"Sign out"})]})})]})]})]})]})})}),n.jsx("main",{className:"relative",children:t}),n.jsx(ey,{isOpen:g,onClose:()=>p(!1),onTicketSelect:s,onViewChange:r}),(c||u)&&n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{d(!1),m(!1)}})]})},Rc=({onFilesSelected:t,maxFiles:e=5,acceptedTypes:r=["image/*","video/*",".pdf",".doc",".docx",".xls",".xlsx",".txt"],className:s=""})=>{const a=S.useRef(null),[i,o]=S.useState(!1),l=m=>{m.preventDefault(),m.stopPropagation(),m.type==="dragenter"||m.type==="dragover"?o(!0):m.type==="dragleave"&&o(!1)},c=m=>{if(m.preventDefault(),m.stopPropagation(),o(!1),m.dataTransfer.files&&m.dataTransfer.files[0]){const g=Array.from(m.dataTransfer.files).slice(0,e);t(g)}},d=m=>{if(m.target.files&&m.target.files[0]){const g=Array.from(m.target.files).slice(0,e);t(g)}},u=()=>{var m;(m=a.current)==null||m.click()};return n.jsxs("div",{className:s,children:[n.jsxs("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all duration-200 cursor-pointer ${i?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onDragEnter:l,onDragLeave:l,onDragOver:l,onDrop:c,onClick:u,children:[n.jsx(gf,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Drop files here or click to upload"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Images, videos, documents (max ",e," files)"]})]}),n.jsx("input",{ref:a,type:"file",multiple:!0,accept:r.join(","),onChange:d,className:"hidden"})]})},qn=({attachments:t,onRemove:e,showRemove:r=!1})=>{const s=i=>{switch(i){case"image":return n.jsx(Ov,{className:"w-4 h-4 text-blue-600"});case"video":return n.jsx(Bv,{className:"w-4 h-4 text-purple-600"});case"document":return n.jsx(Tv,{className:"w-4 h-4 text-green-600"});default:return n.jsx(Pv,{className:"w-4 h-4 text-gray-600"})}},a=i=>{if(i===0)return"0 Bytes";const o=1024,l=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(i)/Math.log(o));return parseFloat((i/Math.pow(o,c)).toFixed(2))+" "+l[c]};return t.length===0?null:n.jsx("div",{className:"space-y-2",children:t.map(i=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[s(i.type),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),n.jsx("p",{className:"text-xs text-gray-500",children:a(i.size)})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[i.type==="image"&&n.jsx("img",{src:i.url,alt:i.name,className:"w-8 h-8 rounded object-cover"}),r&&e&&n.jsx("button",{onClick:()=>e(i.id),className:"p-1 hover:bg-gray-200 rounded transition-colors duration-200",children:n.jsx(dt,{className:"w-4 h-4 text-gray-500"})})]})]},i.id))})},bi=class bi{static generateTags(e,r,s,a){const i=`${e} ${r} ${s||""}`.toLowerCase(),o=new Set,l=this.extractKeywords(i);s&&this.getCategoryTags(s).forEach(m=>o.add(m)),a&&this.getValueTags(a).forEach(m=>o.add(m)),l.forEach(u=>{(this.commonTags.has(u)||this.tagHistory.has(u))&&o.add(u)}),this.getContextualTags(i).forEach(u=>o.add(u));const d=Array.from(o).slice(0,5);return d.forEach(u=>{const m=this.tagHistory.get(u)||0;this.tagHistory.set(u,m+1)}),d}static extractKeywords(e){const r=new Set(["the","is","at","which","on","and","a","to","are","as","was","were","been","be","have","has","had","do","does","did","will","would","could","should","may","might","must","can","shall","for","of","with","by"]);return e.split(/\s+/).map(s=>s.replace(/[^\w]/g,"")).filter(s=>s.length>2&&!r.has(s)).slice(0,10)}static getCategoryTags(e){return{"TID live but stuck or delayed":["delayed","stuck","shipping"],"Missing Items":["missing","incomplete"],"Order Lost by courier":["lost","courier","shipping"],"Order stuck in customs":["customs","international","delayed"],Redelivery:["redelivery","shipping"],"Damage in transit":["damaged","shipping","quality"],"Order swap":["swap","exchange"],Cancellation:["cancelled","refund"],"Discount vouchers":["discount","voucher","promotion"],"Refunds not processed":["refund","payment","processing"],"QC HOLD- Seller not responding":["qc-hold","seller","quality"],"PQ- authenticity":["authenticity","quality","verification"],"Tech related issues":["technical","system","bug"]}[e]||[]}static getValueTags(e){return e>1e3?["high-value"]:e>500?["medium-value"]:e>100?["standard-value"]:["low-value"]}static getContextualTags(e){const r=[];return/urgent|asap|immediately|critical/i.test(e)&&r.push("urgent"),/payment|refund|money|charge|billing/i.test(e)&&r.push("payment"),/quality|defect|broken|damaged|wrong/i.test(e)&&r.push("quality"),/shipping|delivery|courier|tracking|lost/i.test(e)&&r.push("shipping"),r}static getPopularTags(){return Array.from(this.tagHistory.entries()).sort((e,r)=>r[1]-e[1]).slice(0,20).map(([e])=>e)}static getSuggestedTags(e){const r=e.toLowerCase(),s=[];return this.commonTags.forEach(a=>{a.includes(r)&&s.push(a)}),this.tagHistory.forEach((a,i)=>{i.includes(r)&&!s.includes(i)&&s.push(i)}),s.slice(0,10)}};bi.tagHistory=new Map,bi.commonTags=new Set(["urgent","refund","quality","shipping","payment","authentication","missing","damaged","delayed","cancelled","swap","customs","courier","seller","buyer","technical","affiliate","discount"]);let wi=bi;const ry="https://fleek-ticketing.onrender.com";class sy{async request(e,r={}){const s=`${ry}${e}`;try{const a=new AbortController,i=setTimeout(()=>a.abort(),3e4),o=await fetch(s,{headers:{"Content-Type":"application/json",...r.headers},signal:a.signal,...r});if(clearTimeout(i),!o.ok)throw new Error(`HTTP error! status: ${o.status} - ${o.statusText}`);return await o.json()}catch(a){if(console.error(`API request failed for ${e}:`,a),a instanceof Error){if(a.name==="AbortError")throw new Error("Request timed out - please check your internet connection or try again later");if(a.message.includes("Failed to fetch"))throw new Error("Unable to connect to server - please check if the backend is running")}throw a}}async getOrders(){return console.warn("getOrders() is deprecated. Use searchOrders() for better performance."),[]}async searchOrders(e,r=50){var s,a;try{console.log(`🚀 Fast cached search for: "${e}"`);const i=await this.request(`/api/search/orders?q=${encodeURIComponent(e)}&limit=${r}`);if(i.success&&i.data)return console.log(`✅ Found ${i.data.length} results from cached data`),console.log(`📊 Cache info: ${(s=i.cacheInfo)==null?void 0:s.totalOrders} total orders, updated ${(a=i.cacheInfo)==null?void 0:a.lastUpdated}`),{orders:i.data,suggestions:i.suggestions||[],searchStats:i.searchStats,cacheInfo:i.cacheInfo};throw new Error(i.error||i.message||"Failed to search orders")}catch(i){throw console.error("Error searching cached orders:",i),i}}async getOrder(e){try{const r=await this.request(`/api/orders/${e}`);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to fetch order")}catch(r){throw console.error(`Error fetching order ${e}:`,r),r}}async checkHealth(){try{return await this.request("/health")}catch(e){throw console.error("Health check failed:",e),e}}async checkDebug(){try{return await this.request("/debug")}catch(e){throw console.error("Debug check failed:",e),e}}}const ny=new sy,ay=()=>{const[t,e]=S.useState([]),[r,s]=S.useState([]),[a,i]=S.useState(!1),[o,l]=S.useState(null),[c,d]=S.useState(null),[u,m]=S.useState(null),[g,p]=S.useState(!1),[y,j]=S.useTransition(),N=S.useRef(""),x=S.useRef(null),f=S.useCallback(async w=>{if(console.log(`🔍 Starting non-blocking search for: "${w}"`),N.current=w,x.current&&x.current.abort(),!w||w.trim().length===0){j(()=>{e([]),s([]),l(null),d(null),p(!1)});return}const _=new AbortController;x.current=_;try{j(()=>{i(!0),l(null),p(!1)});const R=await ny.searchOrders(w,50);if(_.signal.aborted||N.current!==w){console.log(`🚫 Search cancelled or superseded for: "${w}"`);return}j(()=>{e(R.orders),s(R.suggestions),d(R.searchStats),m(R.cacheInfo),i(!1)}),console.log(`✅ Non-blocking search completed: ${R.orders.length} results`)}catch(R){if(_.signal.aborted){console.log(`🚫 Search aborted for: "${w}"`);return}const A=R instanceof Error?R.message:"Failed to search orders";j(()=>{l(A),e([]),s([]),d(null),i(!1),p(!1)}),console.error("Non-blocking search error:",R)}},[j]),h=async w=>{await f(w)},v=S.useCallback(w=>{console.log(`🔍 Searching: "${w}"`),f(w)},[f]),b=S.useCallback(()=>{x.current&&x.current.abort(),N.current="",j(()=>{e([]),s([]),l(null),i(!1),d(null),m(null),p(!1)})},[j]);return{orders:t,suggestions:r,loading:a,error:o,searchStats:c,cacheInfo:u,searchOrders:v,searchOrdersImmediate:h,clearSearch:b,isTyping:g}},iy=["GBP","USD","EUR","CAD","AUD","JPY","CNY","INR"],oy=({isOpen:t,onClose:e,onSubmit:r})=>{var $c,Lc,Uc,Ic,Mc,Fc,zc,Bc,Hc,Vc,Wc;const{authState:s}=Et(),{users:a}=Hs(),{orders:i,suggestions:o,loading:l,error:c,searchStats:d,cacheInfo:u,searchOrders:m,searchOrdersImmediate:g,clearSearch:p,isTyping:y}=ay(),[j,N]=S.useState(""),[x,f]=S.useState(""),[h,v]=S.useState("medium"),[b,w]=S.useState(ge[0].id),[_,R]=S.useState(""),[A,C]=S.useState(""),[U,B]=S.useState(!1),[F,te]=S.useState(""),[ee,W]=S.useState(""),[J,k]=S.useState([]),[T,L]=S.useState("internal"),[I,P]=S.useState(""),[O,H]=S.useState(""),[re,Y]=S.useState(!1),[Fe,Gr]=S.useState(!1),[Pe,_r]=S.useState(""),[pt,ta]=S.useState(""),[ra,Sr]=S.useState("GBP"),[ae,Cr]=S.useState(""),[sa,na]=S.useState([]),[aa,Vs]=S.useState([]),gt=a;S.useEffect(()=>{console.log("🔄 NewTicketModal: Users from DataContext:",{userCount:gt.length,usersData:gt,userNames:gt.map(E=>E.name),userDepartments:gt.map(E=>{var Q;return((Q=E.department)==null?void 0:Q.name)||"No Dept"})})},[gt]);const Ws=S.useRef(null),Jr=S.useRef(null),ia=S.useDeferredValue(i),$=S.useDeferredValue(o),G=ia.map(E=>E.orderLineId);S.useEffect(()=>{Gr(!0);const E=setTimeout(()=>{Gr(!1),O.trim().length>=2?m(O.trim()):O.trim().length===0&&p()},300);return()=>{clearTimeout(E)}},[O]),S.useEffect(()=>{const E=Q=>{Ws.current&&!Ws.current.contains(Q.target)&&B(!1),Jr.current&&!Jr.current.contains(Q.target)&&Y(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),S.useEffect(()=>{if(j||x||ae){const E=wi.generateTags(j,x,ae,Pe?parseFloat(Pe):void 0);na(E),te(E.join(", "))}},[j,x,ae,Pe]),S.useEffect(()=>{var E;if(F){const Q=((E=F.split(",").pop())==null?void 0:E.trim())||"";if(Q.length>0){const Z=wi.getSuggestedTags(Q);Vs(Z)}else Vs([])}},[F]);const me=E=>{const Q=E.map(Z=>({id:`temp-${Date.now()}-${Math.random()}`,name:Z.name,url:URL.createObjectURL(Z),type:Z.type.startsWith("image/")?"image":Z.type.startsWith("video/")?"video":"document",size:Z.size,uploadedAt:new Date,uploadedBy:s.user||{id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",name:"Admin",email:"admin@fits.com",department:ge[0],role:"admin"}}));k(Z=>[...Z,...Q])},It=E=>{k(Q=>Q.filter(Z=>Z.id!==E))},De=(E,Q)=>{const Z=parseFloat(E),Xr=parseFloat(Q);return Z&&Xr?Z<=Xr:!0},xt=E=>{var Zr,qc;if(E.preventDefault(),pt&&Pe&&!De(pt,Pe)){alert("Refund value cannot be greater than order value");return}const Q=ge.find(vt=>vt.id===b),Z=_?gt.find(vt=>vt.id===_):void 0,Xr=F.split(",").map(vt=>vt.trim()).filter(vt=>vt.length>0);r({title:j,description:x,priority:h,department:Q,assignee:Z,tags:Xr,dueDate:ee?new Date(ee):void 0,attachments:J,issueType:T,orderNumber:I.trim()||void 0,orderValue:Pe?parseFloat(Pe):void 0,refundValue:pt?parseFloat(pt):void 0,currency:Pe?ra:void 0,issueCategory:ae||void 0,slaHours:ae?(Zr=Ne.find(vt=>vt.name===ae))==null?void 0:Zr.slaHours:Q==null?void 0:Q.slaHours,pocName:ae?(qc=Ne.find(vt=>vt.name===ae))==null?void 0:qc.poc:void 0}),ue(),e()},oa=async E=>{P(E),H(E),Y(!1);const Q=i.find(Z=>Z.orderLineId===E);Q&&(_r(Q.orderValue?Q.orderValue.toString():"0"),Sr(Q.currency))},ue=()=>{N(""),f(""),v("medium"),w(ge[0].id),R(""),C(""),B(!1),te(""),W(""),k([]),L("internal"),P(""),H(""),Y(!1),_r(""),ta(""),Sr("GBP"),Cr(""),na([]),Vs([]),Cr("")},Yr=gt.filter(E=>{const Q=!b||E.department.id===b,Z=A===""||E.name.toLowerCase().includes(A.toLowerCase())||E.email.toLowerCase().includes(A.toLowerCase())||E.department.name.toLowerCase().includes(A.toLowerCase());return Q&&Z});console.log("🔧 NewTicketModal User Filter Debug:",{totalUsers:gt.length,selectedDepartmentId:b,selectedDepartmentName:($c=ge.find(E=>E.id===b))==null?void 0:$c.name,filteredUsersCount:Yr.length,filteredUserNames:Yr.map(E=>E.name),assigneeSearch:A});const qs=G,Ks=ge.map(E=>({department:E,users:Yr.filter(Q=>Q.department.id===E.id)})).filter(E=>E.users.length>0),la=gt.find(E=>E.id===_),nt=ge.find(E=>E.id===b),Ne=(nt==null?void 0:nt.issueCategories)||[],wf=E=>{R(E.id),C(E.name),B(!1)},Oc=()=>{R(""),C(""),B(!1)},bf=E=>{C(E),B(!0),E.trim()||R("")},jf=()=>{P(""),H(""),_r(""),Sr("GBP"),Y(!1),p()},Nf=E=>{H(E),P(E),Y(!0)},Dc=T==="buyer"||T==="seller";return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Ticket"}),n.jsx("button",{onClick:()=>{ue(),e()},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:n.jsx(dt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("form",{onSubmit:xt,className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),n.jsx("input",{type:"text",value:j,onChange:E=>N(E.target.value),className:"w-full border border-gray-200 rounded-lg px-4 py-3 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200",placeholder:"Brief description of the issue",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),n.jsx("textarea",{value:x,onChange:E=>f(E.target.value),rows:4,className:"w-full border border-gray-200 rounded-lg px-4 py-3 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200 resize-none",placeholder:"Detailed description of the issue",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Issue Type *"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:T,onChange:E=>{L(E.target.value),Cr(""),E.target.value==="internal"&&(P(""),H(""),_r(""),Sr("GBP"))},className:"w-full appearance-none border border-gray-200 rounded-lg px-4 py-3 pr-10 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200",required:!0,children:[n.jsx("option",{value:"buyer",children:"🛒 Buyer"}),n.jsx("option",{value:"seller",children:"🏪 Seller"}),n.jsx("option",{value:"internal",children:"🏢 Internal"})]}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:h,onChange:E=>v(E.target.value),className:"w-full appearance-none border border-gray-200 rounded-lg px-4 py-3 pr-10 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200",children:[n.jsx("option",{value:"low",children:"🟢 Low"}),n.jsx("option",{value:"medium",children:"🟡 Medium"}),n.jsx("option",{value:"high",children:"🟠 High"}),n.jsx("option",{value:"urgent",children:"🔴 Urgent"})]}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:b,onChange:E=>{w(E.target.value),Cr("")},className:"w-full appearance-none border border-gray-200 rounded-lg px-4 py-3 pr-10 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200",required:!0,children:ge.map(E=>n.jsx("option",{value:E.id,children:E.name},E.id))}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Issue Category (Optional)",n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Ne.length>0?`${Ne.length} categories available for ${nt==null?void 0:nt.name}`:"No categories defined for this department"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:ae,onChange:E=>Cr(E.target.value),className:"w-full appearance-none border border-gray-200 rounded-lg px-4 py-3 pr-10 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200",disabled:Ne.length===0,children:[n.jsx("option",{value:"",children:Ne.length>0?"Select issue category":"No categories available for this department"}),Ne.map(E=>n.jsx("option",{value:E.name,children:E.name},E.name))]}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),ae&&n.jsx("div",{className:"mt-2 p-3 bg-green-50 rounded-lg border border-green-200",children:n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"font-medium text-green-900",children:["✓ Selected: ",ae]}),n.jsxs("div",{className:"text-green-700 mt-1",children:["📅 SLA: ",(Lc=Ne.find(E=>E.name===ae))==null?void 0:Lc.slaHours," hours"]}),n.jsxs("div",{className:"text-green-700",children:["🏢 Department: ",nt==null?void 0:nt.name]}),((Uc=Ne.find(E=>E.name===ae))==null?void 0:Uc.poc)&&n.jsxs("div",{className:"text-green-700",children:["👤 POC: ",(Ic=Ne.find(E=>E.name===ae))==null?void 0:Ic.poc,((Mc=Ne.find(E=>E.name===ae))==null?void 0:Mc.poc2)&&` / ${(Fc=Ne.find(E=>E.name===ae))==null?void 0:Fc.poc2}`]})]})}),!ae&&Ne.length>0&&n.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["📋 Available issue types for ",n.jsx("strong",{children:nt==null?void 0:nt.name}),":"]}),n.jsxs("div",{className:"space-y-1",children:[Ne.slice(0,6).map(E=>n.jsxs("div",{className:"text-xs text-gray-700 flex items-center justify-between",children:[n.jsxs("span",{children:["• ",E.name]}),n.jsxs("span",{className:"text-gray-500",children:["(",E.slaHours,"h SLA)"]})]},E.name)),Ne.length>6&&n.jsxs("div",{className:"text-xs text-gray-500",children:["... and ",Ne.length-6," more categories"]})]})]})]}),n.jsxs("div",{className:`p-6 rounded-xl border-2 transition-all duration-200 ${Dc?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(Cs,{className:"w-5 h-5 mr-2"}),"Order Information",Dc&&n.jsxs("span",{className:"ml-3 text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded-full",children:["Required for ",T," tickets"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[n.jsxs("span",{children:[n.jsx(Cs,{className:"w-4 h-4 inline mr-1"}),"Order Number"]}),c&&O.length>=2&&n.jsxs("button",{type:"button",onClick:()=>m(O),className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(Us,{className:"w-3 h-3"}),"Retry Search"]})]}),n.jsxs("div",{className:"relative",ref:Jr,children:[n.jsxs("div",{className:"relative",children:[n.jsx(yi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",value:O,onChange:E=>Nf(E.target.value),onFocus:()=>Y(!0),className:"w-full pl-10 pr-10 py-3 border border-gray-200 rounded-lg focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:l?"Loading orders...":"Search or enter order number...",disabled:l}),(I||O)&&n.jsx("button",{type:"button",onClick:jf,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:n.jsx(dt,{className:"w-4 h-4"})})]}),re&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:[Fe&&n.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),n.jsx("span",{className:"text-sm",children:"Typing..."})]})}),!Fe&&l&&n.jsxs("div",{className:"px-4 py-3 text-gray-500 text-center",children:[n.jsx(Us,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),n.jsx("div",{className:"text-sm",children:"Searching cached orders..."}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Lightning fast results"})]}),c&&n.jsxs("div",{className:"px-4 py-3 text-red-500 text-center",children:[n.jsx("div",{className:"text-sm",children:"Error loading orders"}),n.jsx("button",{type:"button",onClick:()=>O.length>=2&&m(O),className:"text-xs text-blue-600 hover:text-blue-700 mt-1",disabled:O.length<2,children:O.length>=2?"Retry search":"Enter search term to retry"})]}),!l&&!c&&qs.length===0&&O.length>=2&&n.jsxs("div",{className:"px-4 py-2 text-gray-500 text-center",children:[n.jsxs("div",{className:"text-sm",children:['No orders found matching "',O,'"']}),n.jsx("div",{className:"text-xs mt-1",children:"Try a different search term or order ID"})]}),!l&&!c&&O.length<2&&O.length>0&&n.jsx("div",{className:"px-4 py-2 text-gray-500 text-center",children:n.jsx("div",{className:"text-sm",children:"Type at least 2 characters to search orders"})}),!l&&!c&&qs.map(E=>n.jsxs("button",{type:"button",onClick:()=>oa(E),className:`w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center transition-colors duration-200 ${E===I?"bg-blue-50 text-blue-700":""}`,children:[n.jsx(Cs,{className:"w-4 h-4 mr-2 text-gray-400"}),E,E===I&&n.jsx("div",{className:"ml-auto text-blue-600",children:"✓"})]},E))]})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["🚀 Fast cached search •",Fe?"⌨️ Typing...":l?"⏳ Searching...":i.length>0?`📋 ${i.length} matches found`:"Type 2+ characters to search",u&&` • 💾 ${(zc=u.totalOrders)==null?void 0:zc.toLocaleString()} orders cached`]}),!Fe&&!l&&$.length>0&&O.length>=2&&n.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("div",{className:"text-xs font-medium text-blue-700 mb-2",children:"💡 Quick Suggestions:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:$.slice(0,6).map((E,Q)=>n.jsx("button",{type:"button",onClick:async()=>{H(E),P(E),await g(E),handleOrderSelect(E),Y(!1)},className:"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors duration-200",children:E},Q))})]}),!l&&u&&n.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"text-xs text-green-700",children:[n.jsx("strong",{children:"⚡ High-Speed Cache:"})," ",i.length," results from ",(Bc=u.totalOrders)==null?void 0:Bc.toLocaleString()," cached orders",d&&n.jsxs("span",{className:"ml-2",children:["(",d.exactMatches," exact, ",d.prefixMatches," prefix, ",d.containsMatches," contains)"]})]}),n.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Last updated: ",u.lastUpdated?new Date(u.lastUpdated).toLocaleTimeString():"N/A"," • Refreshes hourly"]})]}),c&&n.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"text-xs text-red-700",children:[n.jsx("strong",{children:"⚠️ Search Error:"})," ",c]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Value"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium",children:"£"}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:Pe,onChange:E=>_r(E.target.value),readOnly:!!I,className:`w-full border rounded-lg pl-8 pr-4 py-3 transition-all duration-200 ${I?"bg-gray-50 border-gray-200 text-gray-700 cursor-not-allowed":"border-gray-200 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:I?"Auto-filled from selected order":"0.00"})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["💰 Amount in British Pounds",I?n.jsx("span",{className:"text-green-600",children:" • Auto-filled from selected order"}):n.jsx("span",{children:" • Enter manually or select an order above"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Value"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium",children:"£"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:Pe||void 0,value:pt,onChange:E=>ta(E.target.value),className:`w-full border rounded-lg pl-8 pr-4 py-3 focus:ring-1 transition-all duration-200 ${pt&&Pe&&!De(pt,Pe)?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-200 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"0.00"})]}),pt&&Pe&&!De(pt,Pe)&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:"⚠️ Refund cannot exceed order value"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"💸 Refund amount in British Pounds"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(df,{className:"w-4 h-4 inline mr-1"}),"Currency"]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:ra,onChange:E=>Sr(E.target.value),className:"w-full appearance-none border border-gray-200 rounded-lg px-4 py-3 pr-10 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:iy.map(E=>n.jsx("option",{value:E,children:E},E))}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"🌍 Select currency"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignee (Optional - Auto-assigned if Issue Category selected)"}),n.jsxs("div",{className:"relative",ref:Ws,children:[n.jsxs("div",{className:"relative",children:[n.jsx(yi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",value:A,onChange:E=>bf(E.target.value),onFocus:()=>B(!0),className:"w-full pl-10 pr-10 py-3 border border-gray-200 rounded-lg focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200",placeholder:"Search by name, email, or department..."}),(_||A)&&n.jsx("button",{type:"button",onClick:Oc,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:n.jsx(dt,{className:"w-4 h-4"})})]}),U&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[!_&&n.jsx("button",{type:"button",onClick:Oc,className:"w-full px-4 py-2 text-left text-gray-500 hover:bg-gray-50 border-b border-gray-100",children:"❌ Unassigned"}),Ks.length===0?n.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No users found"}):Ks.map(({department:E,users:Q})=>n.jsxs("div",{children:[n.jsxs("div",{className:"px-4 py-2 bg-gray-50 text-sm font-medium text-gray-700 border-b border-gray-100",children:["🏢 ",E.name]}),Q.map(Z=>n.jsxs("button",{type:"button",onClick:()=>wf(Z),className:`w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between transition-colors duration-200 ${Z.id===_?"bg-blue-50 text-blue-700":""}`,children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium",children:["👤 ",Z.name]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[Z.role," • ",Z.email]})]}),Z.id===_&&n.jsx("div",{className:"text-blue-600",children:"✓"})]},Z.id))]},E.id))]}),la&&n.jsxs("div",{className:"mt-2 p-3 bg-green-50 rounded-lg border border-green-200",children:[n.jsxs("div",{className:"text-sm font-medium text-green-800",children:["✅ Selected: ",la.name]}),n.jsxs("div",{className:"text-xs text-green-600",children:[la.role," • ",la.department.name]}),n.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Manual assignment will override auto-assignment"})]}),!_&&ae&&n.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("div",{className:"text-sm font-medium text-blue-800",children:"🤖 Auto-Assignment Enabled"}),n.jsxs("div",{className:"text-xs text-blue-600",children:["Will be automatically assigned to: ",(Hc=Ne.find(E=>E.name===ae))==null?void 0:Hc.poc,((Vc=Ne.find(E=>E.name===ae))==null?void 0:Vc.poc2)&&` or ${(Wc=Ne.find(E=>E.name===ae))==null?void 0:Wc.poc2}`]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"🔍 Searchable field • 🤖 Auto-assigns based on Issue Category"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date (Optional)"}),n.jsx("input",{type:"datetime-local",value:ee,onChange:E=>W(E.target.value),min:new Date().toISOString().slice(0,16),className:"w-full border border-gray-200 rounded-lg px-4 py-3 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (Auto-generated)"}),sa.length>0&&n.jsxs("div",{className:"mb-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"🤖 Auto-generated tags:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:sa.map((E,Q)=>n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-md text-xs font-medium",children:E},Q))})]}),n.jsx("input",{type:"text",value:F,onChange:E=>te(E.target.value),className:"w-full border border-gray-200 rounded-lg px-4 py-3 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200",placeholder:"Edit auto-generated tags or add custom ones (comma-separated)"}),aa.length>0&&n.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"💡 Suggested tags:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:aa.map((E,Q)=>n.jsx("button",{type:"button",onClick:()=>{const Z=F.split(",").map(Zr=>Zr.trim()).filter(Zr=>Zr),Xr=Z.length-1;Z[Xr]=E,te(Z.join(", "))},className:"px-2 py-1 bg-white border border-gray-200 rounded text-xs hover:bg-gray-100 transition-colors duration-200",children:E},Q))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments (Optional)"}),n.jsx(Rc,{onFilesSelected:me,className:"mb-4"}),n.jsx(qn,{attachments:J,onRemove:It,showRemove:!0})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-100",children:[n.jsx("button",{type:"button",onClick:()=>{ue(),e()},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:"Cancel"}),n.jsx("button",{type:"submit",className:"bg-gray-900 text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors duration-200",children:"Create Ticket"})]})]})]})}):null},ly=({selectedCount:t,onAction:e,onClear:r})=>{const[s,a]=S.useState(!1),i=[{id:"assign",label:"Assign",icon:be,color:"blue"},{id:"status",label:"Change Status",icon:cf,color:"emerald"},{id:"tag",label:"Add Tags",icon:ff,color:"purple"},{id:"comment",label:"Add Comment",icon:wr,color:"indigo"},{id:"archive",label:"Archive",icon:Nv,color:"amber"},{id:"delete",label:"Delete",icon:Tl,color:"red"}];return n.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl shadow-2xl border border-slate-700 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center px-6 py-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),n.jsxs("span",{className:"font-medium",children:[t," tickets selected"]})]}),n.jsx("div",{className:"h-4 w-px bg-slate-600"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[i.slice(0,4).map(o=>n.jsxs("button",{onClick:()=>e(o.id,[]),className:`flex items-center space-x-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-200 hover:bg-${o.color}-500/20 hover:text-${o.color}-300`,children:[n.jsx(o.icon,{className:"w-4 h-4"}),n.jsx("span",{children:o.label})]},o.id)),n.jsx("button",{onClick:()=>a(!s),className:"px-3 py-2 text-slate-300 hover:text-white hover:bg-slate-700 rounded-xl transition-all duration-200",children:"More"})]})]}),n.jsx("button",{onClick:r,className:"ml-6 p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-xl transition-all duration-200",children:n.jsx(dt,{className:"w-4 h-4"})})]}),s&&n.jsx("div",{className:"border-t border-slate-700 p-4",children:n.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.slice(4).map(o=>n.jsxs("button",{onClick:()=>e(o.id,[]),className:`flex items-center space-x-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-200 hover:bg-${o.color}-500/20 hover:text-${o.color}-300`,children:[n.jsx(o.icon,{className:"w-4 h-4"}),n.jsx("span",{children:o.label})]},o.id))})})]})})},cy=({filters:t,onFiltersChange:e,onClose:r})=>{var d,u,m,g,p;const{authState:s}=Et(),a=s.user,i=s.getAllUsers?s.getAllUsers():[],o=(y,j)=>{e({...t,[y]:j})},l=()=>{e({})},c=Object.keys(t).length;return n.jsx("div",{className:"mb-6 bg-white/90 backdrop-blur-sm rounded-2xl border border-slate-200/60 shadow-lg",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-50 rounded-xl",children:n.jsx(Tc,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:"Advanced Filters"}),n.jsx("p",{className:"text-sm text-slate-500",children:c>0?`${c} filters active`:"No filters applied"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[c>0&&n.jsx("button",{onClick:l,className:"text-sm text-slate-500 hover:text-slate-700 px-3 py-1 hover:bg-slate-100 rounded-lg transition-all duration-200",children:"Clear all"}),n.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200",children:n.jsx(dt,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),n.jsx("div",{className:"space-y-2",children:["new","assigned","in_progress","awaiting_customer","awaiting_internal","escalated","resolved","closed"].map(y=>{var j;return n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((j=t.status)==null?void 0:j.includes(y))||!1,onChange:N=>{const x=t.status||[];N.target.checked?o("status",[...x,y]):o("status",x.filter(f=>f!==y))},className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700 capitalize",children:y.replace("_"," ")})]},y)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Priority"}),n.jsx("div",{className:"space-y-2",children:["critical","high","medium","low"].map(y=>{var j;return n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((j=t.priority)==null?void 0:j.includes(y))||!1,onChange:N=>{const x=t.priority||[];N.target.checked?o("priority",[...x,y]):o("priority",x.filter(f=>f!==y))},className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700 capitalize",children:y})]},y)})})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Bn,{className:"w-4 h-4 inline mr-1"}),"Department"]}),n.jsx("div",{className:"space-y-2",children:ge.map(y=>{var j;return n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((j=t.department)==null?void 0:j.includes(y.id))||!1,onChange:N=>{const x=t.department||[];N.target.checked?o("department",[...x,y.id]):o("department",x.filter(f=>f!==y.id))},className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700",children:y.name})]},y.id)})})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(ct,{className:"w-4 h-4 inline mr-1"}),"SLA Status"]}),n.jsx("div",{className:"space-y-2",children:[{value:"on_track",label:"On Track",color:"text-emerald-600"},{value:"at_risk",label:"At Risk",color:"text-amber-600"},{value:"breached",label:"Breached",color:"text-red-600"}].map(({value:y,label:j,color:N})=>n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",name:"slaStatus",checked:t.slaStatus===y,onChange:()=>o("slaStatus",y),className:"border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:`text-sm font-medium ${N}`,children:j})]},y))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(lf,{className:"w-4 h-4 inline mr-1"}),"Special Filters"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((d=t.customFields)==null?void 0:d.mentionedUser)===(a==null?void 0:a.id),onChange:y=>{y.target.checked?o("customFields",{mentionedUser:a==null?void 0:a.id}):o("customFields",{})},className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Mentions me"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:t.hasAttachments===!0,onChange:y=>o("hasAttachments",y.target.checked||void 0),className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Has attachments"})]})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(be,{className:"w-4 h-4 inline mr-1"}),"Assignee"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((u=t.assignee)==null?void 0:u.includes("unassigned"))||!1,onChange:y=>{const j=t.assignee||[];y.target.checked?o("assignee",[...j,"unassigned"]):o("assignee",j.filter(N=>N!=="unassigned"))},className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Unassigned"})]}),a&&n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((m=t.assignee)==null?void 0:m.includes(a.id))||!1,onChange:y=>{const j=t.assignee||[];y.target.checked?o("assignee",[...j,a.id]):o("assignee",j.filter(N=>N!==a.id))},className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700 font-medium",children:"Assigned to me"})]}),i.slice(0,15).map(y=>{var j;return n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((j=t.assignee)==null?void 0:j.includes(y.id))||!1,onChange:N=>{const x=t.assignee||[];N.target.checked?o("assignee",[...x,y.id]):o("assignee",x.filter(f=>f!==y.id))},className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700 truncate",children:y.name})]},y.id)})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(El,{className:"w-4 h-4 inline mr-1"}),"Date Range"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"From"}),n.jsx("input",{type:"date",value:(g=t.dateRange)!=null&&g.start?t.dateRange.start.toISOString().split("T")[0]:"",onChange:y=>{var N;const j=y.target.value?new Date(y.target.value):void 0;o("dateRange",{start:j,end:(N=t.dateRange)==null?void 0:N.end})},className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-slate-900 focus:border-slate-900"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"To"}),n.jsx("input",{type:"date",value:(p=t.dateRange)!=null&&p.end?t.dateRange.end.toISOString().split("T")[0]:"",onChange:y=>{var N;const j=y.target.value?new Date(y.target.value):void 0;o("dateRange",{start:(N=t.dateRange)==null?void 0:N.start,end:j})},className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-slate-900 focus:border-slate-900"})]})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:[{label:"Today",days:0},{label:"Yesterday",days:-1},{label:"Last 7 days",days:-7},{label:"Last 30 days",days:-30}].map(({label:y,days:j})=>n.jsx("button",{type:"button",onClick:()=>{const N=new Date;if(j===0){N.setHours(0,0,0,0);const x=new Date(N);x.setDate(x.getDate()+1),o("dateRange",{start:N,end:x})}else if(j===-1){const x=new Date(N);x.setDate(x.getDate()-1),x.setHours(0,0,0,0);const f=new Date(x);f.setDate(f.getDate()+1),o("dateRange",{start:x,end:f})}else{const x=new Date(N);x.setDate(x.getDate()+j),x.setHours(0,0,0,0),o("dateRange",{start:x,end:new Date})}},className:"px-3 py-1 text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition-colors duration-200",children:y},y))})]})]})})},dy=({ticket:t,viewMode:e,isSelected:r,onSelect:s,onClick:a,isHighlighted:i=!1})=>{var p,y,j,N,x,f;const o=h=>{const v={new:"from-blue-50 to-blue-100 border-blue-200 text-blue-700",triaged:"from-indigo-50 to-indigo-100 border-indigo-200 text-indigo-700",assigned:"from-amber-50 to-amber-100 border-amber-200 text-amber-700",in_progress:"from-orange-50 to-orange-100 border-orange-200 text-orange-700",awaiting_customer:"from-purple-50 to-purple-100 border-purple-200 text-purple-700",awaiting_internal:"from-pink-50 to-pink-100 border-pink-200 text-pink-700",escalated:"from-red-50 to-red-100 border-red-200 text-red-700",resolved:"from-emerald-50 to-emerald-100 border-emerald-200 text-emerald-700",closed:"from-slate-50 to-slate-100 border-slate-200 text-slate-700",cancelled:"from-gray-50 to-gray-100 border-gray-200 text-gray-700"};return v[h]||v.new},l=h=>{const v={critical:"text-red-600",high:"text-orange-600",medium:"text-amber-600",low:"text-emerald-600"};return v[h]||v.medium},c=h=>{const b={critical:Jt,high:Ac,medium:zn,low:Ut}[h]||zn;return n.jsx(b,{className:"w-4 h-4"})},d=h=>{const v={buyer:"from-blue-50 to-blue-100 border-blue-200 text-blue-700",seller:"from-emerald-50 to-emerald-100 border-emerald-200 text-emerald-700",internal:"from-purple-50 to-purple-100 border-purple-200 text-purple-700",system:"from-slate-50 to-slate-100 border-slate-200 text-slate-700"};return v[h]||v.internal},u=Es(t.dueDate),m=t.comments&&((p=t.comments)==null?void 0:p.length)||!1,g=t.attachments&&((y=t.attachments)==null?void 0:y.length)||!1;return e==="list"?n.jsx("div",{onClick:a,className:`group relative bg-white/80 backdrop-blur-sm border rounded-2xl p-6 cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/50 hover:border-slate-300/60 hover:bg-white ${i?"ring-2 ring-blue-500/20 border-blue-500/30 bg-white shadow-lg shadow-blue-500/10":"border-slate-200/60 hover:transform hover:scale-[1.01]"} ${r?"ring-2 ring-slate-900/20 border-slate-900/30":""}`,children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"checkbox",checked:r,onChange:s,onClick:h=>h.stopPropagation(),className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-slate-900 truncate group-hover:text-slate-800 transition-colors duration-200 mb-2",children:t.title}),n.jsx("p",{className:"text-slate-600 text-sm line-clamp-1 leading-relaxed",children:t.description})]}),n.jsxs("div",{className:"ml-4 text-right flex-shrink-0",children:[n.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:["#",t.id]}),n.jsxs("div",{className:"flex items-center space-x-1 text-xs text-slate-500",children:[n.jsx(ft,{className:"w-3 h-3"}),n.jsx("span",{children:ju(t.updatedAt)})]})]})]}),n.jsxs("div",{className:"flex items-center flex-wrap gap-2 text-sm",children:[n.jsx("span",{className:`px-3 py-1 rounded-lg font-medium border bg-gradient-to-r ${o(t.status)}`,children:t.status.replace("_"," ")}),n.jsx("span",{className:`px-3 py-1 rounded-lg font-medium border bg-gradient-to-r ${d(t.issueType)}`,children:t.issueType}),n.jsxs("div",{className:`flex items-center space-x-1 font-medium ${l(t.priority)}`,children:[c(t.priority),n.jsx("span",{className:"capitalize",children:t.priority})]}),n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(Bn,{className:"w-4 h-4"}),n.jsx("span",{children:t.department.name})]}),t.assignee&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(be,{className:"w-4 h-4"}),n.jsx("span",{children:t.assignee.name})]}),m&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(wr,{className:"w-4 h-4"}),n.jsx("span",{children:((j=t.comments)==null?void 0:j.length)||0})]}),g&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(wu,{className:"w-4 h-4"}),n.jsx("span",{children:((N=t.attachments)==null?void 0:N.length)||0})]}),u&&n.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-full",children:[n.jsx(ct,{className:"w-3 h-3 text-red-600"}),n.jsx("span",{className:"text-xs font-medium text-red-700",children:"Overdue"})]})]})]})]})}):n.jsxs("div",{onClick:a,className:`group relative bg-white/80 backdrop-blur-sm border rounded-2xl p-6 cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/50 hover:border-slate-300/60 hover:bg-white ${i?"ring-2 ring-blue-500/20 border-blue-500/30 bg-white shadow-lg shadow-blue-500/10":"border-slate-200/60 hover:transform hover:scale-[1.02]"} ${r?"ring-2 ring-slate-900/20 border-slate-900/30":""}`,children:[n.jsx("div",{className:"absolute top-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:n.jsx("input",{type:"checkbox",checked:r,onChange:s,onClick:h=>h.stopPropagation(),className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"})}),n.jsx("div",{className:`absolute top-4 right-4 p-2 rounded-xl ${l(t.priority)} bg-white/50`,children:c(t.priority)}),u&&n.jsxs("div",{className:"absolute top-4 right-16 flex items-center space-x-1 px-2 py-1 bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-full",children:[n.jsx(ct,{className:"w-3 h-3 text-red-600"}),n.jsx("span",{className:"text-xs font-medium text-red-700",children:"Overdue"})]}),n.jsxs("div",{className:"space-y-4 mt-8",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs text-slate-500 font-mono",children:["#",t.id]}),n.jsx("span",{className:"text-xs text-slate-500",children:ju(t.updatedAt)})]}),n.jsx("h3",{className:"font-semibold text-slate-900 group-hover:text-slate-800 transition-colors duration-200 line-clamp-2 leading-tight mb-3",children:t.title}),n.jsx("p",{className:"text-slate-600 text-sm line-clamp-2 leading-relaxed",children:t.description})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-medium border bg-gradient-to-r ${o(t.status)}`,children:t.status.replace("_"," ")}),n.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-medium border bg-gradient-to-r ${d(t.issueType)}`,children:t.issueType})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(Bn,{className:"w-4 h-4"}),n.jsx("span",{children:t.department.name})]}),n.jsx("div",{className:`flex items-center space-x-1 font-medium ${l(t.priority)}`,children:n.jsx("span",{className:"capitalize",children:t.priority})})]}),t.assignee&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(be,{className:"w-4 h-4"}),n.jsx("span",{children:t.assignee.name}),t.pocName&&t.assignee.name.toLowerCase().includes(t.pocName.toLowerCase())&&n.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:"(POC)"})]}),t.orderNumber&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(Cs,{className:"w-4 h-4"}),n.jsx("span",{className:"font-mono text-xs",children:t.orderNumber})]}),t.orderValue&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx("span",{className:"font-bold",children:"£"}),n.jsxs("span",{className:"font-medium",children:[t.orderValue.toFixed(2)," ",t.currency]})]}),t.issueCategory&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(ff,{className:"w-4 h-4"}),n.jsx("span",{className:"text-xs",children:t.issueCategory})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[m&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(wr,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:((x=t.comments)==null?void 0:x.length)||0})]}),g&&n.jsxs("div",{className:"flex items-center space-x-1 text-slate-500",children:[n.jsx(wu,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:((f=t.attachments)==null?void 0:f.length)||0})]})]}),t.slaHours&&n.jsxs("div",{className:`flex items-center space-x-1 text-xs ${u?"text-red-600":"text-slate-500"}`,children:[n.jsx(ft,{className:"w-3 h-3"}),n.jsxs("span",{children:["SLA: ",t.slaHours,"h"]})]})]})]})]})},uy=()=>n.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((t,e)=>n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-2xl p-6 animate-pulse",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-6 bg-slate-200 rounded-lg w-3/4 mb-2"}),n.jsx("div",{className:"h-4 bg-slate-100 rounded w-1/2"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"h-6 bg-slate-200 rounded-full w-16"}),n.jsx("div",{className:"h-6 bg-slate-100 rounded-full w-12"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-8 h-8 bg-slate-200 rounded-full"}),n.jsx("div",{className:"h-4 bg-slate-100 rounded w-24"})]}),n.jsx("div",{className:"h-4 bg-slate-100 rounded w-20"})]})]},e))}),hy=({onTicketSelect:t,selectedTicketId:e,searchQuery:r=""})=>{const{tickets:s,addTicket:a,isLoading:i,ticketsLoading:o}=Hs(),{authState:l}=Et(),c=l.user,[d,u]=S.useState({}),[m,g]=S.useState("updatedAt"),[p,y]=S.useState("desc"),[j,N]=S.useState("grid"),[x,f]=S.useState(!1),[h,v]=S.useState(!1),[b,w]=S.useState([]);S.useState([]);const[_,R]=S.useState(!1),A=async k=>{try{const T={id:`TK-2024-${String(((s==null?void 0:s.length)||0)+1).padStart(3,"0")}`,title:k.title,description:k.description,status:"new",priority:k.priority,severity:"medium",department:k.department||ge[0],assignee:k.assignee||null,reporter:c||{id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",name:"System Administrator",email:"admin@fleek.com",department:ge[0],role:"admin",isBlocked:!1},createdAt:new Date,updatedAt:new Date,resolvedAt:void 0,firstResponseAt:void 0,tags:k.tags||[],comments:[],dueDate:k.dueDate,attachments:k.attachments||[],issueType:k.issueType||"general",orderNumber:k.orderNumber,orderValue:k.orderValue,refundValue:k.refundValue,currency:k.currency,issueCategory:k.issueCategory,slaHours:k.slaHours,pocName:k.pocName,escalationLevel:"none",businessImpact:"medium",customerTier:void 0,resolutionTime:void 0,firstResponseTime:void 0,watchers:[],linkedTickets:[],customFields:{},automationRules:[],slaBreaches:[],worklog:[]};console.log("🎫 Creating ticket with data:",T),await a(T),f(!1),console.log("✅ Ticket created successfully:",T.id)}catch(T){console.error("❌ Failed to create ticket:",T),alert(`Failed to create ticket: ${T instanceof Error?T.message:"Unknown error"}`)}},C=k=>{switch(k){case"blue":return"from-blue-500 to-blue-600";case"purple":return"from-purple-500 to-purple-600";case"red":return"from-red-500 to-red-600";case"emerald":return"from-emerald-500 to-emerald-600";case"amber":return"from-amber-500 to-amber-600";default:return"from-gray-500 to-gray-600"}},U=k=>{switch(k){case"assigned_to_me":u({assignee:c?[c.id]:[]});break;case"mentions":u({customFields:{mentionedUser:c==null?void 0:c.id}});break;case"reported_by_me":u({reporter:c?[c.id]:[]});break;case"overdue":u({slaStatus:"breached"});break;case"high_priority":u({priority:["critical","high"]});break;case"unassigned":u({assignee:["unassigned"]});break;case"today":const T=new Date;T.setHours(0,0,0,0);const L=new Date(T);L.setDate(L.getDate()+1),u({dateRange:{start:T,end:L}});break;default:u({})}},B=S.useMemo(()=>(s||[]).filter(T=>{var L,I;if(r){const O=r.toLowerCase().split(" ").filter(Y=>Y.length>0),H=[T.title,T.description,T.id,((L=T.assignee)==null?void 0:L.name)||"",T.reporter.name,T.department.name,T.issueCategory||"",T.orderNumber||"",...T.tags,T.status.replace("_"," "),T.priority].join(" ").toLowerCase();if(!O.every(Y=>H.includes(Y)))return!1}if(d.status&&d.status.length>0&&!d.status.includes(T.status)||d.priority&&d.priority.length>0&&!d.priority.includes(T.priority)||d.department&&d.department.length>0&&!d.department.includes(T.department.id)||d.assignee&&d.assignee.length>0&&(d.assignee.includes("unassigned")&&T.assignee||!d.assignee.includes("unassigned")&&(!T.assignee||!d.assignee.includes(T.assignee.id))))return!1;if(d.slaStatus){const P=Es(T.dueDate),O=T.dueDate?new Date(T.dueDate).getTime()-Date.now():1/0,H=O>0&&O<2*60*60*1e3;if(d.slaStatus==="breached"&&!P||d.slaStatus==="at_risk"&&!H||d.slaStatus==="on_track"&&(P||H))return!1}if((I=d.customFields)!=null&&I.mentionedUser&&c&&!T.comments.some(O=>O.content.includes(`@${c.name}`)))return!1;if(d.dateRange){const P=new Date(T.createdAt);if(d.dateRange.start&&P<d.dateRange.start||d.dateRange.end&&P>=d.dateRange.end)return!1}return!0}).sort((T,L)=>{let I,P;switch(m){case"priority":const O={critical:4,high:3,medium:2,low:1};I=O[T.priority]||0,P=O[L.priority]||0;break;case"dueDate":I=T.dueDate?new Date(T.dueDate).getTime():1/0,P=L.dueDate?new Date(L.dueDate).getTime():1/0;break;default:I=new Date(T[m]).getTime(),P=new Date(L[m]).getTime()}return p==="desc"?P-I:I-P}),[s,d,m,p,r]),F=S.useMemo(()=>{const k=B.length,T=B.filter(O=>O.priority==="critical").length,L=B.filter(O=>Es(O.dueDate)).length,I=B.filter(O=>!O.assignee).length,P=k>0?B.reduce((O,H)=>O+(Date.now()-new Date(H.createdAt).getTime()),0)/k/(1e3*60*60*24):0;return{total:k,critical:T,overdue:L,unassigned:I,avgAge:P}},[B]),te=S.useMemo(()=>!ge||!Array.isArray(ge)?[]:ge.map(T=>{const L=B.filter(O=>O.department.id===T.id),I=L.filter(O=>O.status==="resolved"&&O.resolutionTime);let P=0;return I.length>0&&(P=I.reduce((H,re)=>H+(re.resolutionTime||0),0)/I.length/60),{department:T,totalTickets:L.length,resolvedTickets:I.length,avgResolutionHours:P,slaHours:T.slaHours,performance:P>0?(T.slaHours-P)/T.slaHours*100:0}}).filter(T=>T.totalTickets>0),[B]),ee=async()=>{R(!0),await new Promise(k=>setTimeout(k,1e3)),R(!1)},W=(k,T)=>{console.log("Bulk action:",k,T),w([])},J=k=>{m===k?y(p==="asc"?"desc":"asc"):(g(k),y("desc"))};return i?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-slate-600",children:"Loading tickets..."})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[te&&te.length>0&&n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-6",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[n.jsx(jn,{className:"w-5 h-5 mr-2 text-blue-600"}),"Department Resolution Performance"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:te.map(k=>n.jsxs("div",{className:"p-4 bg-gradient-to-br from-slate-50 to-white rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:k.department.name}),n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:k.department.color}})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"SLA Target:"}),n.jsxs("span",{className:"font-semibold text-slate-900",children:[k.slaHours,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Avg Resolution:"}),n.jsx("span",{className:`font-semibold ${k.avgResolutionHours<=k.slaHours?"text-emerald-600":"text-red-600"}`,children:k.avgResolutionHours>0?`${k.avgResolutionHours.toFixed(1)}h`:"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Performance:"}),n.jsx("span",{className:`font-semibold ${k.performance>=0?"text-emerald-600":"text-red-600"}`,children:k.performance>0?`+${k.performance.toFixed(0)}%`:`${k.performance.toFixed(0)}%`})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Tickets:"}),n.jsxs("span",{className:"font-semibold text-slate-900",children:[k.resolvedTickets,"/",k.totalTickets]})]})]})]},k.department.id))})]})}),n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 bg-clip-text text-transparent tracking-tight",children:"Support Tickets"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[F.critical>0&&n.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1.5 bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-full animate-pulse",children:[n.jsx(Jt,{className:"w-4 h-4 text-red-600"}),n.jsxs("span",{className:"text-sm font-semibold text-red-700",children:[F.critical," critical"]})]}),F.overdue>0&&n.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1.5 bg-gradient-to-r from-orange-50 to-orange-100 border border-orange-200 rounded-full",children:[n.jsx(ct,{className:"w-4 h-4 text-orange-600"}),n.jsxs("span",{className:"text-sm font-semibold text-orange-700",children:[F.overdue," overdue"]})]}),n.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1.5 bg-gradient-to-r from-emerald-50 to-emerald-100 border border-emerald-200 rounded-full",children:[n.jsx(zn,{className:"w-4 h-4 text-emerald-600"}),n.jsx("span",{className:"text-sm font-semibold text-emerald-700",children:"Live updates"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-6 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),n.jsxs("span",{children:[F.total," total tickets"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ft,{className:"w-4 h-4"}),n.jsxs("span",{children:["Avg age: ",F.avgAge.toFixed(1)," days"]})]}),F.unassigned>0&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ct,{className:"w-4 h-4 text-amber-500"}),n.jsxs("span",{children:[F.unassigned," unassigned"]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:ee,disabled:_,className:"p-3 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-xl transition-all duration-200 disabled:opacity-50",children:n.jsx(Us,{className:`w-5 h-5 ${_?"animate-spin":""}`})}),n.jsxs("button",{onClick:()=>f(!0),className:"group relative bg-gradient-to-r from-slate-900 to-slate-800 text-white px-6 py-3 rounded-2xl hover:from-slate-800 hover:to-slate-700 transition-all duration-300 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),n.jsx(vi,{className:"w-5 h-5 relative z-10 group-hover:rotate-90 transition-transform duration-300"}),n.jsx("span",{className:"relative z-10 font-semibold",children:"New Ticket"})]})]})]}),n.jsxs("div",{className:"mb-6 bg-white/90 backdrop-blur-xl rounded-3xl border border-slate-200/50 shadow-xl shadow-slate-200/20",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-6 border-b border-slate-100/60",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Quick Actions"})]}),n.jsx("div",{className:"flex flex-wrap items-center gap-2",children:[{key:"assigned_to_me",label:"My Tickets",icon:be,color:"blue"},{key:"mentions",label:"Mentions",icon:lf,color:"purple"},{key:"overdue",label:"Overdue",icon:ct,color:"red"},{key:"today",label:"Today",icon:El,color:"emerald"},{key:"unassigned",label:"Unassigned",icon:jn,color:"amber"}].map(({key:k,label:T,icon:L,color:I})=>{var O,H,re;const P=k==="assigned_to_me"&&((O=d.assignee)==null?void 0:O.includes((c==null?void 0:c.id)||""))||k==="mentions"&&((H=d.customFields)==null?void 0:H.mentionedUser)||k==="overdue"&&d.slaStatus==="breached"||k==="unassigned"&&((re=d.assignee)==null?void 0:re.includes("unassigned"))||k==="today"&&d.dateRange;return n.jsxs("button",{onClick:()=>U(k),className:`group relative flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 hover:shadow-lg hover:scale-105 ${P?`bg-gradient-to-r ${C(I)} text-white shadow-lg shadow-${I}-500/25`:"text-slate-600 hover:text-slate-900 bg-slate-50/50 hover:bg-slate-100/80 border border-slate-200/50"}`,children:[n.jsx(L,{className:`w-4 h-4 ${P?"text-white":`text-${I}-500`}`}),n.jsx("span",{className:"whitespace-nowrap",children:T}),P&&n.jsx("div",{className:`absolute inset-0 rounded-xl bg-gradient-to-r ${C(I)} opacity-20 animate-pulse`})]},k)})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center bg-slate-100/60 backdrop-blur-sm rounded-2xl p-1.5 border border-slate-200/40",children:[n.jsxs("button",{onClick:()=>N("grid"),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${j==="grid"?"bg-white shadow-md text-slate-900 border border-slate-200/50":"text-slate-500 hover:text-slate-700 hover:bg-white/50"}`,children:[n.jsx(Av,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Grid"})]}),n.jsxs("button",{onClick:()=>N("list"),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${j==="list"?"bg-white shadow-md text-slate-900 border border-slate-200/50":"text-slate-500 hover:text-slate-700 hover:bg-white/50"}`,children:[n.jsx(Dv,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"List"})]})]}),n.jsxs("button",{onClick:()=>v(!h),className:`group relative flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 hover:shadow-lg hover:scale-105 ${h||Object.keys(d).length>0?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/25":"text-slate-600 hover:text-slate-900 bg-slate-50/50 hover:bg-slate-100/80 border border-slate-200/50"}`,children:[n.jsx(Tc,{className:"w-4 h-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"Filters"}),Object.keys(d).length>0&&n.jsx("span",{className:"ml-1 bg-white/20 text-white text-xs px-2 py-0.5 rounded-full font-semibold",children:Object.keys(d).length})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 px-6 py-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Sort by"}),n.jsx("div",{className:"flex flex-wrap items-center gap-2",children:[{field:"updatedAt",label:"Updated",icon:Us},{field:"createdAt",label:"Created",icon:ft},{field:"priority",label:"Priority",icon:Ac},{field:"dueDate",label:"Due Date",icon:El}].map(({field:k,label:T,icon:L})=>n.jsxs("button",{onClick:()=>J(k),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 ${m===k?"bg-slate-900 text-white shadow-lg shadow-slate-900/25":"text-slate-600 hover:text-slate-900 bg-slate-50/50 hover:bg-slate-100/80 border border-slate-200/50"}`,children:[n.jsx(L,{className:"w-3.5 h-3.5"}),n.jsx("span",{className:"whitespace-nowrap",children:T}),m===k&&(p==="desc"?n.jsx(kv,{className:"w-3 h-3"}):n.jsx(_v,{className:"w-3 h-3"}))]},k))})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[b.length>0&&n.jsx("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50/80 border border-blue-200/50 rounded-xl",children:n.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[b.length," selected"]})}),Object.keys(d).length>0&&n.jsxs("button",{onClick:()=>u({}),className:"flex items-center gap-2 px-3 py-2 text-red-600 hover:text-red-700 bg-red-50/50 hover:bg-red-100/80 border border-red-200/50 rounded-xl transition-all duration-200 hover:scale-105",children:[n.jsx(dt,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Clear filters"})]}),n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-slate-900 bg-slate-50/50 hover:bg-slate-100/80 border border-slate-200/50 rounded-xl transition-all duration-200 hover:scale-105",children:[n.jsx(xi,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium whitespace-nowrap",children:"Export"})]})]})]})]}),h&&n.jsx(cy,{filters:d,onFiltersChange:u,onClose:()=>v(!1)}),b.length>0&&n.jsx(ly,{selectedCount:b.length,onAction:W,onClear:()=>w([])}),n.jsx("div",{className:`${j==="grid"?"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6":"space-y-4"}`,children:o?n.jsx("div",{className:j==="grid"?"col-span-full":"",children:n.jsx(uy,{})}):B.length===0?n.jsxs("div",{className:"text-center py-12 col-span-full",children:[n.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(jn,{className:"w-12 h-12 text-slate-400"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No tickets found"}),n.jsx("p",{className:"text-slate-500 mb-4",children:"Create your first ticket to get started"}),n.jsxs("button",{onClick:()=>f(!0),className:"bg-gradient-to-r from-slate-900 to-slate-800 text-white px-6 py-3 rounded-xl hover:from-slate-800 hover:to-slate-700 transition-all duration-300 flex items-center space-x-2 mx-auto shadow-lg hover:shadow-xl",children:[n.jsx(vi,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:"Create Ticket"})]})]}):B.map(k=>n.jsx(dy,{ticket:k,viewMode:j,isSelected:b.includes(k.id),onSelect:()=>{w(T=>T.includes(k.id)?T.filter(L=>L!==k.id):[...T,k.id])},onClick:()=>t(k),isHighlighted:e===k.id},k.id))}),n.jsx(oy,{isOpen:x,onClose:()=>f(!1),onSubmit:A})]})})},yf=({value:t,onChange:e,placeholder:r,className:s,rows:a=3,onSubmit:i})=>{const{users:o}=Hs(),[l,c]=S.useState([]),[d,u]=S.useState(!1),[m,g]=S.useState(""),[p,y]=S.useState(0),[j,N]=S.useState(0),x=S.useRef(null);S.useEffect(()=>{c(o),console.log("🔧 MentionInput - Users from DataContext:",o.length,o.map(w=>w.name))},[o]);const f=l.filter(w=>w.name.toLowerCase().includes(m.toLowerCase())||w.email.toLowerCase().includes(m.toLowerCase())),h=w=>{const _=w.target.value,R=w.target.selectionStart;e(_);const C=_.substring(0,R).match(/@(\w*)$/);C?(console.log("🔧 Mention detected:",C,"Query:",C[1]),console.log("🔧 Available users:",l.length,"Filtered users will be:",l.filter(U=>U.name.toLowerCase().includes(C[1].toLowerCase())||U.email.toLowerCase().includes(C[1].toLowerCase())).length),u(!0),g(C[1]),y(R-C[0].length),N(0)):u(!1)},v=w=>{const _=t.substring(0,p),R=t.substring(p+m.length+1),A=`${_}@${w.name} ${R}`;e(A),u(!1),setTimeout(()=>{if(x.current){const C=p+w.name.length+2;x.current.focus(),x.current.setSelectionRange(C,C)}},0)},b=w=>{if(d&&f.length>0){w.key==="ArrowDown"?(w.preventDefault(),N(_=>_<f.length-1?_+1:0)):w.key==="ArrowUp"?(w.preventDefault(),N(_=>_>0?_-1:f.length-1)):w.key==="Enter"||w.key==="Tab"?(w.preventDefault(),v(f[j])):w.key==="Escape"&&u(!1);return}if(w.key==="Enter"){if(w.metaKey||w.ctrlKey)return;w.preventDefault(),i&&i()}};return n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:x,value:t,onChange:h,onKeyDown:b,placeholder:r,className:s,rows:a}),(console.log("🔧 Dropdown render check - showMentions:",d,"filteredUsers.length:",f.length),d&&f.length>0&&n.jsx("div",{className:"absolute z-[9999] bg-white border-2 border-blue-300 rounded-lg shadow-2xl mt-1 max-h-48 overflow-y-auto w-full left-0 top-full",children:f.map((w,_)=>n.jsxs("button",{type:"button",onClick:()=>v(w),className:`w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center space-x-3 ${_===j?"bg-gray-50":""}`,children:[n.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-600",children:w.name.charAt(0)})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name}),n.jsx("div",{className:"text-xs text-gray-500",children:w.department.name})]})]},w.id))}))]})},my=({commentId:t,replies:e,onAddReply:r})=>{const{authState:s}=Et(),a=s.user||{id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",name:"Admin",email:"admin@fleek.com",department:{id:"1",name:"Finance"},role:"admin"},[i,o]=S.useState(!1),[l,c]=S.useState(!1),[d,u]=S.useState(""),[m,g]=S.useState(!0),[p,y]=S.useState([]),j=h=>{const v=h.map(b=>({id:`temp-${Date.now()}-${Math.random()}`,name:b.name,url:URL.createObjectURL(b),type:b.type.startsWith("image/")?"image":b.type.startsWith("video/")?"video":"document",size:b.size,uploadedAt:new Date,uploadedBy:a}));y(b=>[...b,...v])},N=h=>{y(v=>v.filter(b=>b.id!==h))},x=()=>{(d.trim()||p.length>0)&&(r(t,{content:d,author:a,isInternal:m,attachments:p}),u(""),y([]),c(!1))},f=h=>{const v=/@(\w+(?:\s+\w+)*)/g;return h.split(v).map((w,_)=>_%2===1?n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-1 rounded font-medium",children:["@",w]},_):w)};return e!=null&&e.length||!l?n.jsx("div",{className:"ml-12 mt-2",children:n.jsxs("button",{onClick:()=>c(!0),className:"text-sm text-gray-500 hover:text-gray-700 flex items-center space-x-1 transition-colors duration-200",children:[n.jsx(wr,{className:"w-4 h-4"}),n.jsx("span",{children:"Reply"})]})}):n.jsxs("div",{className:"ml-12 mt-4 space-y-4",children:[(e==null?void 0:e.length)||!1,i&&n.jsx("div",{className:"space-y-4 border-l-2 border-gray-100 pl-4",children:e.map(h=>{var v;return n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx(be,{className:"w-3 h-3 text-gray-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.author.name}),n.jsx("span",{className:"text-xs text-gray-500",children:sr(h.createdAt)}),h.isInternal&&n.jsx("span",{className:"px-1.5 py-0.5 bg-amber-100 text-amber-800 text-xs rounded-full",children:"Internal"})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm text-gray-700",children:f(h.content)}),h.attachments&&((v=h.attachments)==null?void 0:v.length)>0&&n.jsx("div",{className:"mt-2",children:n.jsx(qn,{attachments:h.attachments})})]})]})]},h.id)})}),!l&&n.jsxs("button",{onClick:()=>c(!0),className:"text-sm text-gray-500 hover:text-gray-700 flex items-center space-x-1 transition-colors duration-200",children:[n.jsx(wr,{className:"w-4 h-4"}),n.jsx("span",{children:"Reply"})]}),l&&n.jsx("div",{className:"border-l-2 border-gray-100 pl-4",children:n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-900 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx(be,{className:"w-3 h-3 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(yf,{value:d,onChange:u,placeholder:"Write a reply... (Type @ to mention someone)",className:"w-full border border-gray-200 rounded-lg p-3 text-sm focus:ring-1 focus:ring-gray-900 focus:border-gray-900 resize-none transition-all duration-200",rows:2}),n.jsxs("div",{className:"mt-2",children:[n.jsx(Rc,{onFilesSelected:j,className:"mb-2"}),n.jsx(qn,{attachments:p,onRemove:N,showRemove:!0})]}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:m,onChange:h=>g(h.target.checked),className:"rounded border-gray-300 text-gray-900 focus:ring-gray-900"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Internal note"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>{c(!1),u(""),y([])},className:"text-xs text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"Cancel"}),n.jsxs("button",{onClick:x,disabled:!d.trim()&&p.length===0,className:"bg-gray-900 text-white px-3 py-1 rounded text-xs hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1 transition-colors duration-200",children:[n.jsx(hf,{className:"w-3 h-3"}),n.jsx("span",{children:"Reply"})]})]})]})]})]})})]})},fy=({isOpen:t,onClose:e,onSetReminder:r,ticketId:s,userId:a})=>{const[i,o]=S.useState(""),[l,c]=S.useState(""),d=u=>{u.preventDefault(),i&&l.trim()&&(r({ticketId:s,userId:a,reminderTime:new Date(i),message:l.trim(),isActive:!0}),o(""),c(""),e())};return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ft,{className:"w-5 h-5 text-gray-600"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Set Reminder"})]}),n.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:n.jsx(dt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Time *"}),n.jsx("input",{type:"datetime-local",value:i,onChange:u=>o(u.target.value),min:new Date().toISOString().slice(0,16),className:"w-full border border-gray-200 rounded-lg px-4 py-3 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Message *"}),n.jsx("textarea",{value:l,onChange:u=>c(u.target.value),rows:3,className:"w-full border border-gray-200 rounded-lg px-4 py-3 focus:ring-1 focus:ring-gray-900 focus:border-gray-900 transition-all duration-200 resize-none",placeholder:"What should we remind you about?",required:!0})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-100",children:[n.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:"Cancel"}),n.jsx("button",{type:"submit",className:"bg-gray-900 text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors duration-200",children:"Set Reminder"})]})]})]})}):null},py=({ticket:t,onBack:e})=>{var r,s,a;console.log("🔧 TicketDetail: Starting render with ticket:",t==null?void 0:t.id,t==null?void 0:t.title);try{const{tickets:i,updateTicket:o,addComment:l,addReply:c,setReminder:d,loadTicketComments:u,users:m}=Hs(),{authState:g}=Et();console.log("🔧 TicketDetail: DataContext loaded, tickets count:",i.length,"users count:",m.length);const p=i.find(P=>P.id===t.id)||t;if(console.log("🔧 TicketDetail: Live ticket found:",!!p,"ID:",p==null?void 0:p.id),!p||!p.id)return console.error("❌ TicketDetail: Invalid ticket data",{ticket:t,liveTicket:p,ticketsInContext:i.length}),n.jsx("div",{className:"max-w-5xl mx-auto px-8 py-8",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Ticket not found"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"The requested ticket could not be loaded."}),n.jsx("button",{onClick:e,className:"bg-slate-900 text-white px-6 py-2 rounded-xl hover:bg-slate-800 transition-colors",children:"Back to Tickets"})]})});const[y,j]=S.useState(""),[N,x]=S.useState(!0),[f,h]=S.useState([]),[v,b]=S.useState(!1),w=g.user||{id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",name:"Admin",email:"admin@fleek.com",department:ge[0],role:"admin"};S.useEffect(()=>{if(p&&p.id&&(!p.comments||p.comments.length===0)){console.log("🔄 Loading comments for ticket:",p.id);try{u(p.id)}catch(P){console.error("❌ Failed to load ticket comments:",P)}}},[p==null?void 0:p.id,u]);const _=async P=>{try{await o(p.id,{status:P}),console.log("✅ Ticket status updated:",P)}catch(O){console.error("❌ Failed to update ticket status:",O)}},R=async P=>{try{const O=P&&m.find(Y=>Y.id===P)||null,H=p.assignee;await o(p.id,{assignee:O});let re="";if(!H&&O?re=`${w.name} assigned this ticket to @${O.name}`:H&&O&&H.id!==O.id?re=`${w.name} reassigned this ticket from @${H.name} to @${O.name}`:H&&!O&&(re=`${w.name} unassigned this ticket from @${H.name}`),re){const Y={id:`assignment-comment-${Date.now()}`,content:re,author:w,isInternal:!1,type:"comment",attachments:[],replies:[],createdAt:new Date};await l(p.id,Y),console.log("✅ Assignment comment added:",re)}console.log("✅ Ticket assignee updated:",(O==null?void 0:O.name)||"Unassigned")}catch(O){console.error("❌ Failed to update ticket assignee:",O)}},A=P=>{const O=P.map(H=>({id:`temp-${Date.now()}-${Math.random()}`,name:H.name,url:URL.createObjectURL(H),type:H.type.startsWith("image/")?"image":H.type.startsWith("video/")?"video":"document",size:H.size,uploadedAt:new Date,uploadedBy:w}));h(H=>[...H,...O])},C=P=>{h(O=>O.filter(H=>H.id!==P))},U=async()=>{if(y.trim()||f.length>0){console.log("🔧 Attempting to add comment by user:",w==null?void 0:w.name,"to ticket:",p.id);try{const P={id:`comment-${Date.now()}`,content:y,author:w,isInternal:N,type:"comment",attachments:f,replies:[],createdAt:new Date};await l(p.id,P),j(""),h([]),console.log("✅ Comment added successfully")}catch(P){console.error("❌ Failed to add comment:",P),alert(`Failed to add comment: ${P instanceof Error?P.message:"Unknown error"}`)}}},B=async()=>{console.log("🔧 Attempting to mark ticket as solved:",p.id,"by user:",w==null?void 0:w.name);try{await o(p.id,{status:"resolved"}),console.log("✅ Ticket marked as solved successfully"),setTimeout(()=>{e()},1500)}catch(P){console.error("❌ Failed to mark ticket as solved:",P),alert(`Failed to mark ticket as solved: ${P instanceof Error?P.message:"Unknown error"}`)}},F=async P=>{try{const O={id:`reminder-${Date.now()}`,createdAt:new Date,...P};await d(p.id,O),console.log("✅ Reminder set successfully")}catch(O){console.error("❌ Failed to set reminder:",O)}},te=()=>(console.log("🔧 CanMarkAsSolved check - Current user:",w==null?void 0:w.name,"Ticket:",p.id),!0),ee=()=>p.assignee&&p.assignee.id===w.id,W=P=>({new:["assigned","in_progress","closed"],assigned:["in_progress","awaiting_response","resolved","closed"],in_progress:["awaiting_response","resolved","assigned"],awaiting_response:["in_progress","resolved","closed"],resolved:["closed","in_progress"],closed:["in_progress"]})[P]||[],J=P=>{switch(P){case"new":return"text-blue-700 bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200";case"assigned":return"text-amber-700 bg-gradient-to-r from-amber-50 to-amber-100 border-amber-200";case"in_progress":return"text-orange-700 bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200";case"awaiting_response":return"text-purple-700 bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200";case"resolved":return"text-emerald-700 bg-gradient-to-r from-emerald-50 to-emerald-100 border-emerald-200";case"closed":return"text-slate-700 bg-gradient-to-r from-slate-50 to-slate-100 border-slate-200";default:return"text-slate-700 bg-gradient-to-r from-slate-50 to-slate-100 border-slate-200"}},k=P=>{switch(P){case"urgent":return"text-red-600";case"high":return"text-orange-600";case"medium":return"text-amber-600";case"low":return"text-emerald-600";default:return"text-slate-600"}},T=P=>{switch(P){case"buyer":return"text-blue-700 bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200";case"seller":return"text-emerald-700 bg-gradient-to-r from-emerald-50 to-emerald-100 border-emerald-200";case"internal":return"text-purple-700 bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200";default:return"text-slate-700 bg-gradient-to-r from-slate-50 to-slate-100 border-slate-200"}},L=P=>{const O=/@(\w+(?:\s+\w+)*)/g;return P.split(O).map((re,Y)=>{if(Y%2===1){const Fe=m.find(Gr=>Gr.name===re);return n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-md font-medium",children:["@",re]},Y)}return re})};console.log("🔧 TicketDetail User Debug:",{totalUsersFromContext:m.length,usersData:m,ticketDepartment:p.department,ticketDepartmentId:(r=p.department)==null?void 0:r.id});const I=m.filter(P=>{var H,re,Y,Fe;const O=((H=P.department)==null?void 0:H.id)===((re=p.department)==null?void 0:re.id);return console.log(`🔧 User ${P.name} (${(Y=P.department)==null?void 0:Y.name}) matches ticket dept ${(Fe=p.department)==null?void 0:Fe.name}:`,O),O});return console.log("🔧 Filtered department users:",I.length,I.map(P=>P.name)),n.jsxs("div",{className:"max-w-5xl mx-auto px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsx("button",{onClick:e,className:"group p-3 hover:bg-slate-100/60 rounded-xl transition-all duration-300",children:n.jsx(Ha,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-900 group-hover:scale-110 transition-all duration-200"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:p.title}),Es(p.dueDate)&&n.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-full",children:[n.jsx(ct,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-sm font-medium text-red-700",children:"Overdue"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3 text-sm text-slate-500",children:[n.jsx("span",{className:"font-mono",children:p.id}),n.jsx("span",{children:"•"}),n.jsxs("span",{children:["Created ",sr(p.createdAt)]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[ee()&&n.jsxs("button",{onClick:()=>b(!0),className:"group bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 py-2.5 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 flex items-center space-x-2 shadow-lg hover:shadow-xl",children:[n.jsx(Fr,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200"}),n.jsx("span",{className:"font-medium",children:"Set Reminder"})]}),te()&&p.status!=="resolved"&&p.status!=="closed"&&n.jsxs("button",{onClick:B,className:"group bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-4 py-2.5 rounded-xl hover:from-emerald-600 hover:to-emerald-700 transition-all duration-300 flex items-center space-x-2 shadow-lg hover:shadow-xl",children:[n.jsx(Ut,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200"}),n.jsx("span",{className:"font-medium",children:"Mark as Solved"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[n.jsxs("div",{className:"col-span-2 space-y-8",children:[n.jsxs("div",{className:"flex items-center flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(jn,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"SLA:"}),n.jsxs("div",{className:`px-3 py-1 rounded-lg text-sm font-medium border ${Es(p.dueDate)?"bg-gradient-to-r from-red-50 to-red-100 border-red-200 text-red-700":"bg-gradient-to-r from-emerald-50 to-emerald-100 border-emerald-200 text-emerald-700"}`,children:[p.slaHours||p.department.slaHours,"h"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Status:"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:p.status,onChange:P=>_(P.target.value),className:`appearance-none border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200 ${J(p.status)}`,children:[n.jsx("option",{value:p.status,children:p.status.replace("_"," ")}),W(p.status).map(P=>n.jsx("option",{value:P,children:P.replace("_"," ")},P))]}),n.jsx(Ot,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-3 h-3 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Type:"}),n.jsx("span",{className:`px-3 py-1.5 rounded-lg text-sm font-medium border ${T(p.issueType)}`,children:p.issueType})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Jt,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Priority:"}),n.jsx("span",{className:`text-sm font-semibold ${k(p.priority)}`,children:p.priority})]}),p.reminder&&n.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gradient-to-r from-orange-50 to-orange-100 border border-orange-200 rounded-lg",children:[n.jsx(ft,{className:"w-4 h-4 text-orange-600"}),n.jsx("span",{className:"text-sm font-medium text-orange-700",children:"Reminder Set"})]})]}),(p.issueCategory||p.pocName)&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200/60 rounded-2xl p-6",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[n.jsx(Pc,{className:"w-5 h-5 mr-2 text-blue-600"}),"Issue Details"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.issueCategory&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Issue Category"}),n.jsx("p",{className:"font-semibold text-slate-900",children:p.issueCategory})]}),p.pocName&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Point of Contact"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[p.pocName,p.assignee&&n.jsxs("span",{className:"ml-2 text-sm text-emerald-600 font-medium",children:["(Assigned: ",p.assignee.name,")"]})]})]})]})]}),(p.orderNumber||p.orderValue)&&n.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200/60 rounded-2xl p-6",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[n.jsx(Cs,{className:"w-5 h-5 mr-2 text-slate-600"}),"Order Information"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[p.orderNumber&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Cs,{className:"w-5 h-5 text-slate-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Order Number"}),n.jsx("p",{className:"font-semibold text-slate-900 font-mono",children:p.orderNumber})]})]}),p.orderValue&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ev,{className:"w-5 h-5 text-slate-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Order Value"}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[p.currency," ",p.orderValue.toFixed(2)]})]})]}),p.currency&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(df,{className:"w-5 h-5 text-slate-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Currency"}),n.jsx("p",{className:"font-semibold text-slate-900",children:p.currency})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Description"}),n.jsx("div",{className:"bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-2xl p-6",children:n.jsx("p",{className:"text-slate-700 leading-relaxed whitespace-pre-wrap",children:p.description})})]}),((s=p.attachments)==null?void 0:s.length)||!1,n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:p.tags.map((P,O)=>n.jsx("span",{className:"px-3 py-1.5 bg-gradient-to-r from-slate-100 to-slate-200 text-slate-700 rounded-lg text-sm font-medium border border-slate-200",children:P},O))})]}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-6 flex items-center",children:[n.jsx(wr,{className:"w-5 h-5 mr-2"}),"Activity Timeline"]}),n.jsx("div",{className:"space-y-6",children:(()=>{var P;return console.log("🔧 Rendering comments - Total:",((P=p.comments)==null?void 0:P.length)||0,"Comments:",p.comments),!p.comments||p.comments.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(wr,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No activity yet. Be the first to comment!"})]}):p.comments.map(O=>{var H;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-200 to-slate-300 rounded-xl flex items-center justify-center flex-shrink-0",children:n.jsx(be,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:O.author.name}),n.jsx("span",{className:"text-sm text-slate-500",children:sr(O.createdAt)}),O.isInternal&&n.jsx("span",{className:"px-2 py-0.5 bg-gradient-to-r from-amber-100 to-amber-200 text-amber-800 text-xs rounded-full font-medium border border-amber-200",children:"Internal"})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-xl p-4",children:[n.jsx("p",{className:"text-slate-700 leading-relaxed",children:L(O.content)}),O.attachments&&((H=O.attachments)==null?void 0:H.length)>0&&n.jsx("div",{className:"mt-4",children:n.jsx(qn,{attachments:O.attachments})})]})]})]}),n.jsx(my,{commentId:O.id,replies:O.replies||[],onAddReply:(re,Y)=>{c(p.id,re,{...Y,id:`reply-${Date.now()}`,createdAt:new Date})}})]},O.id)})})()}),n.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl flex items-center justify-center flex-shrink-0",children:n.jsx(be,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(yf,{value:y,onChange:j,placeholder:"Add a comment... (Type @ to mention someone, Enter to submit, Cmd+Enter for new line)",className:"w-full border border-slate-200/60 rounded-xl p-4 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 resize-none transition-all duration-300 bg-white/80 backdrop-blur-sm hover:bg-white",rows:3,onSubmit:U}),n.jsxs("div",{className:"mt-4",children:[n.jsx(Rc,{onFilesSelected:A,className:"mb-2"}),n.jsx(qn,{attachments:f,onRemove:C,showRemove:!0})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:N,onChange:P=>x(P.target.checked),className:"rounded border-slate-300 text-slate-900 focus:ring-slate-900"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Internal note"})]}),n.jsxs("button",{onClick:U,disabled:!y.trim()&&f.length===0,className:"group bg-gradient-to-r from-slate-900 to-slate-800 text-white px-6 py-2.5 rounded-xl hover:from-slate-800 hover:to-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-all duration-300 shadow-lg hover:shadow-xl disabled:shadow-none",children:[n.jsx(hf,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200"}),n.jsx("span",{className:"font-medium",children:"Comment"})]})]})]})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-2xl p-6",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-4 flex items-center",children:[n.jsx(be,{className:"w-4 h-4 mr-2"}),"Assignee"]}),p.assignee&&n.jsx("div",{className:"mb-4 p-3 bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:n.jsx(be,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold text-blue-900",children:p.assignee.name}),n.jsxs("div",{className:"text-xs text-blue-700",children:[p.assignee.role," • ",p.assignee.department.name]})]})]})}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:((a=p.assignee)==null?void 0:a.id)||"",onChange:P=>R(P.target.value),className:"w-full appearance-none border border-slate-200/60 rounded-xl px-4 py-3 pr-10 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-300 bg-white/80 hover:bg-white",children:[n.jsx("option",{value:"",children:p.assignee?"Unassign ticket":"Select assignee"}),I.map(P=>{var O;return n.jsxs("option",{value:P.id,children:[P.name," (",P.role,")",P.id===((O=p.assignee)==null?void 0:O.id)?" - Currently Assigned":""]},P.id)})]}),n.jsx(Ot,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),!p.assignee&&n.jsx("div",{className:"mt-3 p-3 bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ct,{className:"w-4 h-4 text-amber-600"}),n.jsx("span",{className:"text-xs text-amber-700 font-medium",children:"This ticket is unassigned"})]})})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-2xl p-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-4",children:"Department"}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.department.color}}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:p.department.name})]})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-2xl p-6",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-4 flex items-center",children:[n.jsx(ft,{className:"w-4 h-4 mr-2"}),"Timeline"]}),n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"Created"}),n.jsx("span",{className:"text-slate-900 font-medium",children:sr(p.createdAt)})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"Updated"}),n.jsx("span",{className:"text-slate-900 font-medium",children:sr(p.updatedAt)})]}),p.dueDate&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"Due"}),n.jsx("span",{className:`font-semibold ${Es(p.dueDate)?"text-red-600":"text-slate-900"}`,children:sr(p.dueDate)})]}),p.reminder&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"Reminder"}),n.jsx("span",{className:"text-orange-600 font-semibold",children:sr(p.reminder.reminderTime)})]})]})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-2xl p-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-4",children:"Reporter"}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-200 to-slate-300 rounded-xl flex items-center justify-center",children:n.jsx(be,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-slate-700",children:p.reporter.name}),n.jsx("div",{className:"text-xs text-slate-500",children:p.reporter.department.name})]})]})]})]})]}),n.jsx(fy,{isOpen:v,onClose:()=>b(!1),onSetReminder:F,ticketId:p.id,userId:w.id})]})}catch(i){return console.error("❌ TicketDetail: Caught error during render:",i),n.jsx("div",{className:"max-w-5xl mx-auto px-8 py-8",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Error loading ticket"}),n.jsxs("p",{className:"text-slate-600 mb-4",children:["There was an error loading the ticket details: ",i instanceof Error?i.message:"Unknown error"]}),n.jsx("button",{onClick:e,className:"bg-slate-900 text-white px-6 py-2 rounded-xl hover:bg-slate-800 transition-colors",children:"Back to Tickets"})]})})}},gy=()=>{const{tickets:t}=Hs(),e=zf.useMemo(()=>{const a=t||[],i=a.length,o=a.filter(f=>["new","assigned","in_progress","awaiting_response"].includes(f.status)).length,l=a.filter(f=>f.status==="resolved").length,c=a.filter(f=>f.status==="resolved"),d=c.length>0?c.reduce((f,h)=>{const v=new Date(h.updatedAt).getTime()-new Date(h.createdAt).getTime();return f+v},0)/c.length/(1e3*60*60):0,u=a.filter(f=>f.dueDate&&new Date>f.dueDate&&!["resolved","closed"].includes(f.status)).length,m=a.reduce((f,h)=>f+(h.slaHours||h.department.slaHours),0)/a.length,g=a.reduce((f,h)=>(f[h.status]=(f[h.status]||0)+1,f),{}),p=a.reduce((f,h)=>(f[h.department.name]=(f[h.department.name]||0)+1,f),{}),y=a.reduce((f,h)=>(f[h.priority]=(f[h.priority]||0)+1,f),{}),j=ge.reduce((f,h)=>{const v=a.filter(b=>b.department.id===h.id&&b.status==="resolved"&&b.resolutionTime);if(v.length>0){const b=v.map(A=>A.resolutionTime).sort((A,C)=>A-C),w=b.reduce((A,C)=>A+C,0)/b.length,_=Math.floor(b.length*.9),R=b[_]||b[b.length-1];f[h.name]={avgResolutionTime:w/60,p90ResolutionTime:R/60,ticketCount:v.length,color:h.color}}return f},{}),N=a.filter(f=>f.status==="resolved"&&f.resolutionTime).map(f=>f.resolutionTime).sort((f,h)=>f-h),x=N.length>0?N[Math.floor(N.length*.9)]/60:0;return{totalTickets:i,openTickets:o,resolvedTickets:l,avgResolutionTime:d,slaBreaches:u,avgSlaHours:m,ticketsByStatus:g,ticketsByDepartment:p,ticketsByPriority:y,departmentResolutionTimes:j,overallP90ResolutionTime:x}},[]),r=({title:a,value:i,icon:o,trend:l,color:c="slate",description:d})=>n.jsxs("div",{className:"group relative bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-6 hover:shadow-lg hover:shadow-slate-200/50 transition-all duration-300 hover:border-slate-300/60",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-slate-50/50 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:`p-3 bg-gradient-to-br from-${c}-100 to-${c}-200 rounded-xl group-hover:scale-110 transition-transform duration-300`,children:n.jsx("div",{className:`text-${c}-600`,children:o})}),l&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ac,{className:"w-4 h-4 text-emerald-600"}),n.jsx("span",{className:"text-sm text-emerald-600 font-semibold",children:l})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1 group-hover:text-slate-800 transition-colors duration-200",children:i}),n.jsx("p",{className:"text-sm font-medium text-slate-600 mb-1",children:a}),d&&n.jsx("p",{className:"text-xs text-slate-500",children:d})]})]})]}),s=({title:a,data:i,total:o,icon:l,colorMap:c})=>n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-6 hover:shadow-lg hover:shadow-slate-200/50 transition-all duration-300",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl",children:n.jsx("div",{className:"text-slate-600",children:l})}),n.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:a})]}),n.jsx("div",{className:"space-y-4",children:Object.entries(i).map(([d,u])=>{const m=u/o*100,g=(c==null?void 0:c[d])||"slate";return n.jsxs("div",{className:"group",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex items-center space-x-3",children:n.jsx("span",{className:"text-sm font-medium text-slate-700 capitalize",children:d.replace("_"," ")})}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-sm text-slate-600 font-semibold",children:u}),n.jsxs("span",{className:"text-xs text-slate-500",children:[m.toFixed(1),"%"]})]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:`bg-${g}-500 h-2 rounded-full transition-all duration-500 group-hover:bg-${g}-600`,style:{width:`${m}%`}})})]},d)})})]});return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx(zn,{className:"w-8 h-8 text-blue-600"}),n.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Analytics Dashboard"}),n.jsx("span",{className:"text-xs font-medium text-emerald-700",children:"Live Data"})]}),n.jsx("p",{className:"text-slate-600",children:"Track team performance and ticket metrics in real-time"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[n.jsx(r,{title:"Total Tickets",value:e.totalTickets,icon:n.jsx(gi,{className:"w-5 h-5"}),trend:"+12%",color:"blue",description:"All time tickets created"}),n.jsx(r,{title:"Active Tickets",value:e.openTickets,icon:n.jsx(Jt,{className:"w-5 h-5"}),color:"orange",description:"Currently being worked on"}),n.jsx(r,{title:"Resolved Tickets",value:e.resolvedTickets,icon:n.jsx(Ut,{className:"w-5 h-5"}),trend:"+8%",color:"emerald",description:"Successfully completed"}),n.jsx(r,{title:"Avg Resolution",value:`${Math.round(e.avgResolutionTime)}h`,icon:n.jsx(ft,{className:"w-5 h-5"}),trend:"-15%",color:"purple",description:"Time to resolve tickets"}),n.jsx(r,{title:"Avg SLA Time",value:`${Math.round(e.avgSlaHours)}h`,icon:n.jsx(jn,{className:"w-5 h-5"}),color:"indigo",description:"Service level agreement"}),n.jsx(r,{title:"P90 Resolution",value:`${Math.round(e.overallP90ResolutionTime)}h`,icon:n.jsx(zv,{className:"w-5 h-5"}),trend:"-8%",color:"cyan",description:"90th percentile resolution time"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[n.jsx(s,{title:"Tickets by Status",data:e.ticketsByStatus,total:e.totalTickets,icon:n.jsx(gi,{className:"w-5 h-5"}),colorMap:{new:"blue",assigned:"amber",in_progress:"orange",awaiting_response:"purple",resolved:"emerald",closed:"slate"}}),n.jsx(s,{title:"Tickets by Department",data:e.ticketsByDepartment,total:e.totalTickets,icon:n.jsx(ws,{className:"w-5 h-5"}),colorMap:{Finance:"blue",Operations:"emerald",Supply:"amber",Tech:"purple",Growth:"red",CX:"slate",Engineers:"teal","Seller Support":"rose"}})]}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-6 hover:shadow-lg hover:shadow-slate-200/50 transition-all duration-300",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl",children:n.jsx(ft,{className:"w-5 h-5 text-slate-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Department Resolution Performance"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(e.departmentResolutionTimes).map(([a,i])=>n.jsxs("div",{className:"p-4 bg-gradient-to-br from-slate-50 to-white rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:a}),n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Avg Resolution:"}),n.jsxs("span",{className:"font-semibold text-slate-900",children:[i.avgResolutionTime.toFixed(1),"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"P90 Resolution:"}),n.jsxs("span",{className:"font-semibold text-orange-600",children:[i.p90ResolutionTime.toFixed(1),"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Tickets:"}),n.jsx("span",{className:"font-semibold text-slate-900",children:i.ticketCount})]})]})]},a))})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx(s,{title:"Priority Distribution",data:e.ticketsByPriority,total:e.totalTickets,icon:n.jsx(ct,{className:"w-5 h-5"}),colorMap:{urgent:"red",high:"orange",medium:"amber",low:"emerald"}}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-6 hover:shadow-lg hover:shadow-slate-200/50 transition-all duration-300",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl",children:n.jsx(Sv,{className:"w-5 h-5 text-slate-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"SLA Performance"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"group p-4 bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl hover:shadow-md transition-all duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ct,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"font-semibold text-red-900",children:"SLA Breaches"})]}),n.jsx("span",{className:"text-2xl font-bold text-red-600",children:e.slaBreaches})]}),n.jsx("p",{className:"text-sm text-red-700 mt-2",children:"Tickets exceeding SLA timeframes"})]}),n.jsxs("div",{className:"group p-4 bg-gradient-to-r from-emerald-50 to-emerald-100 border border-emerald-200 rounded-xl hover:shadow-md transition-all duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ut,{className:"w-5 h-5 text-emerald-600"}),n.jsx("span",{className:"font-semibold text-emerald-900",children:"On-time Resolution"})]}),n.jsxs("span",{className:"text-2xl font-bold text-emerald-600",children:[Math.round((e.totalTickets-e.slaBreaches)/e.totalTickets*100),"%"]})]}),n.jsx("p",{className:"text-sm text-emerald-700 mt-2",children:"Tickets resolved within SLA"})]})]})]})]})]})},xy=()=>{var Jr,ia;const t=Et(),{authState:e,updateProfile:r,updateUserProfile:s}=t,{users:a}=Hs();if(!e)return n.jsx("div",{className:"max-w-7xl mx-auto px-8 py-8",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Dt,{className:"w-8 h-8 text-blue-500 mx-auto mb-4 animate-spin"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Loading Settings..."}),n.jsx("p",{className:"text-slate-600",children:"Please wait while we load your settings"})]})});const[i,o]=S.useState("profile"),[l,c]=S.useState(!1),[d,u]=S.useState({email:!0,push:!0,slack:!1,sms:!1,desktop:!0,sound:!0}),[m,g]=S.useState({start:"09:00",end:"17:00",timezone:"UTC",workingDays:[1,2,3,4,5]}),[p,y]=S.useState({enabled:!0,maxTickets:10,skillBased:!0,roundRobin:!1}),[j,N]=S.useState({defaultSla:24,escalationEnabled:!0,escalationHours:48,weekendSla:!1}),[x,f]=S.useState([{id:"1",name:"Customer Tier",type:"select",options:["Free","Pro","Enterprise"],required:!1},{id:"2",name:"Urgency Level",type:"number",required:!0}]),[h,v]=S.useState({name:"",type:"text",required:!1}),[b,w]=S.useState(!1),[_,R]=S.useState(null),[A,C]=S.useState(!1),[U,B]=S.useState(!1),[F,te]=S.useState(""),[ee,W]=S.useState(!1),[J,k]=S.useState([]),[T,L]=S.useState(!0),[I,P]=S.useState({name:"",email:"",role:"",department:""});S.useEffect(()=>{var $,G,me,It;if(console.log("🔧 Settings v2.0: loadUsers effect triggered",{userRole:($=e.user)==null?void 0:$.role,activeTab:i,isAdmin:((G=e.user)==null?void 0:G.role)==="admin",dataContextUsersCount:a.length,dataContextUsersPreview:a.slice(0,2).map(De=>({id:De.id,name:De.name,role:De.role}))}),((me=e.user)==null?void 0:me.role)==="admin"&&i==="users"){console.log("🔄 Settings: Loading users from DataContext..."),L(!0);const De=a.map(xt=>({id:xt.id,name:xt.name,email:xt.email,role:xt.role,department:xt.department,isBlocked:xt.isBlocked,blockedReason:void 0}));k(De),L(!1),console.log("✅ Settings: Users loaded from DataContext:",De.length,De)}else i!=="users"||console.log("⚠️ Settings: Not loading users because conditions not met - UserRole:",(It=e.user)==null?void 0:It.role,"ActiveTab:",i),L(!1)},[(Jr=e.user)==null?void 0:Jr.role,i,a]);const O=[{id:"profile",label:"Profile",icon:be},{id:"notifications",label:"Notifications",icon:Fr},{id:"appearance",label:"Appearance",icon:yu},{id:"workflow",label:"Workflow",icon:Jt},{id:"departments",label:"Departments",icon:Bn},{id:"data",label:"Data & Export",icon:xi}],H=((ia=e.user)==null?void 0:ia.role)==="admin"?[...O,{id:"users",label:"User Management",icon:ws}]:O,re=async()=>{try{console.log("Profile saved")}catch($){console.error("Failed to save profile:",$)}},Y=$=>{console.log(`Exporting data as ${$}`)},Fe=()=>{if(h.name.trim()){const $={id:Date.now().toString(),...h,options:h.type==="select"?[]:void 0};f([...x,$]),v({name:"",type:"text",required:!1}),w(!1)}},Gr=$=>{f(x.filter(G=>G.id!==$))},Pe=()=>{var $,G;return n.jsx("div",{className:"space-y-8",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-8",children:[n.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-6 flex items-center",children:[n.jsx(be,{className:"w-5 h-5 mr-3"}),"Personal Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",defaultValue:($=e.user)==null?void 0:$.name,className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",defaultValue:(G=e.user)==null?void 0:G.email,className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Department"}),n.jsx("select",{className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",children:ge.map(me=>n.jsx("option",{value:me.id,children:me.name},me.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Role"}),n.jsxs("select",{className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",children:[n.jsx("option",{value:"agent",children:"Agent"}),n.jsx("option",{value:"senior_agent",children:"Senior Agent"}),n.jsx("option",{value:"team_lead",children:"Team Lead"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"admin",children:"Admin"})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Working Hours"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Start Time"}),n.jsx("input",{type:"time",value:m.start,onChange:me=>g({...m,start:me.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"End Time"}),n.jsx("input",{type:"time",value:m.end,onChange:me=>g({...m,end:me.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200"})]})]})]}),n.jsx("div",{className:"flex justify-end mt-8",children:n.jsxs("button",{onClick:re,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-300 flex items-center space-x-2 shadow-lg hover:shadow-xl",children:[n.jsx(bu,{className:"w-4 h-4"}),n.jsx("span",{children:"Save Changes"})]})})]})})},_r=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-8",children:[n.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-6 flex items-center",children:[n.jsx(Fr,{className:"w-5 h-5 mr-3"}),"Notification Preferences"]}),n.jsx("div",{className:"space-y-6",children:[{key:"email",label:"Email Notifications",icon:Wn,description:"Receive notifications via email"},{key:"push",label:"Push Notifications",icon:Fv,description:"Browser push notifications"},{key:"desktop",label:"Desktop Notifications",icon:Iv,description:"System desktop notifications"},{key:"sound",label:"Sound Alerts",icon:Hv,description:"Audio notifications for urgent tickets"}].map(({key:$,label:G,icon:me,description:It})=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(me,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:G}),n.jsx("div",{className:"text-sm text-slate-500",children:It})]})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:d[$],onChange:De=>u({...d,[$]:De.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},$))})]})}),pt=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-8",children:[n.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-6 flex items-center",children:[n.jsx(yu,{className:"w-5 h-5 mr-3"}),"Appearance & Theme"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:l?n.jsx(uf,{className:"w-4 h-4 text-slate-600"}):n.jsx(mf,{className:"w-4 h-4 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:"Dark Mode"}),n.jsx("div",{className:"text-sm text-slate-500",children:"Switch between light and dark themes"})]})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:l,onChange:$=>c($.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Density"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Compact","Comfortable","Spacious"].map($=>n.jsx("button",{className:"p-3 border border-slate-200 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors duration-200",children:$},$))})]})]})]})}),ta=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-8",children:[n.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-6 flex items-center",children:[n.jsx(Jt,{className:"w-5 h-5 mr-3"}),"Workflow & Automation"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Auto-Assignment Settings"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:"Enable Auto-Assignment"}),n.jsx("div",{className:"text-sm text-slate-500",children:"Automatically assign tickets based on rules"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:p.enabled,onChange:$=>y({...p,enabled:$.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Max Concurrent Tickets"}),n.jsx("input",{type:"number",value:p.maxTickets,onChange:$=>y({...p,maxTickets:parseInt($.target.value)}),className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Assignment Method"}),n.jsxs("select",{className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",children:[n.jsx("option",{value:"skill",children:"Skill-based"}),n.jsx("option",{value:"round_robin",children:"Round Robin"}),n.jsx("option",{value:"workload",children:"Workload-based"})]})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"SLA Settings"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Default SLA (hours)"}),n.jsx("input",{type:"number",value:j.defaultSla,onChange:$=>N({...j,defaultSla:parseInt($.target.value)}),className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Escalation After (hours)"}),n.jsx("input",{type:"number",value:j.escalationHours,onChange:$=>N({...j,escalationHours:parseInt($.target.value)}),className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200"})]})]})]})]})]})}),ra=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-xl font-semibold text-slate-900 flex items-center",children:[n.jsx(ko,{className:"w-5 h-5 mr-3"}),"Custom Fields"]}),n.jsxs("button",{onClick:()=>w(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 flex items-center space-x-2",children:[n.jsx(vi,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Field"})]})]}),n.jsx("div",{className:"space-y-4",children:x.map($=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:$.name}),n.jsxs("div",{className:"text-sm text-slate-500 capitalize",children:[$.type," field ",$.required&&"(Required)"]})]}),n.jsx("button",{onClick:()=>Gr($.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors duration-200",children:n.jsx(Tl,{className:"w-4 h-4"})})]},$.id))}),b&&n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[n.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Add Custom Field"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Field Name"}),n.jsx("input",{type:"text",value:h.name,onChange:$=>v({...h,name:$.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",placeholder:"Enter field name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Field Type"}),n.jsxs("select",{value:h.type,onChange:$=>v({...h,type:$.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",children:[n.jsx("option",{value:"text",children:"Text"}),n.jsx("option",{value:"number",children:"Number"}),n.jsx("option",{value:"select",children:"Select"}),n.jsx("option",{value:"date",children:"Date"}),n.jsx("option",{value:"boolean",children:"Yes/No"})]})]}),n.jsx("div",{className:"flex items-end space-x-2",children:n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:h.required,onChange:$=>v({...h,required:$.target.checked}),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Required"})]})})]}),n.jsxs("div",{className:"flex items-center space-x-3 mt-4",children:[n.jsxs("button",{onClick:Fe,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2",children:[n.jsx(cf,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Field"})]}),n.jsxs("button",{onClick:()=>w(!1),className:"text-slate-600 hover:text-slate-800 px-4 py-2 rounded-lg hover:bg-slate-100 transition-colors duration-200 flex items-center space-x-2",children:[n.jsx(dt,{className:"w-4 h-4"}),n.jsx("span",{children:"Cancel"})]})]})]})]})}),Sr=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-8",children:[n.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-6 flex items-center",children:[n.jsx(xi,{className:"w-5 h-5 mr-3"}),"Data Export & Backup"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Export Options"}),n.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{format:"csv",label:"CSV Export",description:"Spreadsheet compatible format"},{format:"json",label:"JSON Export",description:"Raw data format"},{format:"pdf",label:"PDF Report",description:"Formatted report"}].map(({format:$,label:G,description:me})=>n.jsxs("button",{onClick:()=>Y($),className:"p-4 border border-slate-200 rounded-xl hover:bg-slate-50 transition-colors duration-200 text-left",children:[n.jsx("div",{className:"font-medium text-slate-900",children:G}),n.jsx("div",{className:"text-sm text-slate-500 mt-1",children:me})]},$))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Automated Reports"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:"Daily Summary"}),n.jsx("div",{className:"text-sm text-slate-500",children:"Email daily ticket summary at 6 PM"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:"Weekly Report"}),n.jsx("div",{className:"text-sm text-slate-500",children:"Comprehensive weekly performance report"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]})]})}),ae=()=>{o("profile"),setTimeout(()=>o("users"),100)},Cr=async $=>{if(F.trim()){W(!0);try{t.blockUser&&(await t.blockUser($.id,F),ae()),B(!1),te(""),R(null)}catch(G){console.error("Failed to block user:",G),alert(`Failed to block user: ${G instanceof Error?G.message:"Unknown error"}`)}finally{W(!1)}}},sa=async $=>{W(!0);try{t.unblockUser&&(await t.unblockUser($.id),ae())}catch(G){console.error("Failed to unblock user:",G),alert(`Failed to unblock user: ${G instanceof Error?G.message:"Unknown error"}`)}finally{W(!1)}},na=async $=>{if(confirm(`Are you sure you want to delete ${$.name}? This action cannot be undone.`)){W(!0);try{t.deleteUser&&(await t.deleteUser($.id),ae())}catch(G){console.error("Failed to delete user:",G),alert(`Failed to delete user: ${G instanceof Error?G.message:"Unknown error"}`)}finally{W(!1)}}},aa=$=>{var G;R($),P({name:$.name,email:$.email,role:$.role,department:((G=$.department)==null?void 0:G.name)||""}),C(!0)},Vs=async()=>{if(_){W(!0);try{const $=ge.find(me=>me.name===I.department),G={name:I.name,email:I.email,role:I.role,department:$||null};if(s)await s(_.id,G),C(!1),R(null),ae();else throw new Error("Update function not available. Please ensure you are logged in as an admin.")}catch($){console.error("Failed to update user:",$),alert(`Failed to update user: ${$ instanceof Error?$.message:"Unknown error"}`)}finally{W(!1)}}},gt=()=>{var G,me,It,De,xt,oa;return console.log("🔧 User Management Debug:",{userRole:(G=e.user)==null?void 0:G.role,usersCount:J.length,dataContextUsersCount:a.length,updateUserProfileAvailable:!!s}),((me=e.user)==null?void 0:me.role)==="admin"||((It=e.user)==null?void 0:It.role)==="super_admin"?n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-xl font-semibold text-slate-900 flex items-center",children:[n.jsx(ws,{className:"w-5 h-5 mr-3"}),"User Management"]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("span",{className:"text-sm text-slate-500",children:[J.length," users found"]}),n.jsxs("button",{onClick:ae,disabled:T,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Us,{className:`w-4 h-4 ${T?"animate-spin":""}`}),n.jsx("span",{children:T?"Loading...":"Refresh"})]})]})]}),n.jsx("div",{className:"space-y-4",children:T?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Dt,{className:"w-8 h-8 text-blue-500 mx-auto mb-4 animate-spin"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Loading Users..."}),n.jsx("p",{className:"text-slate-500",children:"Fetching user data from the database"})]}):J.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Users Found"}),n.jsx("p",{className:"text-slate-500 mb-4",children:"No users found in the system database."}),n.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"Troubleshooting:"}),n.jsx("br",{}),"1. Make sure users are registered in the Supabase database",n.jsx("br",{}),"2. Check browser console for any errors",n.jsx("br",{}),"3. Try refreshing the page",n.jsx("br",{}),"4. Verify Supabase connection is working",n.jsx("br",{}),"5. Check that you're logged in as an admin user"]})})]}):J.map(ue=>{var Yr,qs,Ks;return n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-slate-900",children:ue.name||"Unknown Name"}),ue.role==="super_admin"&&n.jsx("span",{className:"px-2 py-1 bg-gradient-to-r from-purple-100 to-purple-200 text-purple-800 text-xs rounded-full font-medium",children:"Super Admin"}),ue.role==="admin"&&n.jsx("span",{className:"px-2 py-1 bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 text-xs rounded-full font-medium",children:"Admin"}),ue.isBlocked&&n.jsx("span",{className:"px-2 py-1 bg-gradient-to-r from-red-100 to-red-200 text-red-800 text-xs rounded-full font-medium",children:"Blocked"})]}),n.jsxs("div",{className:"text-sm text-slate-500",children:[ue.email||"No Email"," • ",ue.role||"No Role"," • ",((Yr=ue.department)==null?void 0:Yr.name)||"No Department"]}),ue.isBlocked&&ue.blockedReason&&n.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Blocked: ",ue.blockedReason]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[ue.id!==((qs=e.user)==null?void 0:qs.id)&&n.jsx("button",{onClick:()=>aa(ue),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200",disabled:ee,title:"Edit user",children:n.jsx(ko,{className:"w-4 h-4"})}),ue.role!=="super_admin"&&ue.role!=="admin"&&n.jsx(n.Fragment,{children:ue.isBlocked?n.jsx("button",{onClick:()=>sa(ue),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors duration-200",disabled:ee,title:"Unblock user",children:n.jsx(Ut,{className:"w-4 h-4"})}):n.jsx("button",{onClick:()=>{R(ue),B(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors duration-200",disabled:ee,title:"Block user",children:n.jsx(bn,{className:"w-4 h-4"})})}),ue.id!==((Ks=e.user)==null?void 0:Ks.id)&&n.jsx("button",{onClick:()=>na(ue),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",disabled:ee,title:"Delete user",children:n.jsx(Tl,{className:"w-4 h-4"})})]})]},ue.id)})})]})}):n.jsx("div",{className:"space-y-6",children:n.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-8",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Access Restricted"}),n.jsx("p",{className:"text-slate-500 mb-4",children:"Only administrators can manage user accounts."}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-left",children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"Current User:"}),n.jsx("br",{}),"Name: ",((De=e.user)==null?void 0:De.name)||"Unknown",n.jsx("br",{}),"Role: ",((xt=e.user)==null?void 0:xt.role)||"Unknown",n.jsx("br",{}),"Email: ",((oa=e.user)==null?void 0:oa.email)||"Unknown"]})}),n.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-left",children:n.jsxs("p",{className:"text-sm text-amber-700",children:[n.jsx("strong",{children:"Admin Login:"}),n.jsx("br",{}),"Username: ",n.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"admin"}),n.jsx("br",{}),"Password: ",n.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"admin123"})]})}),n.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-left",children:n.jsxs("p",{className:"text-sm text-green-700",children:[n.jsx("strong",{children:"Users in system:"})," ",a.length," users found"]})})]})]})})})},Ws=()=>{var $;switch(i){case"profile":return Pe();case"notifications":return _r();case"appearance":return pt();case"workflow":return ta();case"departments":return ra();case"data":return Sr();case"users":return(($=e.user)==null?void 0:$.role)==="admin"?gt():null;default:return Pe()}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 bg-clip-text text-transparent tracking-tight mb-2",children:"Settings"}),n.jsx("p",{className:"text-slate-600",children:"Manage your account, preferences, and system configuration (v2.1 - DataContext)"})]}),n.jsxs("div",{className:"flex gap-8",children:[n.jsx("div",{className:"w-64 flex-shrink-0",children:n.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-slate-200/60 p-2",children:n.jsx("nav",{className:"space-y-1",children:H.map(({id:$,label:G,icon:me})=>n.jsxs("button",{onClick:()=>o($),className:`w-full flex items-center space-x-3 px-4 py-3 text-left rounded-xl transition-all duration-200 ${i===$?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border border-blue-200":"text-slate-600 hover:text-slate-900 hover:bg-slate-50"}`,children:[n.jsx(me,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:G})]},$))})})}),n.jsx("div",{className:"flex-1",children:Ws()})]}),A&&_&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 transition-opacity bg-slate-500 bg-opacity-75",onClick:()=>C(!1)}),n.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(ko,{className:"w-5 h-5 mr-2"}),"Edit User"]}),n.jsx("button",{onClick:()=>C(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(dt,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",value:I.name,onChange:$=>P({...I,name:$.target.value}),className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",placeholder:"Enter full name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",value:I.email,onChange:$=>P({...I,email:$.target.value}),className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",placeholder:"Enter email address"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Role"}),n.jsxs("select",{value:I.role,onChange:$=>P({...I,role:$.target.value}),className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",children:[n.jsx("option",{value:"agent",children:"Agent"}),n.jsx("option",{value:"senior_agent",children:"Senior Agent"}),n.jsx("option",{value:"team_lead",children:"Team Lead"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Department"}),n.jsxs("select",{value:I.department,onChange:$=>P({...I,department:$.target.value}),className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/30 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Select Department"}),ge.map($=>n.jsx("option",{value:$.name,children:$.name},$.id))]})]}),_.isBlocked&&n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:n.jsxs("p",{className:"text-sm text-red-700",children:[n.jsx("strong",{children:"User Status:"})," This user is currently blocked.",_.blockedReason&&n.jsxs(n.Fragment,{children:[n.jsx("br",{}),n.jsx("strong",{children:"Reason:"})," ",_.blockedReason]})]})})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6 pt-4 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",disabled:ee,children:"Cancel"}),n.jsx("button",{onClick:Vs,disabled:ee||!I.name.trim()||!I.email.trim(),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(Dt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{children:"Saving..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(bu,{className:"w-4 h-4"}),n.jsx("span",{children:"Save Changes"})]})})]})]})]})}),U&&_&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 transition-opacity bg-slate-500 bg-opacity-75",onClick:()=>B(!1)}),n.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(bn,{className:"w-5 h-5 mr-2 text-orange-600"}),"Block User"]}),n.jsx("button",{onClick:()=>B(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(dt,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["You are about to block ",n.jsx("strong",{children:_.name}),". Please provide a reason:"]}),n.jsx("textarea",{value:F,onChange:$=>te($.target.value),placeholder:"Enter reason for blocking this user...",className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/30 transition-all duration-200 h-24 resize-none"})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",disabled:ee,children:"Cancel"}),n.jsx("button",{onClick:()=>Cr(_),disabled:ee||!F.trim(),className:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-2 rounded-lg hover:from-orange-700 hover:to-orange-800 transition-all duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(Dt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{children:"Blocking..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"w-4 h-4"}),n.jsx("span",{children:"Block User"})]})})]})]})]})})]})};function vy(){const[t,e]=S.useState("tickets"),[r,s]=S.useState(null),[a,i]=S.useState(""),o=d=>{s(d)},l=()=>{s(null)},c=()=>t==="analytics"?n.jsx(gy,{}):t==="settings"?n.jsx(xy,{}):r?n.jsx(py,{ticket:r,onBack:l}):n.jsx(hy,{onTicketSelect:o,selectedTicketId:r==null?void 0:r.id,searchQuery:a});return n.jsx(ty,{currentView:t,onViewChange:e,searchQuery:a,onSearchChange:i,children:c()})}function yy(){return n.jsx(Yv,{children:n.jsx(yv,{children:n.jsx(wv,{children:n.jsx(Jv,{children:n.jsx(vy,{})})})})})}$m(document.getElementById("root")).render(n.jsx(S.StrictMode,{children:n.jsx(yy,{})}));
